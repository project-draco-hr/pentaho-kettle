{
  Shell parent=getParent();
  shell=new Shell(parent,SWT.DIALOG_TRIM | SWT.RESIZE | SWT.MAX| SWT.MIN);
  props.setLook(shell);
  shell.setImage((Image)GUIResource.getInstance().getImageConnection());
  lsMod=new ModifyListener(){
    public void modifyText(    ModifyEvent e){
      partitionSchema.setChanged();
    }
  }
;
  middle=props.getMiddlePct();
  margin=Const.MARGIN;
  FormLayout formLayout=new FormLayout();
  formLayout.marginWidth=Const.FORM_MARGIN;
  formLayout.marginHeight=Const.FORM_MARGIN;
  shell.setText(Messages.getString("PartitionSchemaDialog.Shell.Title"));
  shell.setLayout(formLayout);
  wOK=new Button(shell,SWT.PUSH);
  wOK.setText(" &OK ");
  wGet=new Button(shell,SWT.PUSH);
  wGet.setText(Messages.getString("PartitionSchema.ImportPartitions"));
  wCancel=new Button(shell,SWT.PUSH);
  wCancel.setText(" &Cancel ");
  Button[] buttons=new Button[]{wOK,wGet,wCancel};
  BaseStepDialog.positionBottomButtons(shell,buttons,margin,null);
  Label wlName=new Label(shell,SWT.RIGHT);
  props.setLook(wlName);
  wlName.setText(Messages.getString("PartitionSchemaDialog.PartitionName.Label"));
  FormData fdlName=new FormData();
  fdlName.top=new FormAttachment(0,0);
  fdlName.left=new FormAttachment(0,0);
  fdlName.right=new FormAttachment(middle,0);
  wlName.setLayoutData(fdlName);
  wName=new Text(shell,SWT.SINGLE | SWT.LEFT | SWT.BORDER);
  props.setLook(wName);
  wName.addModifyListener(lsMod);
  FormData fdName=new FormData();
  fdName.top=new FormAttachment(0,0);
  fdName.left=new FormAttachment(middle,margin);
  fdName.right=new FormAttachment(95,0);
  wName.setLayoutData(fdName);
  Label wlDynamic=new Label(shell,SWT.RIGHT);
  props.setLook(wlDynamic);
  wlDynamic.setText(Messages.getString("PartitionSchemaDialog.Dynamic.Label"));
  FormData fdlDynamic=new FormData();
  fdlDynamic.top=new FormAttachment(wName,margin);
  fdlDynamic.left=new FormAttachment(0,0);
  fdlDynamic.right=new FormAttachment(middle,0);
  wlDynamic.setLayoutData(fdlDynamic);
  wDynamic=new Button(shell,SWT.CHECK);
  props.setLook(wDynamic);
  wDynamic.setToolTipText(Messages.getString("PartitionSchemaDialog.Dynamic.Tooltip"));
  FormData fdDynamic=new FormData();
  fdDynamic.top=new FormAttachment(wName,margin);
  fdDynamic.left=new FormAttachment(middle,margin);
  fdDynamic.right=new FormAttachment(95,0);
  wDynamic.setLayoutData(fdDynamic);
  Label wlNumber=new Label(shell,SWT.RIGHT);
  props.setLook(wlNumber);
  wlNumber.setText(Messages.getString("PartitionSchemaDialog.Number.Label"));
  FormData fdlNumber=new FormData();
  fdlNumber.top=new FormAttachment(wDynamic,margin);
  fdlNumber.left=new FormAttachment(0,0);
  fdlNumber.right=new FormAttachment(middle,0);
  wlNumber.setLayoutData(fdlNumber);
  wNumber=new TextVar(variableSpace,shell,SWT.LEFT | SWT.BORDER | SWT.SINGLE,Messages.getString("PartitionSchemaDialog.Number.Tooltip"));
  props.setLook(wNumber);
  FormData fdNumber=new FormData();
  fdNumber.top=new FormAttachment(wDynamic,margin);
  fdNumber.left=new FormAttachment(middle,margin);
  fdNumber.right=new FormAttachment(95,0);
  wNumber.setLayoutData(fdNumber);
  Label wlPartitions=new Label(shell,SWT.RIGHT);
  wlPartitions.setText(Messages.getString("PartitionSchemaDialog.Partitions.Label"));
  props.setLook(wlPartitions);
  FormData fdlPartitions=new FormData();
  fdlPartitions.left=new FormAttachment(0,0);
  fdlPartitions.right=new FormAttachment(middle,0);
  fdlPartitions.top=new FormAttachment(wNumber,margin);
  wlPartitions.setLayoutData(fdlPartitions);
  ColumnInfo[] partitionColumns=new ColumnInfo[]{new ColumnInfo(Messages.getString("PartitionSchemaDialog.PartitionID.Label"),ColumnInfo.COLUMN_TYPE_TEXT,false,false)};
  wPartitions=new TableView(Variables.getADefaultVariableSpace(),shell,SWT.BORDER | SWT.FULL_SELECTION | SWT.MULTI,partitionColumns,1,lsMod,props);
  props.setLook(wPartitions);
  FormData fdPartitions=new FormData();
  fdPartitions.left=new FormAttachment(middle,margin);
  fdPartitions.right=new FormAttachment(100,0);
  fdPartitions.top=new FormAttachment(wNumber,margin);
  fdPartitions.bottom=new FormAttachment(wOK,-margin * 2);
  wPartitions.setLayoutData(fdPartitions);
  wOK.addListener(SWT.Selection,new Listener(){
    public void handleEvent(    Event e){
      ok();
    }
  }
);
  wGet.addListener(SWT.Selection,new Listener(){
    public void handleEvent(    Event e){
      importPartitions();
    }
  }
);
  wCancel.addListener(SWT.Selection,new Listener(){
    public void handleEvent(    Event e){
      cancel();
    }
  }
);
  SelectionAdapter selAdapter=new SelectionAdapter(){
    public void widgetDefaultSelected(    SelectionEvent e){
      ok();
    }
  }
;
  wName.addSelectionListener(selAdapter);
  shell.addShellListener(new ShellAdapter(){
    public void shellClosed(    ShellEvent e){
      cancel();
    }
  }
);
  getData();
  BaseStepDialog.setSize(shell);
  shell.open();
  Display display=parent.getDisplay();
  while (!shell.isDisposed()) {
    if (!display.readAndDispatch())     display.sleep();
  }
  return ok;
}
