{
  try {
    GetXMLDataMeta meta=new GetXMLDataMeta();
    getInfo(meta);
    FileInputList fileinputList=meta.getFiles(transMeta);
    if (fileinputList.nrOfFiles() > 0) {
      if (fileinputList.getFile(0).exists()) {
        listpath.clear();
        String encoding="UTF-8";
        if (!Const.isEmpty(meta.getEncoding()))         encoding=meta.getEncoding();
        SAXReader reader=new SAXReader();
        Document document=reader.read(KettleVFS.getInputStream(fileinputList.getFile(0)),encoding);
        List<Node> nodes=document.selectNodes(document.getRootElement().getName());
        for (        Node node : nodes) {
          if (!listpath.contains(node.getPath())) {
            listpath.add(node.getPath());
            addLoopXPath(node);
          }
        }
        String[] list_xpath=(String[])listpath.toArray(new String[listpath.size()]);
        EnterSelectionDialog dialog=new EnterSelectionDialog(shell,list_xpath,BaseMessages.getString(PKG,"GetXMLDataDialog.Dialog.SelectALoopPath.Title"),BaseMessages.getString(PKG,"GetXMLDataDialog.Dialog.SelectALoopPath.Message"));
        String listxpaths=dialog.open();
        if (listxpaths != null)         wLoopXPath.setText(listxpaths);
      }
 else {
        throw new KettleException(BaseMessages.getString(PKG,"GetXMLDataDialog.Exception.FileDoesNotExist",KettleVFS.getFilename(fileinputList.getFile(0))));
      }
    }
 else {
      MessageBox mb=new MessageBox(shell,SWT.OK | SWT.ICON_ERROR);
      mb.setMessage(BaseMessages.getString(PKG,"GetXMLDataDialog.FilesMissing.DialogMessage"));
      mb.setText(BaseMessages.getString(PKG,"System.Dialog.Error.Title"));
      mb.open();
    }
  }
 catch (  Exception e) {
    new ErrorDialog(shell,BaseMessages.getString(PKG,"GetXMLDataDialog.UnableToGetListOfPaths.Title"),BaseMessages.getString(PKG,"GetXMLDataDialog.UnableToGetListOfPaths.Message"),e);
  }
}
