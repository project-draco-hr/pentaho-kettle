{
  try {
    list.clear();
    GetXMLDataMeta meta=new GetXMLDataMeta();
    getInfo(meta);
    if (!checkLoopXPath(meta))     return;
    FileInputList inputList=meta.getFiles(transMeta);
    if (inputList.getFiles().size() > 0) {
      wFields.removeAll();
      String encoding="UTF-8";
      if (!Const.isEmpty(meta.getEncoding())) {
        encoding=meta.getEncoding();
      }
      SAXReader reader=new SAXReader();
      if (meta.isValidating()) {
        reader.setValidation(true);
        reader.setFeature("http://apache.org/xml/features/validation/schema",true);
      }
 else {
        reader.setEntityResolver(new IgnoreDTDEntityResolver());
      }
      Document document=reader.read(KettleVFS.getInputStream(inputList.getFile(0)),encoding);
      String realXPath=transMeta.environmentSubstitute(meta.getLoopXPath());
      List<Node> nodes=document.selectNodes(realXPath);
      for (      Node node : nodes) {
        setNodeField(node);
        ChildNode(node);
      }
      wFields.removeEmptyRows();
      wFields.setRowNums();
      wFields.optWidth(true);
    }
  }
 catch (  Exception e) {
    new ErrorDialog(shell,BaseMessages.getString(PKG,"GetXMLDataDialog.ErrorParsingData.DialogTitle"),BaseMessages.getString(PKG,"GetXMLDataDialog.ErrorParsingData.DialogMessage"),e);
  }
}
