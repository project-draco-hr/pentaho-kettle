{
  try {
    log.logDebug(BaseMessages.getString(PKG,"StepMeta.Log.SaveNewStep"));
    stepMeta.setObjectId(insertStep(id_transformation,stepMeta.getName(),stepMeta.getDescription(),stepMeta.getStepID(),stepMeta.isDistributes(),stepMeta.getCopies(),stepMeta.getLocation() == null ? -1 : stepMeta.getLocation().x,stepMeta.getLocation() == null ? -1 : stepMeta.getLocation().y,stepMeta.isDrawn(),stepMeta.getCopiesString()));
    repository.stepDelegate.saveStepPartitioningMeta(stepMeta.getStepPartitioningMeta(),id_transformation,stepMeta.getObjectId());
    log.logDebug(BaseMessages.getString(PKG,"StepMeta.Log.SaveStepDetails"));
    compatibleSaveRep(stepMeta.getStepMetaInterface(),repository,id_transformation,stepMeta.getObjectId());
    stepMeta.getStepMetaInterface().saveRep(repository,repository.metaStore,id_transformation,stepMeta.getObjectId());
    repository.saveStepAttribute(id_transformation,stepMeta.getObjectId(),"cluster_schema",stepMeta.getClusterSchema() == null ? "" : stepMeta.getClusterSchema().getName());
    repository.saveStepAttribute(id_transformation,stepMeta.getObjectId(),"row_distribution_code",stepMeta.getRowDistribution() == null ? null : stepMeta.getRowDistribution().getCode());
  }
 catch (  KettleException e) {
    throw new KettleException(BaseMessages.getString(PKG,"StepMeta.Exception.UnableToSaveStepInfo",String.valueOf(id_transformation)),e);
  }
}
