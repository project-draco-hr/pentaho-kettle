{
  try {
    String dtype;
    int nrkeys, nrvalues;
    lookupFromStepname=XMLHandler.getTagValue(stepnode,"from");
    lookupFromStep=null;
    inputSorted="Y".equalsIgnoreCase(XMLHandler.getTagValue(stepnode,"input_sorted"));
    Node lookup=XMLHandler.getSubNode(stepnode,"lookup");
    nrkeys=XMLHandler.countNodes(lookup,"key");
    nrvalues=XMLHandler.countNodes(lookup,"value");
    allocate(nrkeys,nrvalues);
    for (int i=0; i < nrkeys; i++) {
      Node knode=XMLHandler.getSubNodeByNr(lookup,"key",i);
      keystream[i]=XMLHandler.getTagValue(knode,"name");
      keylookup[i]=XMLHandler.getTagValue(knode,"field");
    }
    for (int i=0; i < nrvalues; i++) {
      Node vnode=XMLHandler.getSubNodeByNr(lookup,"value",i);
      value[i]=XMLHandler.getTagValue(vnode,"name");
      valueName[i]=XMLHandler.getTagValue(vnode,"rename");
      if (valueName[i] == null)       valueName[i]=value[i];
      valueDefault[i]=XMLHandler.getTagValue(vnode,"default");
      dtype=XMLHandler.getTagValue(vnode,"type");
      valueDefaultType[i]=Value.getType(dtype);
    }
  }
 catch (  Exception e) {
    throw new KettleXMLException(Messages.getString("StreamLookupMeta.Exception.UnableToLoadStepInfoFromXML"),e);
  }
}
