{
  try {
    DocumentBuilderFactory dbf=DocumentBuilderFactory.newInstance();
    DocumentBuilder db=dbf.newDocumentBuilder();
    Document doc=db.parse(docStream);
    Node plugins=XMLHandler.getSubNode(doc,"plugins");
    if (plugins != null) {
      Node plugin=plugins.getFirstChild();
      while (plugin != null) {
        readPluginFromResource(plugin,path,dir);
        plugin=plugin.getNextSibling();
      }
    }
    Node plugin=XMLHandler.getSubNode(doc,"plugin");
    if (plugin != null) {
      readPluginFromResource(plugin,path,dir);
    }
  }
 catch (  Exception e) {
    throw new KettleException(BaseMessages.getString(PKG,"RepositoryLoader.RuntimeError.UnableToReadPluginXML.TRANS0001"),e);
  }
}
