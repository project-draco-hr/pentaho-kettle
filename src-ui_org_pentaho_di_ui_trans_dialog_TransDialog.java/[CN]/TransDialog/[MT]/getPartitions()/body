{
  java.util.List<String> partitionedDatabaseNames=new ArrayList<String>();
  for (int i=0; i < transMeta.getDatabases().size(); i++) {
    DatabaseMeta databaseMeta=transMeta.getDatabase(i);
    if (databaseMeta.isPartitioned()) {
      partitionedDatabaseNames.add(databaseMeta.getName());
    }
  }
  String dbNames[]=(String[])partitionedDatabaseNames.toArray(new String[partitionedDatabaseNames.size()]);
  if (dbNames.length > 0) {
    EnterSelectionDialog dialog=new EnterSelectionDialog(shell,dbNames,Messages.getString("TransDialog.SelectPartitionedDatabase.Title"),Messages.getString("TransDialog.SelectPartitionedDatabase.Message"));
    String dbName=dialog.open();
    if (dbName != null) {
      DatabaseMeta databaseMeta=transMeta.findDatabase(dbName);
      PartitionDatabaseMeta[] partitioningInformation=databaseMeta.getPartitioningInformation();
      if (partitioningInformation != null) {
        wPartitions.clearAll(false);
        for (int i=0; i < partitioningInformation.length; i++) {
          PartitionDatabaseMeta meta=partitioningInformation[i];
          wPartitions.add(new String[]{meta.getPartitionId()});
        }
        wPartitions.removeEmptyRows();
        wPartitions.setRowNums();
        wPartitions.optWidth(true);
      }
    }
  }
}
