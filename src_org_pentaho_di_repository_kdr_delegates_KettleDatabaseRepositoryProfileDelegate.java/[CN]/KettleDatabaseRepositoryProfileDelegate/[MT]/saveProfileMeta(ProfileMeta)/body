{
  try {
    if (profileMeta.getObjectId() == null) {
      profileMeta.setObjectId(getProfileID(profileMeta.getName()));
    }
    if (profileMeta.getObjectId() == null) {
      profileMeta.setObjectId(repository.connectionDelegate.getNextProfileID());
      repository.connectionDelegate.insertTableRow("R_PROFILE",fillTableRow(profileMeta));
      saveProfilePermissions(profileMeta);
    }
 else {
      repository.connectionDelegate.updateTableRow("R_PROFILE","ID_PROFILE",fillTableRow(profileMeta));
      repository.getSecurityProvider().delProfilePermissions(profileMeta.getObjectId());
      saveProfilePermissions(profileMeta);
    }
  }
 catch (  KettleDatabaseException dbe) {
    throw new KettleException(BaseMessages.getString(PKG,"ProfileMeta.Error.NotSaved",profileMeta.getObjectId().toString()),dbe);
  }
  return true;
}
