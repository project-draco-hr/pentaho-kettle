{
  spoon.refreshGraph();
  SearchFieldsProgressDialog op=new SearchFieldsProgressDialog(spoon.transMeta,stepMeta,before);
  try {
    ProgressMonitorDialog pmd=new ProgressMonitorDialog(shell);
    pmd.run(false,false,op);
  }
 catch (  InvocationTargetException e) {
    new ErrorDialog(shell,spoon.props,"Error getting fields","An error occured finding fields!",e);
  }
catch (  InterruptedException e) {
    new ErrorDialog(shell,spoon.props,"Error getting fields","An error occured finding fields!",e);
  }
  Row fields=op.getFields();
  if (fields != null && fields.size() > 0) {
    StepFieldsDialog sfd=new StepFieldsDialog(shell,SWT.NONE,log,stepMeta.getName(),fields,spoon.props);
    String sn=(String)sfd.open();
    if (sn != null) {
      StepMeta esi=spoon.transMeta.findStep(sn);
      if (esi != null) {
        editStep(esi);
      }
    }
  }
 else {
    MessageBox mb=new MessageBox(shell,SWT.OK | SWT.ICON_INFORMATION);
    mb.setMessage("I couldn't find any fields!");
    mb.setText("Fields info");
    mb.open();
  }
}
