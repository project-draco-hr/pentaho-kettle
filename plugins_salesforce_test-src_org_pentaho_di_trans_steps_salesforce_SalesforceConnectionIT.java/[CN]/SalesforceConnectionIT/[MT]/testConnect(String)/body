{
  LogChannelInterface logInterface=mock(LogChannelInterface.class);
  String url="http://localhost/services/Soap/u/37.0";
  String username="MySampleUsername";
  SalesforceConnection connection;
  try {
    connection=spy(new SalesforceConnection(logInterface,url,username,password));
    doNothing().when(connection).createBinding(any(ConnectorConfig.class));
    doReturn(bindingStub).when(connection).getBinding();
    doReturn(mock(LoginResult.class)).when(bindingStub).login(anyString(),anyString());
    ArgumentCaptor<String> captorUser=ArgumentCaptor.forClass(String.class);
    ArgumentCaptor<String> captorPassword=ArgumentCaptor.forClass(String.class);
    connection.connect();
    verify(bindingStub).login(captorUser.capture(),captorPassword.capture());
    assertTrue(username.equals(captorUser.getValue()));
    assertTrue(samplePassword.equals(captorPassword.getValue()));
  }
 catch (  Exception e) {
    fail("Connection fail: " + e.getMessage());
  }
}
