{
  Point location=control.getLocation();
  Composite parent=control.getParent();
  while (parent != null) {
    Composite newParent=parent.getParent();
    if (newParent != null) {
      location.x+=parent.getLocation().x;
      location.y+=parent.getLocation().y;
    }
 else {
      if (parent instanceof Shell) {
        Shell shell=(Shell)parent;
        Rectangle bounds=shell.getBounds();
        Rectangle clientArea=shell.getClientArea();
        location.x+=bounds.width - clientArea.width;
        location.y+=bounds.height - clientArea.height;
      }
    }
    parent=newParent;
  }
  return location;
}
