{
  StringBuffer url=new StringBuffer(getURL(connection));
  if (supportsOptionsInURL()) {
    String optionIndicator=getExtraOptionIndicator();
    String optionSeparator=getExtraOptionSeparator();
    String valueSeparator=getExtraOptionValueSeparator();
    Map<String,String> map=connection.getExtraOptions();
    if (map.size() > 0) {
      Iterator<String> iterator=map.keySet().iterator();
      boolean first=true;
      while (iterator.hasNext()) {
        String typedParameter=(String)iterator.next();
        int dotIndex=typedParameter.indexOf('.');
        if (dotIndex >= 0) {
          String typeCode=typedParameter.substring(0,dotIndex);
          String parameter=typedParameter.substring(dotIndex + 1);
          String value=map.get(typedParameter);
          if (connection.getDatabaseType().getShortName().equals(typeCode)) {
            if (first && url.indexOf(valueSeparator) == -1) {
              url.append(optionIndicator);
            }
 else {
              url.append(optionSeparator);
            }
            url.append(parameter);
            if (!Const.isEmpty(value)) {
              url.append(valueSeparator).append(value);
            }
            first=false;
          }
        }
      }
    }
  }
 else {
  }
  return url.toString();
}
