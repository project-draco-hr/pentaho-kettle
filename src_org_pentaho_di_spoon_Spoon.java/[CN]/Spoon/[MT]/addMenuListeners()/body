{
  try {
    File propertiesFile=new File("ui/menubar.properties");
    if (propertiesFile.exists()) {
      Properties props=new Properties();
      props.load(new FileInputStream(propertiesFile));
      String ids[]=menuBar.getMenuItemIds();
      for (int i=0; i < ids.length; i++) {
        String methodName=(String)props.get(ids[i]);
        if (methodName != null) {
          menuBar.addMenuListener(ids[i],this,methodName);
        }
      }
      Iterator it=menuMap.keySet().iterator();
      while (it.hasNext()) {
        String id=(String)it.next();
        PopupMenu menu=(PopupMenu)menuMap.get(id);
        ids=menu.getMenuItemIds();
        for (int i=0; i < ids.length; i++) {
          String methodName=(String)props.get(ids[i]);
          if (methodName != null) {
            menu.addMenuListener(ids[i],this,methodName);
          }
        }
        for (int i=0; i < menuListeners.size(); i++) {
          Object info[]=menuListeners.get(i);
          menu.addMenuListener((String)info[0],info[1],(String)info[2]);
        }
      }
    }
    for (int i=0; i < menuListeners.size(); i++) {
      Object info[]=menuListeners.get(i);
      menuBar.addMenuListener((String)info[0],info[1],(String)info[2]);
    }
  }
 catch (  Throwable t) {
    t.printStackTrace();
  }
}
