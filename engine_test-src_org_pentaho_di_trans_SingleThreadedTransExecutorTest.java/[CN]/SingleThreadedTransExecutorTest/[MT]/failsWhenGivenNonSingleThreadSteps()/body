{
  KettleEnvironment.init();
  TransMeta transMeta=new TransMeta();
  transMeta.setName("failsWhenGivenNonSingleThreadSteps");
  StepsMetricsMeta metaInterface=new StepsMetricsMeta();
  PluginRegistry plugReg=PluginRegistry.getInstance();
  String id=plugReg.getPluginId(StepPluginType.class,metaInterface);
  StepMeta stepMeta=new StepMeta(id,"stepMetrics",metaInterface);
  stepMeta.setDraw(true);
  transMeta.addStep(stepMeta);
  Trans trans=new Trans(transMeta);
  trans.prepareExecution(null);
  SingleThreadedTransExecutor executor=new SingleThreadedTransExecutor(trans);
  executor.init();
}
