{
  TransMeta transMeta=new TransMeta();
  transMeta.setName("MysqlBulkLoader");
  Map<String,String> vars=new HashMap<String,String>();
  vars.put("delim",",");
  vars.put("enclos","'");
  vars.put("charset","UTF8");
  vars.put("tbl","sometable");
  vars.put("schema","someschema");
  transMeta.injectVariables(vars);
  MySQLDatabaseMeta mysql=new MySQLDatabaseMeta();
  mysql.setName("MySQL");
  DatabaseMeta dbMeta=new DatabaseMeta();
  dbMeta.setDatabaseInterface(mysql);
  dbMeta.setQuoteAllFields(true);
  lmeta=new MySQLBulkLoaderMeta();
  lmeta.setDelimiter("${delim}");
  lmeta.setEnclosure("${enclos}");
  lmeta.setEncoding("${charset}");
  lmeta.setTableName("${tbl}");
  lmeta.setSchemaName("${schema}");
  lmeta.setDatabaseMeta(dbMeta);
  ldata=new MySQLBulkLoaderData();
  PluginRegistry plugReg=PluginRegistry.getInstance();
  String mblPid=plugReg.getPluginId(StepPluginType.class,lmeta);
  smeta=new StepMeta(mblPid,"MySqlBulkLoader",lmeta);
  Trans trans=new Trans(transMeta);
  transMeta.addStep(smeta);
  lder=new MySQLBulkLoader(smeta,ldata,1,transMeta,trans);
  lder.copyVariablesFrom(transMeta);
}
