{
  if (callerReference == null) {
    throw new IllegalArgumentException("callerReference cannot be null.");
  }
  Connection connection;
  try {
    if (callerReference instanceof Connection) {
      connection=(Connection)callerReference;
    }
 else     if (callerReference instanceof Statement) {
      connection=((Statement)callerReference).getConnection();
    }
 else     if (callerReference instanceof ResultSet) {
      connection=((ResultSet)callerReference).getStatement().getConnection();
    }
 else {
      throw new IllegalArgumentException("callerReference is invalid.");
    }
  }
 catch (  SQLException e) {
    throw new IllegalStateException(e.getMessage());
  }
  return (ConnectionJDBC3)connection;
}
