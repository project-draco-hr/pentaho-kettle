{
  try {
    String tablename=KettleDatabaseRepository.TABLE_R_TRANS_LOCK;
    LongObjectId id=repository.connectionDelegate.getNextID(tablename,KettleDatabaseRepository.FIELD_TRANS_LOCK_ID_TRANS_LOCK);
    RowMetaAndData table=new RowMetaAndData();
    table.addValue(new ValueMeta(KettleDatabaseRepository.FIELD_TRANS_LOCK_ID_TRANS_LOCK,ValueMetaInterface.TYPE_INTEGER),id);
    table.addValue(new ValueMeta(KettleDatabaseRepository.FIELD_TRANS_LOCK_ID_TRANSFORMATION,ValueMetaInterface.TYPE_INTEGER),id_transformation);
    table.addValue(new ValueMeta(KettleDatabaseRepository.FIELD_TRANS_LOCK_ID_USER,ValueMetaInterface.TYPE_INTEGER),repository.getUserInfo().getObjectId());
    table.addValue(new ValueMeta(KettleDatabaseRepository.FIELD_TRANS_LOCK_LOCK_MESSAGE,ValueMetaInterface.TYPE_STRING),message);
    table.addValue(new ValueMeta(KettleDatabaseRepository.FIELD_TRANS_LOCK_LOCK_DATE,ValueMetaInterface.TYPE_DATE),new Date());
    repository.connectionDelegate.insertTableRow(tablename,table);
  }
 catch (  Exception e) {
    throw new KettleDatabaseException("Unable to insert lock into the database repository for transformation with id=" + id_transformation,e);
  }
}
