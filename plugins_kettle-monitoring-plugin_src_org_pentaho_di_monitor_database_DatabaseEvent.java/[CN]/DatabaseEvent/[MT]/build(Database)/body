{
  if (db == null) {
    return this;
  }
  setConnected(EventType.Boolean.getValue(EventType.Database.CONNECTED == eventType));
  setPartitionId(db.getPartitionId());
  setConnectionGroup(db.getConnectionGroup());
  setLogChannelId(db.getLogChannelId());
  setEventLogs(filterEventLogging(getLogChannelId()));
  setLog(getEventLogsAsString());
  if (db.getDatabaseMetaData() != null) {
    try {
      setDriverName(db.getDatabaseMetaData().getDriverName());
      setDriverVersion(db.getDatabaseMetaData().getDriverVersion());
    }
 catch (    Throwable t) {
    }
  }
  if (EventType.Database.DISCONNECTED == eventType) {
    setConnectionEndTimeMillis(new Date().getTime());
    setNrExecutedCommits(db.getNrExecutedCommits());
    if (getConnectionStartTimeMillis() != 0) {
      setConnectionDurationMillis(getConnectionEndTimeMillis() - getConnectionStartTimeMillis());
    }
  }
  return build(db.getDatabaseMeta());
}
