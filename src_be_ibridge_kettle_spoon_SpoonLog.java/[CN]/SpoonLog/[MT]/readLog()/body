{
  long time=new Date().getTime();
  long msSinceLastUpdate=time - lastUpdateLog;
  if (msSinceLastUpdate < UPDATE_TIME_LOG) {
    return;
  }
  lastUpdateLog=time;
  if (message == null)   message=new StringBuffer();
 else   message.setLength(0);
  try {
    BufferedReader reader=new BufferedReader(new InputStreamReader(in,Const.XML_ENCODING));
    String line;
    while ((line=reader.readLine()) != null) {
      message.append(line);
      message.append(Const.CR);
    }
  }
 catch (  Exception ex) {
    message.append("Unexpected error reading the log: " + ex.toString());
  }
  if (!wText.isDisposed() && message.length() > 0) {
    String mess=wText.getText();
    wText.setSelection(mess.length());
    wText.clearSelection();
    wText.insert(message.toString());
    int maxLines=Props.getInstance().getMaxNrLinesInLog();
    if (maxLines > 0 && wText.getLineCount() > maxLines) {
      StringBuffer buffer=new StringBuffer(mess);
      buffer.delete(0,message.length() + 20);
      wText.setText(buffer.toString());
    }
  }
}
