{
  try {
    logBasic(Messages.getString("Mapping.Log.StartingToRun"));
    while (processRow(meta,data) && !isStopped())     ;
  }
 catch (  Exception e) {
    logError(Messages.getString("Mapping.Log.UnexpectedError") + debug + "' : "+ e.toString());
    logError(Const.getStackTracker(e));
    setErrors(1);
    stopAll();
    data.trans.stopAll();
  }
 finally {
    if (data.trans != null) {
      data.trans.waitUntilFinished();
      try {
        data.trans.endProcessing("end");
      }
 catch (      KettleException e) {
        log.logError(toString(),Messages.getString("Mapping.Log.UnableToLogEndOfTransformation") + e.toString());
      }
      if (data.trans.getErrors() > 0) {
        logError(Messages.getString("Mapping.Log.ErrorOccurredInSubTransformation"));
        setErrors(1);
      }
    }
    dispose(meta,data);
    logSummary();
    markStop();
  }
}
