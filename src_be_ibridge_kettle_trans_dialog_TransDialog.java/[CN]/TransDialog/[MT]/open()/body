{
  Shell parent=getParent();
  Display display=parent.getDisplay();
  shell=new Shell(parent,SWT.DIALOG_TRIM | SWT.RESIZE | SWT.MAX| SWT.MIN);
  props.setLook(shell);
  lsMod=new ModifyListener(){
    public void modifyText(    ModifyEvent e){
      transMeta.setChanged();
    }
  }
;
  changed=transMeta.hasChanged();
  FormLayout formLayout=new FormLayout();
  formLayout.marginWidth=Const.FORM_MARGIN;
  formLayout.marginHeight=Const.FORM_MARGIN;
  shell.setLayout(formLayout);
  shell.setText(Messages.getString("TransDialog.Shell.Title"));
  int middle=props.getMiddlePct();
  int margin=Const.MARGIN;
  wTabFolder=new CTabFolder(shell,SWT.BORDER);
  props.setLook(wTabFolder,Props.WIDGET_STYLE_TAB);
  wTransTab=new CTabItem(wTabFolder,SWT.NONE);
  wTransTab.setText(Messages.getString("TransDialog.TransTab.Label"));
  Composite wTransComp=new Composite(wTabFolder,SWT.NONE);
  props.setLook(wTransComp);
  FormLayout transLayout=new FormLayout();
  transLayout.marginWidth=Const.MARGIN;
  transLayout.marginHeight=Const.MARGIN;
  wTransComp.setLayout(transLayout);
  wlTransname=new Label(wTransComp,SWT.RIGHT);
  wlTransname.setText(Messages.getString("TransDialog.Transname.Label"));
  props.setLook(wlTransname);
  fdlTransname=new FormData();
  fdlTransname.left=new FormAttachment(0,0);
  fdlTransname.right=new FormAttachment(middle,-margin);
  fdlTransname.top=new FormAttachment(0,margin);
  wlTransname.setLayoutData(fdlTransname);
  wTransname=new Text(wTransComp,SWT.SINGLE | SWT.LEFT | SWT.BORDER);
  props.setLook(wTransname);
  wTransname.addModifyListener(lsMod);
  fdTransname=new FormData();
  fdTransname.left=new FormAttachment(middle,0);
  fdTransname.top=new FormAttachment(0,margin);
  fdTransname.right=new FormAttachment(100,0);
  wTransname.setLayoutData(fdTransname);
  wlDirectory=new Label(wTransComp,SWT.RIGHT);
  wlDirectory.setText(Messages.getString("TransDialog.Directory.Label"));
  props.setLook(wlDirectory);
  fdlDirectory=new FormData();
  fdlDirectory.left=new FormAttachment(0,0);
  fdlDirectory.right=new FormAttachment(middle,-margin);
  fdlDirectory.top=new FormAttachment(wTransname,margin);
  wlDirectory.setLayoutData(fdlDirectory);
  wbDirectory=new Button(wTransComp,SWT.PUSH);
  wbDirectory.setText("...");
  props.setLook(wbDirectory);
  fdbDirectory=new FormData();
  fdbDirectory.right=new FormAttachment(100,0);
  fdbDirectory.top=new FormAttachment(wTransname,margin);
  wbDirectory.setLayoutData(fdbDirectory);
  wbDirectory.addSelectionListener(new SelectionAdapter(){
    public void widgetSelected(    SelectionEvent arg0){
      if (rep != null) {
        RepositoryDirectory directoryFrom=transMeta.getDirectory();
        long idDirectoryFrom=directoryFrom.getID();
        SelectDirectoryDialog sdd=new SelectDirectoryDialog(shell,SWT.NONE,rep);
        RepositoryDirectory rd=sdd.open();
        if (rd != null) {
          if (idDirectoryFrom != rd.getID()) {
            newDirectory=rd;
            wDirectory.setText(rd.getPath());
          }
 else {
          }
        }
      }
 else {
      }
    }
  }
);
  wDirectory=new Text(wTransComp,SWT.SINGLE | SWT.LEFT | SWT.BORDER);
  props.setLook(wDirectory);
  wDirectory.setEditable(false);
  fdDirectory=new FormData();
  fdDirectory.left=new FormAttachment(middle,0);
  fdDirectory.top=new FormAttachment(wTransname,margin);
  fdDirectory.right=new FormAttachment(wbDirectory,0);
  wDirectory.setLayoutData(fdDirectory);
  wlModUser=new Label(wTransComp,SWT.RIGHT);
  wlModUser.setText(Messages.getString("TransDialog.LastModifiedUser.Label"));
  props.setLook(wlModUser);
  fdlModUser=new FormData();
  fdlModUser.left=new FormAttachment(0,0);
  fdlModUser.right=new FormAttachment(middle,-margin);
  fdlModUser.top=new FormAttachment(wDirectory,margin * 3);
  wlModUser.setLayoutData(fdlModUser);
  wModUser=new Text(wTransComp,SWT.SINGLE | SWT.LEFT | SWT.BORDER);
  props.setLook(wModUser);
  wModUser.setEditable(false);
  wModUser.addModifyListener(lsMod);
  fdModUser=new FormData();
  fdModUser.left=new FormAttachment(middle,0);
  fdModUser.top=new FormAttachment(wDirectory,margin * 3);
  fdModUser.right=new FormAttachment(100,0);
  wModUser.setLayoutData(fdModUser);
  wlModDate=new Label(wTransComp,SWT.RIGHT);
  wlModDate.setText(Messages.getString("TransDialog.LastModifiedDate.Label"));
  props.setLook(wlModDate);
  fdlModDate=new FormData();
  fdlModDate.left=new FormAttachment(0,0);
  fdlModDate.right=new FormAttachment(middle,-margin);
  fdlModDate.top=new FormAttachment(wModUser,margin);
  wlModDate.setLayoutData(fdlModDate);
  wModDate=new Text(wTransComp,SWT.SINGLE | SWT.LEFT | SWT.BORDER);
  props.setLook(wModDate);
  wModDate.setEditable(false);
  wModDate.addModifyListener(lsMod);
  fdModDate=new FormData();
  fdModDate.left=new FormAttachment(middle,0);
  fdModDate.top=new FormAttachment(wModUser,margin);
  fdModDate.right=new FormAttachment(100,0);
  wModDate.setLayoutData(fdModDate);
  fdTransComp=new FormData();
  fdTransComp.left=new FormAttachment(0,0);
  fdTransComp.top=new FormAttachment(0,0);
  fdTransComp.right=new FormAttachment(100,0);
  fdTransComp.bottom=new FormAttachment(100,0);
  wTransComp.setLayoutData(fdTransComp);
  wTransComp.layout();
  wTransTab.setControl(wTransComp);
  wLogTab=new CTabItem(wTabFolder,SWT.NONE);
  wLogTab.setText(Messages.getString("TransDialog.LogTab.Label"));
  FormLayout LogLayout=new FormLayout();
  LogLayout.marginWidth=Const.MARGIN;
  LogLayout.marginHeight=Const.MARGIN;
  Composite wLogComp=new Composite(wTabFolder,SWT.NONE);
  props.setLook(wLogComp);
  wLogComp.setLayout(LogLayout);
  wlReadStep=new Label(wLogComp,SWT.RIGHT);
  wlReadStep.setText(Messages.getString("TransDialog.ReadStep.Label"));
  props.setLook(wlReadStep);
  fdlReadStep=new FormData();
  fdlReadStep.left=new FormAttachment(0,0);
  fdlReadStep.right=new FormAttachment(middle,-margin);
  fdlReadStep.top=new FormAttachment(0,0);
  wlReadStep.setLayoutData(fdlReadStep);
  wReadStep=new CCombo(wLogComp,SWT.SINGLE | SWT.LEFT | SWT.BORDER);
  props.setLook(wReadStep);
  wReadStep.addModifyListener(lsMod);
  fdReadStep=new FormData();
  fdReadStep.left=new FormAttachment(middle,0);
  fdReadStep.top=new FormAttachment(0,0);
  fdReadStep.right=new FormAttachment(100,0);
  wReadStep.setLayoutData(fdReadStep);
  wlInputStep=new Label(wLogComp,SWT.RIGHT);
  wlInputStep.setText(Messages.getString("TransDialog.InputStep.Label"));
  props.setLook(wlInputStep);
  fdlInputStep=new FormData();
  fdlInputStep.left=new FormAttachment(0,0);
  fdlInputStep.right=new FormAttachment(middle,-margin);
  fdlInputStep.top=new FormAttachment(wReadStep,margin * 2);
  wlInputStep.setLayoutData(fdlInputStep);
  wInputStep=new CCombo(wLogComp,SWT.SINGLE | SWT.LEFT | SWT.BORDER);
  props.setLook(wInputStep);
  wInputStep.addModifyListener(lsMod);
  fdInputStep=new FormData();
  fdInputStep.left=new FormAttachment(middle,0);
  fdInputStep.top=new FormAttachment(wReadStep,margin * 2);
  fdInputStep.right=new FormAttachment(100,0);
  wInputStep.setLayoutData(fdInputStep);
  wlWriteStep=new Label(wLogComp,SWT.RIGHT);
  wlWriteStep.setText(Messages.getString("TransDialog.WriteStep.Label"));
  props.setLook(wlWriteStep);
  fdlWriteStep=new FormData();
  fdlWriteStep.left=new FormAttachment(0,0);
  fdlWriteStep.right=new FormAttachment(middle,-margin);
  fdlWriteStep.top=new FormAttachment(wInputStep,margin * 2);
  wlWriteStep.setLayoutData(fdlWriteStep);
  wWriteStep=new CCombo(wLogComp,SWT.SINGLE | SWT.LEFT | SWT.BORDER);
  props.setLook(wWriteStep);
  wWriteStep.addModifyListener(lsMod);
  fdWriteStep=new FormData();
  fdWriteStep.left=new FormAttachment(middle,0);
  fdWriteStep.top=new FormAttachment(wInputStep,margin * 2);
  fdWriteStep.right=new FormAttachment(100,0);
  wWriteStep.setLayoutData(fdWriteStep);
  wlOutputStep=new Label(wLogComp,SWT.RIGHT);
  wlOutputStep.setText(Messages.getString("TransDialog.OutputStep.Label"));
  props.setLook(wlOutputStep);
  fdlOutputStep=new FormData();
  fdlOutputStep.left=new FormAttachment(0,0);
  fdlOutputStep.right=new FormAttachment(middle,-margin);
  fdlOutputStep.top=new FormAttachment(wWriteStep,margin * 2);
  wlOutputStep.setLayoutData(fdlOutputStep);
  wOutputStep=new CCombo(wLogComp,SWT.SINGLE | SWT.LEFT | SWT.BORDER);
  props.setLook(wOutputStep);
  wOutputStep.addModifyListener(lsMod);
  fdOutputStep=new FormData();
  fdOutputStep.left=new FormAttachment(middle,0);
  fdOutputStep.top=new FormAttachment(wWriteStep,margin * 2);
  fdOutputStep.right=new FormAttachment(100,0);
  wOutputStep.setLayoutData(fdOutputStep);
  wlUpdateStep=new Label(wLogComp,SWT.RIGHT);
  wlUpdateStep.setText(Messages.getString("TransDialog.UpdateStep.Label"));
  props.setLook(wlUpdateStep);
  fdlUpdateStep=new FormData();
  fdlUpdateStep.left=new FormAttachment(0,0);
  fdlUpdateStep.right=new FormAttachment(middle,-margin);
  fdlUpdateStep.top=new FormAttachment(wOutputStep,margin * 2);
  wlUpdateStep.setLayoutData(fdlUpdateStep);
  wUpdateStep=new CCombo(wLogComp,SWT.SINGLE | SWT.LEFT | SWT.BORDER);
  props.setLook(wUpdateStep);
  wUpdateStep.addModifyListener(lsMod);
  fdUpdateStep=new FormData();
  fdUpdateStep.left=new FormAttachment(middle,0);
  fdUpdateStep.top=new FormAttachment(wOutputStep,margin * 2);
  fdUpdateStep.right=new FormAttachment(100,0);
  wUpdateStep.setLayoutData(fdUpdateStep);
  for (int i=0; i < transMeta.nrSteps(); i++) {
    StepMeta stepMeta=transMeta.getStep(i);
    wReadStep.add(stepMeta.getName());
    wWriteStep.add(stepMeta.getName());
    wInputStep.add(stepMeta.getName());
    wOutputStep.add(stepMeta.getName());
    wUpdateStep.add(stepMeta.getName());
  }
  wlLogconnection=new Label(wLogComp,SWT.RIGHT);
  wlLogconnection.setText(Messages.getString("TransDialog.LogConnection.Label"));
  props.setLook(wlLogconnection);
  fdlLogconnection=new FormData();
  fdlLogconnection.left=new FormAttachment(0,0);
  fdlLogconnection.right=new FormAttachment(middle,-margin);
  fdlLogconnection.top=new FormAttachment(wUpdateStep,margin * 4);
  wlLogconnection.setLayoutData(fdlLogconnection);
  wbLogconnection=new Button(wLogComp,SWT.PUSH);
  wbLogconnection.setText(Messages.getString("TransDialog.LogconnectionButton.Label"));
  wbLogconnection.addSelectionListener(new SelectionAdapter(){
    public void widgetSelected(    SelectionEvent e){
      DatabaseMeta ci=new DatabaseMeta();
      DatabaseDialog cid=new DatabaseDialog(shell,SWT.NONE,log,ci,props);
      if (cid.open() != null) {
        transMeta.addDatabase(ci);
        wLogconnection.add(ci.getName());
        wLogconnection.select(wLogconnection.getItemCount() - 1);
      }
    }
  }
);
  fdbLogconnection=new FormData();
  fdbLogconnection.right=new FormAttachment(100,0);
  fdbLogconnection.top=new FormAttachment(wUpdateStep,margin * 4);
  wbLogconnection.setLayoutData(fdbLogconnection);
  wLogconnection=new CCombo(wLogComp,SWT.SINGLE | SWT.LEFT | SWT.BORDER);
  props.setLook(wLogconnection);
  wLogconnection.addModifyListener(lsMod);
  fdLogconnection=new FormData();
  fdLogconnection.left=new FormAttachment(middle,0);
  fdLogconnection.top=new FormAttachment(wUpdateStep,margin * 4);
  fdLogconnection.right=new FormAttachment(wbLogconnection,-margin);
  wLogconnection.setLayoutData(fdLogconnection);
  wlLogtable=new Label(wLogComp,SWT.RIGHT);
  wlLogtable.setText(Messages.getString("TransDialog.Logtable.Label"));
  props.setLook(wlLogtable);
  fdlLogtable=new FormData();
  fdlLogtable.left=new FormAttachment(0,0);
  fdlLogtable.right=new FormAttachment(middle,-margin);
  fdlLogtable.top=new FormAttachment(wLogconnection,margin);
  wlLogtable.setLayoutData(fdlLogtable);
  wLogtable=new Text(wLogComp,SWT.SINGLE | SWT.LEFT | SWT.BORDER);
  props.setLook(wLogtable);
  wLogtable.addModifyListener(lsMod);
  fdLogtable=new FormData();
  fdLogtable.left=new FormAttachment(middle,0);
  fdLogtable.top=new FormAttachment(wLogconnection,margin);
  fdLogtable.right=new FormAttachment(100,0);
  wLogtable.setLayoutData(fdLogtable);
  wlBatch=new Label(wLogComp,SWT.RIGHT);
  wlBatch.setText(Messages.getString("TransDialog.LogBatch.Label"));
  props.setLook(wlBatch);
  fdlBatch=new FormData();
  fdlBatch.left=new FormAttachment(0,0);
  fdlBatch.top=new FormAttachment(wLogtable,margin);
  fdlBatch.right=new FormAttachment(middle,-margin);
  wlBatch.setLayoutData(fdlBatch);
  wBatch=new Button(wLogComp,SWT.CHECK);
  props.setLook(wBatch);
  fdBatch=new FormData();
  fdBatch.left=new FormAttachment(middle,0);
  fdBatch.top=new FormAttachment(wLogtable,margin);
  fdBatch.right=new FormAttachment(100,0);
  wBatch.setLayoutData(fdBatch);
  wlLogfield=new Label(wLogComp,SWT.RIGHT);
  wlLogfield.setText(Messages.getString("TransDialog.Logfield.Label"));
  props.setLook(wlLogfield);
  fdlLogfield=new FormData();
  fdlLogfield.left=new FormAttachment(0,0);
  fdlLogfield.top=new FormAttachment(wBatch,margin);
  fdlLogfield.right=new FormAttachment(middle,-margin);
  wlLogfield.setLayoutData(fdlLogfield);
  wLogfield=new Button(wLogComp,SWT.CHECK);
  props.setLook(wLogfield);
  fdLogfield=new FormData();
  fdLogfield.left=new FormAttachment(middle,0);
  fdLogfield.top=new FormAttachment(wBatch,margin);
  fdLogfield.right=new FormAttachment(100,0);
  wLogfield.setLayoutData(fdLogfield);
  fdLogComp=new FormData();
  fdLogComp.left=new FormAttachment(0,0);
  fdLogComp.top=new FormAttachment(0,0);
  fdLogComp.right=new FormAttachment(100,0);
  fdLogComp.bottom=new FormAttachment(100,0);
  wLogComp.setLayoutData(fdLogComp);
  wLogComp.layout();
  wLogTab.setControl(wLogComp);
  wDateTab=new CTabItem(wTabFolder,SWT.NONE);
  wDateTab.setText(Messages.getString("TransDialog.DateTab.Label"));
  FormLayout DateLayout=new FormLayout();
  DateLayout.marginWidth=Const.MARGIN;
  DateLayout.marginHeight=Const.MARGIN;
  Composite wDateComp=new Composite(wTabFolder,SWT.NONE);
  props.setLook(wDateComp);
  wDateComp.setLayout(DateLayout);
  wlMaxdateconnection=new Label(wDateComp,SWT.RIGHT);
  wlMaxdateconnection.setText(Messages.getString("TransDialog.MaxdateConnection.Label"));
  props.setLook(wlMaxdateconnection);
  fdlMaxdateconnection=new FormData();
  fdlMaxdateconnection.left=new FormAttachment(0,0);
  fdlMaxdateconnection.right=new FormAttachment(middle,-margin);
  fdlMaxdateconnection.top=new FormAttachment(0,0);
  wlMaxdateconnection.setLayoutData(fdlMaxdateconnection);
  wMaxdateconnection=new CCombo(wDateComp,SWT.SINGLE | SWT.LEFT | SWT.BORDER);
  props.setLook(wMaxdateconnection);
  wMaxdateconnection.addModifyListener(lsMod);
  fdMaxdateconnection=new FormData();
  fdMaxdateconnection.left=new FormAttachment(middle,0);
  fdMaxdateconnection.top=new FormAttachment(0,0);
  fdMaxdateconnection.right=new FormAttachment(100,0);
  wMaxdateconnection.setLayoutData(fdMaxdateconnection);
  wlMaxdatetable=new Label(wDateComp,SWT.RIGHT);
  wlMaxdatetable.setText(Messages.getString("TransDialog.MaxdateTable.Label"));
  props.setLook(wlMaxdatetable);
  fdlMaxdatetable=new FormData();
  fdlMaxdatetable.left=new FormAttachment(0,0);
  fdlMaxdatetable.right=new FormAttachment(middle,-margin);
  fdlMaxdatetable.top=new FormAttachment(wMaxdateconnection,margin);
  wlMaxdatetable.setLayoutData(fdlMaxdatetable);
  wMaxdatetable=new Text(wDateComp,SWT.SINGLE | SWT.LEFT | SWT.BORDER);
  props.setLook(wMaxdatetable);
  wMaxdatetable.addModifyListener(lsMod);
  fdMaxdatetable=new FormData();
  fdMaxdatetable.left=new FormAttachment(middle,0);
  fdMaxdatetable.top=new FormAttachment(wMaxdateconnection,margin);
  fdMaxdatetable.right=new FormAttachment(100,0);
  wMaxdatetable.setLayoutData(fdMaxdatetable);
  wlMaxdatefield=new Label(wDateComp,SWT.RIGHT);
  wlMaxdatefield.setText(Messages.getString("TransDialog.MaxdateField.Label"));
  props.setLook(wlMaxdatefield);
  fdlMaxdatefield=new FormData();
  fdlMaxdatefield.left=new FormAttachment(0,0);
  fdlMaxdatefield.right=new FormAttachment(middle,-margin);
  fdlMaxdatefield.top=new FormAttachment(wMaxdatetable,margin);
  wlMaxdatefield.setLayoutData(fdlMaxdatefield);
  wMaxdatefield=new Text(wDateComp,SWT.SINGLE | SWT.LEFT | SWT.BORDER);
  props.setLook(wMaxdatefield);
  wMaxdatefield.addModifyListener(lsMod);
  fdMaxdatefield=new FormData();
  fdMaxdatefield.left=new FormAttachment(middle,0);
  fdMaxdatefield.top=new FormAttachment(wMaxdatetable,margin);
  fdMaxdatefield.right=new FormAttachment(100,0);
  wMaxdatefield.setLayoutData(fdMaxdatefield);
  wlMaxdateoffset=new Label(wDateComp,SWT.RIGHT);
  wlMaxdateoffset.setText(Messages.getString("TransDialog.MaxdateOffset.Label"));
  props.setLook(wlMaxdateoffset);
  fdlMaxdateoffset=new FormData();
  fdlMaxdateoffset.left=new FormAttachment(0,0);
  fdlMaxdateoffset.right=new FormAttachment(middle,-margin);
  fdlMaxdateoffset.top=new FormAttachment(wMaxdatefield,margin);
  wlMaxdateoffset.setLayoutData(fdlMaxdateoffset);
  wMaxdateoffset=new Text(wDateComp,SWT.SINGLE | SWT.LEFT | SWT.BORDER);
  props.setLook(wMaxdateoffset);
  wMaxdateoffset.addModifyListener(lsMod);
  fdMaxdateoffset=new FormData();
  fdMaxdateoffset.left=new FormAttachment(middle,0);
  fdMaxdateoffset.top=new FormAttachment(wMaxdatefield,margin);
  fdMaxdateoffset.right=new FormAttachment(100,0);
  wMaxdateoffset.setLayoutData(fdMaxdateoffset);
  wlMaxdatediff=new Label(wDateComp,SWT.RIGHT);
  wlMaxdatediff.setText(Messages.getString("TransDialog.Maxdatediff.Label"));
  props.setLook(wlMaxdatediff);
  fdlMaxdatediff=new FormData();
  fdlMaxdatediff.left=new FormAttachment(0,0);
  fdlMaxdatediff.right=new FormAttachment(middle,-margin);
  fdlMaxdatediff.top=new FormAttachment(wMaxdateoffset,margin);
  wlMaxdatediff.setLayoutData(fdlMaxdatediff);
  wMaxdatediff=new Text(wDateComp,SWT.SINGLE | SWT.LEFT | SWT.BORDER);
  props.setLook(wMaxdatediff);
  wMaxdatediff.addModifyListener(lsMod);
  fdMaxdatediff=new FormData();
  fdMaxdatediff.left=new FormAttachment(middle,0);
  fdMaxdatediff.top=new FormAttachment(wMaxdateoffset,margin);
  fdMaxdatediff.right=new FormAttachment(100,0);
  wMaxdatediff.setLayoutData(fdMaxdatediff);
  String conns[]=new String[transMeta.nrDatabases()];
  for (int i=0; i < transMeta.nrDatabases(); i++) {
    DatabaseMeta ci=transMeta.getDatabase(i);
    wLogconnection.add(ci.getName());
    wMaxdateconnection.add(ci.getName());
    conns[i]=ci.getName();
  }
  fdDateComp=new FormData();
  fdDateComp.left=new FormAttachment(0,0);
  fdDateComp.top=new FormAttachment(0,0);
  fdDateComp.right=new FormAttachment(100,0);
  fdDateComp.bottom=new FormAttachment(100,0);
  wDateComp.setLayoutData(fdDateComp);
  wDateComp.layout();
  wDateTab.setControl(wDateComp);
  wDepTab=new CTabItem(wTabFolder,SWT.NONE);
  wDepTab.setText(Messages.getString("TransDialog.DepTab.Label"));
  FormLayout DepLayout=new FormLayout();
  DepLayout.marginWidth=Const.MARGIN;
  DepLayout.marginHeight=Const.MARGIN;
  Composite wDepComp=new Composite(wTabFolder,SWT.NONE);
  props.setLook(wDepComp);
  wDepComp.setLayout(DepLayout);
  wlFields=new Label(wDepComp,SWT.RIGHT);
  wlFields.setText(Messages.getString("TransDialog.Fields.Label"));
  props.setLook(wlFields);
  fdlFields=new FormData();
  fdlFields.left=new FormAttachment(0,0);
  fdlFields.top=new FormAttachment(0,0);
  wlFields.setLayoutData(fdlFields);
  final int FieldsCols=3;
  final int FieldsRows=transMeta.nrDependencies();
  ColumnInfo[] colinf=new ColumnInfo[FieldsCols];
  colinf[0]=new ColumnInfo(Messages.getString("TransDialog.ColumnInfo.Connection.Label"),ColumnInfo.COLUMN_TYPE_CCOMBO,conns);
  colinf[1]=new ColumnInfo(Messages.getString("TransDialog.ColumnInfo.Table.Label"),ColumnInfo.COLUMN_TYPE_TEXT,false);
  colinf[2]=new ColumnInfo(Messages.getString("TransDialog.ColumnInfo.Field.Label"),ColumnInfo.COLUMN_TYPE_TEXT,false);
  wFields=new TableView(wDepComp,SWT.BORDER | SWT.FULL_SELECTION | SWT.MULTI,colinf,FieldsRows,lsMod,props);
  wGet=new Button(wDepComp,SWT.PUSH);
  wGet.setText(Messages.getString("TransDialog.GetDependenciesButton.Label"));
  fdGet=new FormData();
  fdGet.bottom=new FormAttachment(100,0);
  fdGet.left=new FormAttachment(50,0);
  wGet.setLayoutData(fdGet);
  fdFields=new FormData();
  fdFields.left=new FormAttachment(0,0);
  fdFields.top=new FormAttachment(wlFields,margin);
  fdFields.right=new FormAttachment(100,0);
  fdFields.bottom=new FormAttachment(wGet,0);
  wFields.setLayoutData(fdFields);
  fdDepComp=new FormData();
  fdDepComp.left=new FormAttachment(0,0);
  fdDepComp.top=new FormAttachment(0,0);
  fdDepComp.right=new FormAttachment(100,0);
  fdDepComp.bottom=new FormAttachment(100,0);
  wDepComp.setLayoutData(fdDepComp);
  wDepComp.layout();
  wDepTab.setControl(wDepComp);
  wPerfTab=new CTabItem(wTabFolder,SWT.NONE);
  wPerfTab.setText(Messages.getString("TransDialog.PerformanceTab.Label"));
  Composite wPerfComp=new Composite(wTabFolder,SWT.NONE);
  props.setLook(wPerfComp);
  FormLayout perfLayout=new FormLayout();
  perfLayout.marginWidth=Const.MARGIN;
  perfLayout.marginHeight=Const.MARGIN;
  wPerfComp.setLayout(perfLayout);
  wlSizeRowset=new Label(wPerfComp,SWT.RIGHT);
  wlSizeRowset.setText(Messages.getString("TransDialog.SizeRowset.Label"));
  props.setLook(wlSizeRowset);
  fdlSizeRowset=new FormData();
  fdlSizeRowset.left=new FormAttachment(0,0);
  fdlSizeRowset.right=new FormAttachment(middle,-margin);
  fdlSizeRowset.top=new FormAttachment(0,margin);
  wlSizeRowset.setLayoutData(fdlSizeRowset);
  wSizeRowset=new Text(wPerfComp,SWT.SINGLE | SWT.LEFT | SWT.BORDER);
  props.setLook(wSizeRowset);
  wSizeRowset.addModifyListener(lsMod);
  fdSizeRowset=new FormData();
  fdSizeRowset.left=new FormAttachment(middle,0);
  fdSizeRowset.top=new FormAttachment(0,margin);
  fdSizeRowset.right=new FormAttachment(100,0);
  wSizeRowset.setLayoutData(fdSizeRowset);
  fdPerfComp=new FormData();
  fdPerfComp.left=new FormAttachment(0,0);
  fdPerfComp.top=new FormAttachment(0,0);
  fdPerfComp.right=new FormAttachment(100,0);
  fdPerfComp.bottom=new FormAttachment(100,0);
  wPerfComp.setLayoutData(fdPerfComp);
  wPerfComp.layout();
  wPerfTab.setControl(wPerfComp);
  fdTabFolder=new FormData();
  fdTabFolder.left=new FormAttachment(0,0);
  fdTabFolder.top=new FormAttachment(0,0);
  fdTabFolder.right=new FormAttachment(100,0);
  fdTabFolder.bottom=new FormAttachment(100,-50);
  wTabFolder.setLayoutData(fdTabFolder);
  wOK=new Button(shell,SWT.PUSH);
  wOK.setText(Messages.getString("System.Button.OK"));
  wSQL=new Button(shell,SWT.PUSH);
  wSQL.setText(Messages.getString("System.Button.SQL"));
  wCancel=new Button(shell,SWT.PUSH);
  wCancel.setText(Messages.getString("System.Button.Cancel"));
  BaseStepDialog.positionBottomButtons(shell,new Button[]{wOK,wSQL,wCancel},Const.MARGIN,null);
  lsOK=new Listener(){
    public void handleEvent(    Event e){
      ok();
    }
  }
;
  lsGet=new Listener(){
    public void handleEvent(    Event e){
      get();
    }
  }
;
  lsSQL=new Listener(){
    public void handleEvent(    Event e){
      sql();
    }
  }
;
  lsCancel=new Listener(){
    public void handleEvent(    Event e){
      cancel();
    }
  }
;
  wOK.addListener(SWT.Selection,lsOK);
  wGet.addListener(SWT.Selection,lsGet);
  wSQL.addListener(SWT.Selection,lsSQL);
  wCancel.addListener(SWT.Selection,lsCancel);
  lsDef=new SelectionAdapter(){
    public void widgetDefaultSelected(    SelectionEvent e){
      ok();
    }
  }
;
  wTransname.addSelectionListener(lsDef);
  wMaxdatetable.addSelectionListener(lsDef);
  wMaxdatefield.addSelectionListener(lsDef);
  wMaxdateoffset.addSelectionListener(lsDef);
  wMaxdatediff.addSelectionListener(lsDef);
  wLogtable.addSelectionListener(lsDef);
  wSizeRowset.addSelectionListener(lsDef);
  shell.addShellListener(new ShellAdapter(){
    public void shellClosed(    ShellEvent e){
      cancel();
    }
  }
);
  wTabFolder.setSelection(0);
  getData();
  BaseStepDialog.setSize(shell);
  shell.open();
  while (!shell.isDisposed()) {
    if (!display.readAndDispatch())     display.sleep();
  }
  return transMeta;
}
