{
  MockLoggingChannel log=new MockLoggingChannel();
  KettleLogChannelAppender appender=new KettleLogChannelAppender(log);
  Logger testLogger=Logger.getLogger(getClass());
  testLogger.setLevel(Level.ALL);
  Layout layout=new Log4jKettleLayout();
  @SuppressWarnings("deprecation") LoggingEvent event=new LoggingEvent("org.test",testLogger,Priority.DEBUG,"debug test!",null);
  appender.doAppend(event);
  assertEquals(0,log.getBasicMessages().size());
  assertEquals(0,log.getDetailedMessages().size());
  assertEquals(0,log.getErrorMessages().size());
  assertEquals(0,log.getMinimalMessages().size());
  assertEquals(0,log.getRowLevelMessages().size());
  assertEquals(1,log.getDebugMessages().size());
  assertEquals(layout.format(event),log.getDebugMessages().get(0).getMessage());
}
