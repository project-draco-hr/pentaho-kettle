{
  sql=new SQL(sqlQuery);
  serviceName=sql.getServiceName();
  service=servicesMap.get(serviceName);
  if (service == null) {
    throw new KettleException("Unable to find service with name '" + service + "' and SQL: "+ sqlQuery);
  }
  serviceTransMeta=loadTransMeta(repository);
  serviceTransMeta.setName(calculateTransname(sql,true));
  serviceTransMeta.activateParameters();
  serviceStepName=service.getServiceStepName();
  serviceFields=serviceTransMeta.getStepFields(serviceStepName);
}
