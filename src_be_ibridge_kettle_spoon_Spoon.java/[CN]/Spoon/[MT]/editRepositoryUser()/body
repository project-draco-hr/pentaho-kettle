{
  if (rep != null) {
    UserInfo userinfo=rep.getUserInfo();
    UserDialog ud=new UserDialog(shell,SWT.NONE,log,props,rep,userinfo);
    UserInfo ui=ud.open();
    if (!userinfo.isReadonly()) {
      if (ui != null) {
        try {
          ui.saveRep(rep);
        }
 catch (        KettleException e) {
          MessageBox mb=new MessageBox(shell,SWT.ICON_WARNING | SWT.OK);
          mb.setMessage("Sorry, I was unable to change this user in the repository: " + Const.CR + e.getMessage());
          mb.setText("Edit user");
          mb.open();
        }
      }
    }
 else {
      MessageBox mb=new MessageBox(shell,SWT.ICON_WARNING | SWT.OK);
      mb.setMessage("Sorry, you are not allowed to change this user.");
      mb.setText("Edit user");
      mb.open();
    }
  }
}
