{
  if (rep != null) {
    UserInfo userinfo=rep.getUserInfo();
    UserDialog ud=new UserDialog(shell,SWT.NONE,log,props,rep,userinfo);
    UserInfo ui=ud.open();
    if (!userinfo.isReadonly()) {
      if (ui != null) {
        try {
          ui.saveRep(rep);
        }
 catch (        KettleException e) {
          MessageBox mb=new MessageBox(shell,SWT.ICON_WARNING | SWT.OK);
          mb.setMessage(Messages.getString("Spoon.Dialog.Message.UnableChangeUser") + Const.CR + e.getMessage());
          mb.setText(Messages.getString("Spoon.Dialog.Title.UnableChangeUser"));
          mb.open();
        }
      }
    }
 else {
      MessageBox mb=new MessageBox(shell,SWT.ICON_WARNING | SWT.OK);
      mb.setMessage(Messages.getString("Spoon.Dialog.Message.NotAllowedChangeUser"));
      mb.setText(Messages.getString("Spoon.Dialog.Title.NotAllowedChangeUser"));
      mb.open();
    }
  }
}
