{
  if (rep != null) {
    if (!rep.userinfo.isReadonly()) {
      try {
        db.saveRep(rep);
        log.logDetailed(toString(),"Saved database connection [" + db + "] to the repository.");
      }
 catch (      KettleException ke) {
        new ErrorDialog(shell,props,"Can't save...","Error saving connection [" + db + "] to repository!",ke);
      }
    }
 else {
      new ErrorDialog(shell,props,"Can't save...","Error saving connection [" + db + "] to repository!",new KettleException("This repository user is read-only!"));
    }
  }
}
