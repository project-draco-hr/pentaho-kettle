{
  if (rep != null) {
    if (!rep.userinfo.isReadonly()) {
      try {
        db.saveRep(rep);
        log.logDetailed(toString(),Messages.getString("Spoon.Log.SavedDatabaseConnection",db.getDatabaseName()));
      }
 catch (      KettleException ke) {
        new ErrorDialog(shell,props,Messages.getString("Spoon.Dialog.Title.ErrorSavingConnection"),Messages.getString("Spoon.Dialog.Message.ErrorSavingConnection",db.getDatabaseName()),ke);
      }
    }
 else {
      new ErrorDialog(shell,props,Messages.getString("Spoon.Dialog.Title.UnableSave"),Messages.getString("Spoon.Dialog.Message.ErrorSavingConnection",db.getDatabaseName()),new KettleException(Messages.getString("Spoon.Dialog.Exception.ReadOnlyRepositoryUser")));
    }
  }
}
