{
  final Tree fTree=tree;
  Transfer[] ttypes=new Transfer[]{XMLTransferType.getInstance()};
  DragSource ddSource=new DragSource(fTree,DND.DROP_MOVE | DND.DROP_COPY);
  ddSource.setTransfer(ttypes);
  ddSource.addDragListener(new DragSourceListener(){
    public void dragStart(    DragSourceEvent event){
    }
    public void dragSetData(    DragSourceEvent event){
      TreeItem ti[]=fTree.getSelection();
      if (ti.length > 0) {
        String data=null;
        int type=0;
        String ts[]=Const.getTreeStrings(ti[0]);
        if (ts != null && ts.length > 0) {
          if (ts[0].equalsIgnoreCase(STRING_STEPS)) {
            type=DragAndDropContainer.TYPE_STEP;
            data=ti[0].getText();
          }
 else           if (ts[0].equalsIgnoreCase(STRING_BASE) || ts[0].equalsIgnoreCase(STRING_PLUGIN) || ts[0].equalsIgnoreCase(STRING_HISTORY)) {
            type=DragAndDropContainer.TYPE_BASE_STEP_TYPE;
            data=ti[0].getText();
          }
 else           if (ts[0].equalsIgnoreCase(STRING_CONNECTIONS)) {
            type=DragAndDropContainer.TYPE_DATABASE_CONNECTION;
            data=ti[0].getText();
          }
 else           if (ts[0].equalsIgnoreCase(STRING_HOPS)) {
            type=DragAndDropContainer.TYPE_TRANS_HOP;
            data=ti[0].getText();
          }
 else {
            return;
          }
          event.data=new DragAndDropContainer(type,data).getXML();
        }
      }
 else {
        event.doit=false;
      }
    }
    public void dragFinished(    DragSourceEvent event){
    }
  }
);
}
