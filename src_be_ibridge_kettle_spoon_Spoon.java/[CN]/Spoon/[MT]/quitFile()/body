{
  boolean exit=true;
  boolean showWarning=true;
  log.logDetailed(toString(),Messages.getString("Spoon.Log.QuitApplication"));
  saveSettings();
  showWarning=false;
  exit=true;
  SpoonLog spoonLog=getActiveSpoonLog();
  if ((exit && spoonLog != null && spoonLog.isRunning()) || (exit && showWarning && props.showExitWarning())) {
    String message=Messages.getString("Spoon.Message.Warning.PromptExit");
    if (spoonLog != null && spoonLog.isRunning())     message=Messages.getString("Spoon.Message.Warning.PromptExitWhenRunTransformation");
    MessageDialogWithToggle md=new MessageDialogWithToggle(shell,Messages.getString("System.Warning"),null,message,MessageDialog.WARNING,new String[]{Messages.getString("Spoon.Message.Warning.Yes"),Messages.getString("Spoon.Message.Warning.No")},1,Messages.getString("Spoon.Message.Warning.NotShowWarning"),!props.showExitWarning());
    int idx=md.open();
    props.setExitWarningShown(!md.getToggleState());
    props.saveProps();
    if ((idx & 0xFF) == 1)     exit=false;
 else     exit=true;
  }
  if (exit)   dispose();
  return exit;
}
