{
  String xml=XMLHandler.getXMLHeader() + transMeta.getXML();
  try {
    DataOutputStream dos=new DataOutputStream(new FileOutputStream(new File(fname)));
    dos.write(xml.getBytes(Const.XML_ENCODING));
    dos.close();
    props.addLastFile(Props.TYPE_PROPERTIES_SPOON,fname,RepositoryDirectory.DIRECTORY_SEPARATOR,false,"");
    saveSettings();
    addMenuLast();
    transMeta.clearChanged();
    setShellText();
    log.logDebug(toString(),"File written to [" + fname + "]");
  }
 catch (  Exception e) {
    log.logDebug(toString(),"Error opening file for writing! --> " + e.toString());
    MessageBox mb=new MessageBox(shell,SWT.OK | SWT.ICON_ERROR);
    mb.setMessage("Error saving file:" + Const.CR + e.toString());
    mb.setText("ERROR");
    mb.open();
  }
}
