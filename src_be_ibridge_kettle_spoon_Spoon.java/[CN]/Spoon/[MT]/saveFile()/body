{
  log.logDetailed(toString(),"Save to file or repository...");
  if (rep != null) {
    saveRepository();
  }
 else {
    if (transMeta.getFilename() != null) {
      save(transMeta.getFilename());
    }
 else {
      saveFileAs();
    }
  }
  try {
    transMeta.getDbCache().saveCache(log);
  }
 catch (  KettleException e) {
    new ErrorDialog(shell,props,"Error","An error occured saving the database cache to disk",e);
  }
}
