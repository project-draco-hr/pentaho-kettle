{
  Menu mBar=new Menu(shell,SWT.BAR);
  shell.setMenuBar(mBar);
  MenuItem mFile=new MenuItem(mBar,SWT.CASCADE);
  mFile.setText(Messages.getString("Spoon.Menu.File"));
  msFile=new Menu(shell,SWT.DROP_DOWN);
  mFile.setMenu(msFile);
  MenuItem miFileNew=new MenuItem(msFile,SWT.CASCADE);
  miFileNew.setText(Messages.getString("Spoon.Menu.File.New"));
  MenuItem miFileOpen=new MenuItem(msFile,SWT.CASCADE);
  miFileOpen.setText(Messages.getString("Spoon.Menu.File.Open"));
  MenuItem miFileImport=new MenuItem(msFile,SWT.CASCADE);
  miFileImport.setText(Messages.getString("Spoon.Menu.File.Import"));
  MenuItem miFileExport=new MenuItem(msFile,SWT.CASCADE);
  miFileExport.setText(Messages.getString("Spoon.Menu.File.Export"));
  MenuItem miFileSave=new MenuItem(msFile,SWT.CASCADE);
  miFileSave.setText(Messages.getString("Spoon.Menu.File.Save"));
  MenuItem miFileSaveAs=new MenuItem(msFile,SWT.CASCADE);
  miFileSaveAs.setText(Messages.getString("Spoon.Menu.File.SaveAs"));
  new MenuItem(msFile,SWT.SEPARATOR);
  MenuItem miFilePrint=new MenuItem(msFile,SWT.CASCADE);
  miFilePrint.setText(Messages.getString("Spoon.Menu.File.Print"));
  new MenuItem(msFile,SWT.SEPARATOR);
  MenuItem miFileQuit=new MenuItem(msFile,SWT.CASCADE);
  miFileQuit.setText(Messages.getString("Spoon.Menu.File.Quit"));
  miFileSep3=new MenuItem(msFile,SWT.SEPARATOR);
  addMenuLast();
  Listener lsFileOpen=new Listener(){
    public void handleEvent(    Event e){
      openFile(false);
    }
  }
;
  Listener lsFileImport=new Listener(){
    public void handleEvent(    Event e){
      openFile(true);
    }
  }
;
  Listener lsFileExport=new Listener(){
    public void handleEvent(    Event e){
      saveXMLFile();
    }
  }
;
  Listener lsFileNew=new Listener(){
    public void handleEvent(    Event e){
      newFile();
    }
  }
;
  Listener lsFileSave=new Listener(){
    public void handleEvent(    Event e){
      saveFile();
    }
  }
;
  Listener lsFileSaveAs=new Listener(){
    public void handleEvent(    Event e){
      saveFileAs();
    }
  }
;
  Listener lsFilePrint=new Listener(){
    public void handleEvent(    Event e){
      printFile();
    }
  }
;
  Listener lsFileQuit=new Listener(){
    public void handleEvent(    Event e){
      quitFile();
    }
  }
;
  miFileOpen.addListener(SWT.Selection,lsFileOpen);
  miFileImport.addListener(SWT.Selection,lsFileImport);
  miFileExport.addListener(SWT.Selection,lsFileExport);
  miFileNew.addListener(SWT.Selection,lsFileNew);
  miFileSave.addListener(SWT.Selection,lsFileSave);
  miFileSaveAs.addListener(SWT.Selection,lsFileSaveAs);
  miFilePrint.addListener(SWT.Selection,lsFilePrint);
  miFileQuit.addListener(SWT.Selection,lsFileQuit);
  MenuItem mEdit=new MenuItem(mBar,SWT.CASCADE);
  mEdit.setText(Messages.getString("Spoon.Menu.Edit"));
  Menu msEdit=new Menu(shell,SWT.DROP_DOWN);
  mEdit.setMenu(msEdit);
  miEditUndo=new MenuItem(msEdit,SWT.CASCADE);
  miEditRedo=new MenuItem(msEdit,SWT.CASCADE);
  setUndoMenu();
  new MenuItem(msEdit,SWT.SEPARATOR);
  MenuItem miEditUnselectAll=new MenuItem(msEdit,SWT.CASCADE);
  miEditUnselectAll.setText(Messages.getString("Spoon.Menu.Edit.ClearSelection"));
  MenuItem miEditSelectAll=new MenuItem(msEdit,SWT.CASCADE);
  miEditSelectAll.setText(Messages.getString("Spoon.Menu.Edit.SelectAllSteps"));
  new MenuItem(msEdit,SWT.SEPARATOR);
  MenuItem miEditCopy=new MenuItem(msEdit,SWT.CASCADE);
  miEditCopy.setText(Messages.getString("Spoon.Menu.Edit.CopyToClipboard"));
  MenuItem miEditPaste=new MenuItem(msEdit,SWT.CASCADE);
  miEditPaste.setText(Messages.getString("Spoon.Menu.Edit.PasteFromClipboard"));
  new MenuItem(msEdit,SWT.SEPARATOR);
  MenuItem miEditRefresh=new MenuItem(msEdit,SWT.CASCADE);
  miEditRefresh.setText(Messages.getString("Spoon.Menu.Edit.Refresh"));
  new MenuItem(msEdit,SWT.SEPARATOR);
  MenuItem miEditOptions=new MenuItem(msEdit,SWT.CASCADE);
  miEditOptions.setText(Messages.getString("Spoon.Menu.Edit.Options"));
  Listener lsEditUndo=new Listener(){
    public void handleEvent(    Event e){
      undoAction();
    }
  }
;
  Listener lsEditRedo=new Listener(){
    public void handleEvent(    Event e){
      redoAction();
    }
  }
;
  Listener lsEditUnselectAll=new Listener(){
    public void handleEvent(    Event e){
      editUnselectAll();
    }
  }
;
  Listener lsEditSelectAll=new Listener(){
    public void handleEvent(    Event e){
      editSelectAll();
    }
  }
;
  Listener lsEditOptions=new Listener(){
    public void handleEvent(    Event e){
      editOptions();
    }
  }
;
  miEditUndo.addListener(SWT.Selection,lsEditUndo);
  miEditRedo.addListener(SWT.Selection,lsEditRedo);
  miEditUnselectAll.addListener(SWT.Selection,lsEditUnselectAll);
  miEditSelectAll.addListener(SWT.Selection,lsEditSelectAll);
  miEditOptions.addListener(SWT.Selection,lsEditOptions);
  MenuItem mRep=new MenuItem(mBar,SWT.CASCADE);
  mRep.setText(Messages.getString("Spoon.Menu.Repository"));
  Menu msRep=new Menu(shell,SWT.DROP_DOWN);
  mRep.setMenu(msRep);
  MenuItem miRepConnect=new MenuItem(msRep,SWT.CASCADE);
  miRepConnect.setText(Messages.getString("Spoon.Menu.Repository.ConnectToRepository"));
  MenuItem miRepDisconnect=new MenuItem(msRep,SWT.CASCADE);
  miRepDisconnect.setText(Messages.getString("Spoon.Menu.Repository.DisconnectRepository"));
  MenuItem miRepExplore=new MenuItem(msRep,SWT.CASCADE);
  miRepExplore.setText(Messages.getString("Spoon.Menu.Repository.ExploreRepository"));
  new MenuItem(msRep,SWT.SEPARATOR);
  MenuItem miRepUser=new MenuItem(msRep,SWT.CASCADE);
  miRepUser.setText(Messages.getString("Spoon.Menu.Repository.EditCurrentUser"));
  Listener lsRepConnect=new Listener(){
    public void handleEvent(    Event e){
      openRepository();
    }
  }
;
  Listener lsRepDisconnect=new Listener(){
    public void handleEvent(    Event e){
      closeRepository();
    }
  }
;
  Listener lsRepExplore=new Listener(){
    public void handleEvent(    Event e){
      exploreRepository();
    }
  }
;
  Listener lsRepUser=new Listener(){
    public void handleEvent(    Event e){
      editRepositoryUser();
    }
  }
;
  miRepConnect.addListener(SWT.Selection,lsRepConnect);
  miRepDisconnect.addListener(SWT.Selection,lsRepDisconnect);
  miRepExplore.addListener(SWT.Selection,lsRepExplore);
  miRepUser.addListener(SWT.Selection,lsRepUser);
  MenuItem mTrans=new MenuItem(mBar,SWT.CASCADE);
  mTrans.setText(Messages.getString("Spoon.Menu.Transformation"));
  Menu msTrans=new Menu(shell,SWT.DROP_DOWN);
  mTrans.setMenu(msTrans);
  MenuItem miTransRun=new MenuItem(msTrans,SWT.CASCADE);
  miTransRun.setText(Messages.getString("Spoon.Menu.Transformation.Run"));
  MenuItem miTransPreview=new MenuItem(msTrans,SWT.CASCADE);
  miTransPreview.setText(Messages.getString("Spoon.Menu.Transformation.Preview"));
  MenuItem miTransCheck=new MenuItem(msTrans,SWT.CASCADE);
  miTransCheck.setText(Messages.getString("Spoon.Menu.Transformation.Verify"));
  MenuItem miTransImpact=new MenuItem(msTrans,SWT.CASCADE);
  miTransImpact.setText(Messages.getString("Spoon.Menu.Transformation.Impact"));
  MenuItem miTransSQL=new MenuItem(msTrans,SWT.CASCADE);
  miTransSQL.setText(Messages.getString("Spoon.Menu.Transformation.GetSQL"));
  new MenuItem(msTrans,SWT.SEPARATOR);
  MenuItem miLastImpact=new MenuItem(msTrans,SWT.CASCADE);
  miLastImpact.setText(Messages.getString("Spoon.Menu.Transformation.ShowLastImpactAnalyses"));
  MenuItem miLastCheck=new MenuItem(msTrans,SWT.CASCADE);
  miLastCheck.setText(Messages.getString("Spoon.Menu.Transformation.ShowLastVerifyResults"));
  MenuItem miLastPreview=new MenuItem(msTrans,SWT.CASCADE);
  miLastPreview.setText(Messages.getString("Spoon.Menu.Transformation.ShowLastPreviewResults"));
  new MenuItem(msTrans,SWT.SEPARATOR);
  MenuItem miTransCopy=new MenuItem(msTrans,SWT.CASCADE);
  miTransCopy.setText(Messages.getString("Spoon.Menu.Transformation.CopyTransformationToClipboard"));
  MenuItem miTransPaste=new MenuItem(msTrans,SWT.CASCADE);
  miTransPaste.setText(Messages.getString("Spoon.Menu.Transformation.PasteTransformationFromClipboard"));
  MenuItem miTransImage=new MenuItem(msTrans,SWT.CASCADE);
  miTransImage.setText(Messages.getString("Spoon.Menu.Transformation.CopyTransformationImageClipboard"));
  new MenuItem(msTrans,SWT.SEPARATOR);
  MenuItem miTransDetails=new MenuItem(msTrans,SWT.CASCADE);
  miTransDetails.setText(Messages.getString("Spoon.Menu.Transformation.Settings"));
  Listener lsTransDetails=new Listener(){
    public void handleEvent(    Event e){
      setTrans();
    }
  }
;
  Listener lsTransRun=new Listener(){
    public void handleEvent(    Event e){
      tabfolder.setSelection(1);
      spoonlog.startstop();
    }
  }
;
  Listener lsTransPreview=new Listener(){
    public void handleEvent(    Event e){
      spoonlog.preview();
    }
  }
;
  Listener lsTransCheck=new Listener(){
    public void handleEvent(    Event e){
      checkTrans();
    }
  }
;
  Listener lsTransImpact=new Listener(){
    public void handleEvent(    Event e){
      analyseImpact();
    }
  }
;
  Listener lsTransSQL=new Listener(){
    public void handleEvent(    Event e){
      getSQL();
    }
  }
;
  Listener lsLastPreview=new Listener(){
    public void handleEvent(    Event e){
      spoonlog.showPreview();
    }
  }
;
  Listener lsLastCheck=new Listener(){
    public void handleEvent(    Event e){
      showLastTransCheck();
    }
  }
;
  Listener lsLastImpact=new Listener(){
    public void handleEvent(    Event e){
      showLastImpactAnalyses();
    }
  }
;
  Listener lsTransCopy=new Listener(){
    public void handleEvent(    Event e){
      copyTransformation();
    }
  }
;
  Listener lsTransImage=new Listener(){
    public void handleEvent(    Event e){
      copyTransformationImage();
    }
  }
;
  Listener lsTransPaste=new Listener(){
    public void handleEvent(    Event e){
      pasteTransformation();
    }
  }
;
  miTransDetails.addListener(SWT.Selection,lsTransDetails);
  miTransRun.addListener(SWT.Selection,lsTransRun);
  miTransPreview.addListener(SWT.Selection,lsTransPreview);
  miTransCheck.addListener(SWT.Selection,lsTransCheck);
  miTransImpact.addListener(SWT.Selection,lsTransImpact);
  miTransSQL.addListener(SWT.Selection,lsTransSQL);
  miLastPreview.addListener(SWT.Selection,lsLastPreview);
  miLastCheck.addListener(SWT.Selection,lsLastCheck);
  miLastImpact.addListener(SWT.Selection,lsLastImpact);
  miTransCopy.addListener(SWT.Selection,lsTransCopy);
  miTransPaste.addListener(SWT.Selection,lsTransPaste);
  miTransImage.addListener(SWT.Selection,lsTransImage);
  MenuItem mWizard=new MenuItem(mBar,SWT.CASCADE);
  mWizard.setText(Messages.getString("Spoon.Menu.Wizard"));
  Menu msWizard=new Menu(shell,SWT.DROP_DOWN);
  mWizard.setMenu(msWizard);
  MenuItem miWizardNewConnection=new MenuItem(msWizard,SWT.CASCADE);
  miWizardNewConnection.setText(Messages.getString("Spoon.Menu.Wizard.CreateDatabaseConnectionWizard"));
  Listener lsWizardNewConnection=new Listener(){
    public void handleEvent(    Event e){
      createDatabaseWizard();
    }
  }
;
  miWizardNewConnection.addListener(SWT.Selection,lsWizardNewConnection);
  MenuItem miWizardCopyTable=new MenuItem(msWizard,SWT.CASCADE);
  miWizardCopyTable.setText(Messages.getString("Spoon.Menu.Wizard.CopyTableWizard"));
  Listener lsWizardCopyTable=new Listener(){
    public void handleEvent(    Event e){
      copyTableWizard();
    }
  }
;
  miWizardCopyTable.addListener(SWT.Selection,lsWizardCopyTable);
  MenuItem mHelp=new MenuItem(mBar,SWT.CASCADE);
  mHelp.setText(Messages.getString("Spoon.Menu.Help"));
  Menu msHelp=new Menu(shell,SWT.DROP_DOWN);
  mHelp.setMenu(msHelp);
  MenuItem miHelpCredit=new MenuItem(msHelp,SWT.CASCADE);
  miHelpCredit.setText(Messages.getString("Spoon.Menu.Help.Credits"));
  Listener lsHelpCredit=new Listener(){
    public void handleEvent(    Event e){
      ShowCreditsDialog scd=new ShowCreditsDialog(shell,props,GUIResource.getInstance().getImageCredits());
      scd.open();
    }
  }
;
  miHelpCredit.addListener(SWT.Selection,lsHelpCredit);
  MenuItem miHelpTOTD=new MenuItem(msHelp,SWT.CASCADE);
  miHelpTOTD.setText(Messages.getString("Spoon.Menu.Help.Tip"));
  Listener lsHelpTOTD=new Listener(){
    public void handleEvent(    Event e){
      TipsDialog td=new TipsDialog(shell,props);
      td.open();
    }
  }
;
  miHelpTOTD.addListener(SWT.Selection,lsHelpTOTD);
  new MenuItem(msHelp,SWT.SEPARATOR);
  MenuItem miHelpAbout=new MenuItem(msHelp,SWT.CASCADE);
  miHelpAbout.setText(Messages.getString("Spoon.Menu.About"));
  Listener lsHelpAbout=new Listener(){
    public void handleEvent(    Event e){
      helpAbout();
    }
  }
;
  miHelpAbout.addListener(SWT.Selection,lsHelpAbout);
}
