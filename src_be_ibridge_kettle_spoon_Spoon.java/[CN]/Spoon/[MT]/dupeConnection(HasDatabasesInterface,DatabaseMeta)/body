{
  String name=databaseMeta.getName();
  int pos=hasDatabasesInterface.indexOfDatabase(databaseMeta);
  if (databaseMeta != null) {
    DatabaseMeta copy=(DatabaseMeta)databaseMeta.clone();
    String dupename=Messages.getString("Spoon.Various.DupeName") + name;
    copy.setName(dupename);
    DatabaseDialog con=new DatabaseDialog(shell,SWT.NONE,log,copy,props);
    String newname=con.open();
    if (newname != null) {
      copy.verifyAndModifyDatabaseName(hasDatabasesInterface.getDatabases(),name);
      hasDatabasesInterface.addDatabase(pos + 1,copy);
      addUndoNew((UndoInterface)hasDatabasesInterface,new DatabaseMeta[]{(DatabaseMeta)copy.clone()},new int[]{pos + 1});
      saveConnection(copy);
      refreshTree();
    }
  }
}
