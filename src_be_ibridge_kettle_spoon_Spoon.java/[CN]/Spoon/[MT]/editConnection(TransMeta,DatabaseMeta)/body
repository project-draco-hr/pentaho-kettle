{
  DatabaseMeta before=(DatabaseMeta)databaseMeta.clone();
  DatabaseDialog con=new DatabaseDialog(shell,SWT.NONE,log,databaseMeta,props);
  con.setDatabases(transMeta.getDatabases());
  String newname=con.open();
  if (!Const.isEmpty(newname)) {
    DatabaseMeta after=(DatabaseMeta)databaseMeta.clone();
    addUndoChange(transMeta,new DatabaseMeta[]{before},new DatabaseMeta[]{after},new int[]{transMeta.indexOfDatabase(databaseMeta)});
    saveConnection(databaseMeta);
    databaseMeta.setChanged(false);
    refreshTree();
  }
  setShellText();
}
