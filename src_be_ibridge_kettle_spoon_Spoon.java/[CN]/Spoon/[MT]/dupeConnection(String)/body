{
  DatabaseMeta db=transMeta.findDatabase(name);
  int pos=transMeta.indexOfDatabase(db);
  if (db != null) {
    DatabaseMeta newdb=(DatabaseMeta)db.clone();
    String dupename=Messages.getString("Spoon.Various.DupeName") + name;
    newdb.setName(dupename);
    transMeta.addDatabase(pos + 1,newdb);
    refreshTree();
    DatabaseDialog con=new DatabaseDialog(shell,SWT.NONE,log,newdb,props);
    String newname=con.open();
    if (newname != null) {
      transMeta.removeDatabase(pos + 1);
      transMeta.addDatabase(pos + 1,newdb);
      if (!newname.equalsIgnoreCase(dupename))       refreshTree();
    }
 else {
      addUndoNew(new DatabaseMeta[]{(DatabaseMeta)db.clone()},new int[]{pos});
      saveConnection(db);
    }
  }
}
