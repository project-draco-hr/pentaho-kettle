{
  boolean saved=false;
  FileDialog dialog=new FileDialog(shell,SWT.SAVE);
  dialog.setFilterExtensions(Const.STRING_TRANS_FILTER_EXT);
  dialog.setFilterNames(Const.getTransformationFilterNames());
  String fname=dialog.open();
  if (fname != null) {
    boolean ending=false;
    for (int i=0; i < Const.STRING_TRANS_FILTER_EXT.length - 1; i++) {
      if (fname.endsWith(Const.STRING_TRANS_FILTER_EXT[i].substring(1))) {
        ending=true;
      }
    }
    if (fname.endsWith(Const.STRING_TRANS_DEFAULT_EXT))     ending=true;
    if (!ending) {
      fname+=Const.STRING_TRANS_DEFAULT_EXT;
    }
    int id=SWT.YES;
    try {
      FileObject f=KettleVFS.getFileObject(fname);
      if (f.exists()) {
        MessageBox mb=new MessageBox(shell,SWT.NO | SWT.YES | SWT.ICON_WARNING);
        mb.setMessage(Messages.getString("Spoon.Dialog.PromptOverwriteFile.Message"));
        mb.setText(Messages.getString("Spoon.Dialog.PromptOverwriteFile.Title"));
        id=mb.open();
      }
    }
 catch (    Exception e) {
    }
    if (id == SWT.YES) {
      saved=save(transMeta,fname);
      transMeta.setFilename(fname);
    }
  }
  return saved;
}
