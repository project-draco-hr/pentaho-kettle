{
  try {
    if (profileMeta.getID() <= 0) {
      profileMeta.setID(getProfileID(profileMeta.getName()));
    }
    if (profileMeta.getID() <= 0) {
      profileMeta.setID(repository.connectionDelegate.getNextProfileID());
      repository.connectionDelegate.insertTableRow("R_PROFILE",fillTableRow(profileMeta));
      saveProfilePermissions(profileMeta);
    }
 else {
      repository.connectionDelegate.updateTableRow("R_PROFILE","ID_PROFILE",fillTableRow(profileMeta));
      repository.delProfilePermissions(profileMeta.getID());
      saveProfilePermissions(profileMeta);
    }
  }
 catch (  KettleDatabaseException dbe) {
    throw new KettleException(BaseMessages.getString(PKG,"ProfileMeta.Error.NotSaved",Long.toString(profileMeta.getID())),dbe);
  }
  return true;
}
