{
  this.props=PropsUI.getInstance();
  Display display=shellParent.getDisplay();
  int margin=Const.MARGIN;
  shell=new Shell(shellParent,SWT.DIALOG_TRIM | SWT.RESIZE | SWT.CLOSE| SWT.MAX| SWT.MIN| SWT.ICON| SWT.APPLICATION_MODAL);
  props.setLook(shell);
  shell.setImage(GUIResource.getInstance().getImageSpoon());
  FormLayout formLayout=new FormLayout();
  formLayout.marginWidth=Const.FORM_MARGIN;
  formLayout.marginHeight=Const.FORM_MARGIN;
  shell.setText(BaseMessages.getString(PKG,"MissingEntryDialog.MissingPlugins"));
  shell.setLayout(formLayout);
  Label image=new Label(shell,SWT.NONE);
  props.setLook(image);
  Image icon=display.getSystemImage(SWT.ICON_QUESTION);
  image.setImage(icon);
  Label error=new Label(shell,SWT.NONE);
  props.setLook(error);
  error.setText(getErrorMessage(missingEntries,mode));
  FormData imageData=new FormData();
  imageData.left=new FormAttachment(0,5);
  imageData.right=new FormAttachment(10,0);
  imageData.top=new FormAttachment(0,10);
  image.setLayoutData(imageData);
  FormData errorData=new FormData();
  errorData.left=new FormAttachment(image,5);
  errorData.right=new FormAttachment(90,-5);
  errorData.top=new FormAttachment(0,10);
  error.setLayoutData(errorData);
  if (this.mode == MISSING_JOB_ENTRIES) {
    int height=233;
    int increase=10 * missingEntries.size();
    height=height + increase;
    shell.setSize(600,height);
    shell.setMinimumSize(600,height);
  }
 else {
    shell.setSize(660,150);
    shell.setMinimumSize(660,150);
  }
  Button searchButton=new Button(shell,SWT.PUSH);
  searchButton.setText(BaseMessages.getString(PKG,"MissingEntryDialog.SearchMarketplace"));
  searchButton.addSelectionListener(new SelectionAdapter(){
    public void widgetSelected(    SelectionEvent e){
      try {
        shell.dispose();
        Spoon.getInstance().openMarketplace();
      }
 catch (      Exception ex) {
        ex.printStackTrace();
      }
    }
  }
);
  Button closeButton=new Button(shell,SWT.PUSH);
  closeButton.setText(BaseMessages.getString(PKG,"MissingEntryDialog.Close"));
  closeButton.addSelectionListener(new SelectionAdapter(){
    public void widgetSelected(    SelectionEvent e){
      shell.dispose();
      jobEntryResult=null;
    }
  }
);
  Button[] buttons=null;
  if (this.mode == MISSING_JOB_ENTRIES) {
    Button openButton=new Button(shell,SWT.PUSH);
    openButton.setText(BaseMessages.getString(PKG,"MissingEntryDialog.OpenFile"));
    openButton.addSelectionListener(new SelectionAdapter(){
      public void widgetSelected(      SelectionEvent e){
        shell.dispose();
        jobEntryResult=new MissingEntry();
      }
    }
);
    buttons=new Button[]{searchButton,openButton,closeButton};
  }
 else {
    buttons=new Button[]{searchButton,closeButton};
  }
  BaseStepDialog.positionBottomButtons(shell,buttons,margin,null);
  shell.open();
  while (!shell.isDisposed()) {
    if (!display.readAndDispatch()) {
      display.sleep();
    }
  }
  return jobEntryResult;
}
