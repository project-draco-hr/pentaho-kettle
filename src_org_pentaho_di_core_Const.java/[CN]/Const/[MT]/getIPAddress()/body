{
  try {
    Enumeration enumInterfaces=NetworkInterface.getNetworkInterfaces();
    while (enumInterfaces.hasMoreElements()) {
      NetworkInterface nwi=(NetworkInterface)enumInterfaces.nextElement();
      Enumeration ip=nwi.getInetAddresses();
      while (ip.hasMoreElements()) {
        InetAddress in=(InetAddress)ip.nextElement();
        if (!in.isLoopbackAddress() && in.toString().indexOf(":") < 0) {
          return in.getHostAddress();
        }
      }
    }
  }
 catch (  SocketException e) {
  }
  return "127.0.0.1";
}
