{
  if (isRunning && job != null && job.isInitialized() && !job.isAlive()) {
    LocalVariables.getInstance().removeKettleVariables(job.getName());
    job=null;
    isRunning=false;
    if (chefHistoryRefresher != null)     chefHistoryRefresher.markRefreshNeeded();
    log.logMinimal(Spoon.APP_NAME,Messages.getString("JobLog.Log.JobHasEnded"));
  }
  if (!wStart.isDisposed()) {
    enableFields();
  }
}
