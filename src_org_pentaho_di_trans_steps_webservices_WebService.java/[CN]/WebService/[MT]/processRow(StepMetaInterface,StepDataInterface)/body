{
  meta=(WebServiceMeta)metaInterface;
  data=(WebServiceData)dataInterface;
  Object[] vCurrentRow=getRow();
  if (vCurrentRow != null) {
    if (first) {
      first=false;
      data.outputRowMeta=getInputRowMeta().clone();
      meta.getFields(data.outputRowMeta,getStepname(),null,null,this);
      defineIndexList(getInputRowMeta(),vCurrentRow);
      startXML();
    }
    parseRow(getInputRowMeta(),vCurrentRow);
    nbRowProcess++;
  }
  if ((vCurrentRow == null && (nbRowProcess % meta.getCallStep() != 0)) || (vCurrentRow != null && ((nbRowProcess > 0 && nbRowProcess % meta.getCallStep() == 0))) || (vCurrentRow == null && (!meta.hasFieldsIn()))) {
    endXML();
    requestSOAP(vCurrentRow,getInputRowMeta());
    startXML();
  }
  if (vCurrentRow == null) {
    setOutputDone();
  }
  return vCurrentRow != null;
}
