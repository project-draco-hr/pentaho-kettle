{
  HasDatabasesInterface hasDatabasesInterface=spoon.getActiveHasDatabasesInterface();
  if (hasDatabasesInterface == null) {
    return;
  }
  getDatabaseDialog().setDatabaseMeta(databaseMeta);
  getDatabaseDialog().setDatabases(hasDatabasesInterface.getDatabases());
  String newname=getDatabaseDialog().open();
  if (!Const.isEmpty(newname)) {
    databaseMeta=getDatabaseDialog().getDatabaseMeta();
    saveConnection(databaseMeta,Const.VERSION_COMMENT_EDIT_VERSION);
    spoon.refreshTree();
  }
  spoon.setShellText();
}
