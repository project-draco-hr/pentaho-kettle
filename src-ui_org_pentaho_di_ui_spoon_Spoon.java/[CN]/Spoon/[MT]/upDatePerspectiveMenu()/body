{
  org.pentaho.ui.xul.dom.Document doc=mainSpoonContainer.getDocumentRoot();
  XulMenupopup pluginPopup=(XulMenupopup)doc.getElementById("plugins-popup-placeholder");
  List perspectiveMenus=pluginPopup.getChildNodes();
  SpoonPerspectiveManager perspectiveManager=SpoonPerspectiveManager.getInstance();
  List<SpoonPerspective> perspectives=perspectiveManager.getPerspectives();
  SpoonPerspective activePerspective=perspectiveManager.getActivePerspective();
  for (int i=0; i < perspectives.size(); i++) {
    SpoonPerspective currentPerspective=perspectives.get(i);
    XulMenuitem currentMenuItem=(XulMenuitem)perspectiveMenus.get(i);
    currentMenuItem.setSelected(currentPerspective == activePerspective);
  }
}
