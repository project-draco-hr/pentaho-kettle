{
  if (rd.open()) {
    repositoryMeta=rd.getRepository();
    userinfo=rd.getUser();
    if (!userinfo.useTransformations()) {
      MessageBox mb=new MessageBox(shell,SWT.OK | SWT.ICON_ERROR);
      mb.setMessage(Messages.getString("Spoon.Dialog.RepositoryUserCannotWork.Message"));
      mb.setText(Messages.getString("Spoon.Dialog.RepositoryUserCannotWork.Title"));
      mb.open();
      userinfo=null;
      repositoryMeta=null;
      return false;
    }
 else {
      String repName=repositoryMeta.getName();
      RepositoriesMeta repsinfo=new RepositoriesMeta(log);
      if (repsinfo.readData()) {
        repositoryMeta=repsinfo.findRepository(repName);
        if (repositoryMeta != null) {
          setRepository(new Repository(log,repositoryMeta,userinfo));
          return true;
        }
 else {
          log.logError(toString(),Messages.getString("Spoon.Log.NoRepositoryRrovided"));
        }
      }
 else {
        log.logError(toString(),Messages.getString("Spoon.Log.NoRepositoriesDefined"));
      }
      return false;
    }
  }
 else {
    if (rd.isCancelled()) {
      return false;
    }
  }
  return true;
}
