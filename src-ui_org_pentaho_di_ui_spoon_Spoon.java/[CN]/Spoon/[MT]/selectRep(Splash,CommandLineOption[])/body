{
  RepositoryMeta repositoryMeta=null;
  UserInfo userinfo=null;
  StringBuffer optionRepname=getCommandLineOption(options,"rep").getArgument();
  StringBuffer optionFilename=getCommandLineOption(options,"file").getArgument();
  Permission perms[]=new Permission[]{Permission.TRANSFORMATION,Permission.JOB};
  if (Const.isEmpty(optionRepname) && Const.isEmpty(optionFilename) && props.showRepositoriesDialogAtStartup()) {
    if (log.isBasic())     log.logBasic(APP_NAME,BaseMessages.getString(PKG,"Spoon.Log.AskingForRepository"));
    splash.hide();
    RepositoriesDialog rd=new RepositoriesDialog(display,BaseMessages.getString(PKG,"Spoon.Application.Name"),perms);
    return openRepositoryDialog(rd,repositoryMeta,userinfo);
  }
 else   if (!Const.isEmpty(optionRepname) && Const.isEmpty(optionFilename)) {
    RepositoriesMeta repsinfo=new RepositoriesMeta();
    try {
      repsinfo.readData();
      repositoryMeta=repsinfo.findRepository(optionRepname.toString());
      if (repositoryMeta != null) {
        setRepository(RepositoryLoader.createRepository(repositoryMeta,userinfo));
      }
 else {
        String msg=BaseMessages.getString(PKG,"Spoon.Log.NoRepositoriesDefined");
        log.logError(toString(),msg);
        MessageBox mb=new MessageBox(shell,SWT.OK | SWT.ICON_ERROR);
        mb.setMessage(BaseMessages.getString(PKG,"Spoon.Error.Repository.NotFound",optionRepname.toString()));
        mb.setText(BaseMessages.getString(PKG,"Spoon.Error.Repository.NotFound.Title"));
        mb.open();
        RepositoriesDialog rd=new RepositoriesDialog(display,BaseMessages.getString(PKG,"Spoon.Application.Name"),perms);
        return openRepositoryDialog(rd,repositoryMeta,userinfo);
      }
    }
 catch (    Exception e) {
      log.logError(toString(),"Error reading repositories xml file",e);
    }
  }
  return true;
}
