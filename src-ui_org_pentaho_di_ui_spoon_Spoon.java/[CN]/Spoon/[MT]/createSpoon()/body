{
  StringBuffer optionLogfile=getCommandLineOption("logfile").getArgument();
  StringBuffer optionLoglevel=getCommandLineOption("level").getArgument();
  String version=Const.JAVA_VERSION;
  if ("1.5".compareToIgnoreCase(version) > 0) {
    System.out.println("The System is running on Java version " + version);
    System.out.println("Unfortunately, it needs version 1.5 or higher to run.");
    return;
  }
  Locale.setDefault(Const.DEFAULT_LOCALE);
  LogWriter.setConsoleAppenderDebug();
  if (Const.isEmpty(optionLogfile)) {
    log=LogWriter.getInstance(Const.SPOON_LOG_FILE,false,LogWriter.LOG_LEVEL_BASIC);
  }
 else {
    log=LogWriter.getInstance(optionLogfile.toString(),true,LogWriter.LOG_LEVEL_BASIC);
  }
  if (log.getRealFilename() != null) {
    if (log.isBasic())     log.logBasic(toString(),Messages.getString("Spoon.Log.LoggingToFile") + log.getRealFilename());
  }
  if (!Const.isEmpty(optionLoglevel)) {
    log.setLogLevel(optionLoglevel.toString());
    if (log.isBasic())     log.logBasic(toString(),Messages.getString("Spoon.Log.LoggingAtLevel") + log.getLogLevelDesc());
  }
  try {
    StepLoader.init();
  }
 catch (  KettleException e) {
    log.logError(toString(),Messages.getString("Spoon.Log.ErrorLoadingAndHaltSystem"),e);
    return;
  }
  try {
    JobEntryLoader.init();
  }
 catch (  KettleException e) {
    log.logError(toString(),"Error loading job entries & plugins... halting Spoon!",e);
    return;
  }
  init(null);
  SpoonFactory.setSpoonInstance(this);
  staticSpoon=this;
  setDestroy(true);
  GUIFactory.setThreadDialogs(new ThreadGuiResources());
  if (log.isBasic())   log.logBasic(toString(),Messages.getString("Spoon.Log.MainWindowCreated"));
}
