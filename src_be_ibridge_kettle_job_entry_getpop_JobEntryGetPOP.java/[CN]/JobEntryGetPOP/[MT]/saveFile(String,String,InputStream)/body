{
  LogWriter log=LogWriter.getInstance();
  if (filename == null) {
    filename=File.createTempFile("xx",".out").getName();
  }
  File file=new File(foldername,filename);
  for (int i=0; file.exists(); i++) {
    file=new File(foldername,filename + i);
  }
  FileOutputStream fos=new FileOutputStream(file);
  BufferedOutputStream bos=new BufferedOutputStream(fos);
  BufferedInputStream bis=new BufferedInputStream(input);
  int aByte;
  while ((aByte=bis.read()) != -1) {
    bos.write(aByte);
  }
  bos.flush();
  bos.close();
  bis.close();
}
