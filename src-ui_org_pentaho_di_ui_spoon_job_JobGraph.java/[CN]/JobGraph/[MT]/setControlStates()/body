{
  if (getDisplay().isDisposed())   return;
  getDisplay().asyncExec(new Runnable(){
    public void run(){
      boolean running=job != null && job.isActive();
      XulToolbarButton runButton=toolbar.getButtonById("job-run");
      if (runButton != null) {
        runButton.setEnable(!running);
      }
      XulToolbarButton stopButton=toolbar.getButtonById("job-stop");
      if (stopButton != null) {
        stopButton.setEnable(running);
      }
      XulToolbarButton versionsButton=toolbar.getButtonById("browse-versions");
      if (versionsButton != null) {
        boolean hasRepository=spoon.rep != null;
        boolean enabled=hasRepository && spoon.rep.getRepositoryMeta().getRepositoryCapabilities().supportsRevisions();
        versionsButton.setEnable(enabled);
      }
    }
  }
);
}
