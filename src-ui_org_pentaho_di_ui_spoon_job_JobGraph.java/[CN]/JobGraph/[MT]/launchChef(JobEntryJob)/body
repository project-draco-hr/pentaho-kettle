{
  String exactFilename=jobMeta.environmentSubstitute(entry.getFilename());
  String exactJobname=jobMeta.environmentSubstitute(entry.getJobName());
  if (Const.isEmpty(exactFilename) && !Const.isEmpty(exactJobname)) {
    try {
      JobMeta newJobMeta=new JobMeta(log,spoon.rep,exactJobname,entry.getDirectory());
      newJobMeta.clearChanged();
      spoon.delegates.jobs.addJobGraph(newJobMeta);
    }
 catch (    Throwable e) {
      new ErrorDialog(shell,Messages.getString("JobGraph.Dialog.ErrorLaunchingChefCanNotLoadJob.Title"),Messages.getString("JobGraph.Dialog.ErrorLaunchingChefCanNotLoadJob.Message"),e);
    }
  }
 else {
    try {
      if (Const.isEmpty(exactFilename)) {
        throw new Exception(Messages.getString("JobGraph.Exception.NoFilenameSpecified"));
      }
      JobMeta newJobMeta;
      if (KettleVFS.fileExists(exactFilename)) {
        newJobMeta=new JobMeta(log,exactFilename,spoon.rep,spoon);
      }
 else {
        newJobMeta=new JobMeta(log);
      }
      newJobMeta.setFilename(exactFilename);
      newJobMeta.clearChanged();
      spoon.delegates.jobs.addJobGraph(newJobMeta);
    }
 catch (    Throwable e) {
      new ErrorDialog(shell,Messages.getString("JobGraph.Dialog.ErrorLaunchingChefCanNotLoadJobFromXML.Title"),Messages.getString("JobGraph.Dialog.ErrorLaunchingChefCanNotLoadJobFromXML.Message"),e);
    }
  }
  spoon.applyVariables();
}
