{
  PluginInterface plugin=getPluginObject(pluginId);
  if (plugin == null) {
    throw new KettleException("No Plugin!");
  }
  String pluginFolderName=plugin.getPluginDirectory().getFile();
  File folder=new File(pluginFolderName);
  try {
    ClassLoader cl=PluginRegistry.getInstance().getClassLoader(getPluginObject(pluginId));
    if (cl instanceof KettleURLClassLoader) {
      ((KettleURLClassLoader)cl).closeClassLoader();
    }
  }
 catch (  Throwable t) {
    t.printStackTrace();
  }
  deleteDirectory(folder);
  if (!Display.getDefault().getThread().equals(Thread.currentThread())) {
    Spoon.getInstance().getDisplay().asyncExec(new Runnable(){
      public void run(){
        try {
          refreshSpoon();
        }
 catch (        KettleException e) {
          e.printStackTrace();
        }
      }
    }
);
  }
 else {
    refreshSpoon();
  }
}
