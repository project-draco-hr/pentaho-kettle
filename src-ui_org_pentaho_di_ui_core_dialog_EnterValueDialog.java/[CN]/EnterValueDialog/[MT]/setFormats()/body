{
  int formatIndex=wFormat.getSelectionIndex();
  String formatString=formatIndex >= 0 ? wFormat.getItem(formatIndex) : "";
  int type=ValueMeta.getType(wValueType.getText());
  String string=wInputString.getText();
  if (string.startsWith(" ") || string.endsWith(" ")) {
    string=Const.trim(string);
    wInputString.setText(string);
  }
switch (type) {
case ValueMetaInterface.TYPE_INTEGER:
    wFormat.setItems(Const.getNumberFormats());
  int index=(!Const.isEmpty(formatString)) ? wFormat.indexOf(formatString) : wFormat.indexOf("#");
index=(index < 0) ? 0 : index;
wFormat.select(index);
break;
case ValueMetaInterface.TYPE_NUMBER:
wFormat.setItems(Const.getNumberFormats());
index=(!Const.isEmpty(formatString)) ? wFormat.indexOf(formatString) : wFormat.indexOf("#.#");
index=(index < 0) ? 0 : index;
wFormat.select(index);
break;
case ValueMetaInterface.TYPE_DATE:
wFormat.setItems(Const.getDateFormats());
index=(!Const.isEmpty(formatString)) ? wFormat.indexOf(formatString) : wFormat.indexOf("yyyy/MM/dd HH:mm:ss");
index=(index < 0) ? 0 : index;
wFormat.select(index);
break;
case ValueMetaInterface.TYPE_BIGNUMBER:
wFormat.setItems(new String[]{});
break;
default :
wFormat.setItems(new String[]{});
break;
}
}
