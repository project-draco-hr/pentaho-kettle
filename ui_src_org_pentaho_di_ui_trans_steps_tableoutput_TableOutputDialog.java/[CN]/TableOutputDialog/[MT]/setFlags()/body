{
  boolean returnKeys=wReturnKeys.getSelection();
  boolean useBatch=wBatch.getSelection() && !transMeta.isUsingUniqueConnections() && !returnKeys;
  boolean enableBatch=!returnKeys && !transMeta.isUsingUniqueConnections();
  boolean useIgnore=!useBatch;
  boolean usePartitioning=wUsePart.getSelection();
  boolean isTableNameInField=wNameInField.getSelection();
  boolean enableTruncate=!(usePartitioning || isTableNameInField);
  boolean useTruncate=wTruncate.getSelection() && enableTruncate;
  boolean useTablename=!(isTableNameInField);
  wUsePart.setSelection(usePartitioning);
  wNameInField.setSelection(isTableNameInField);
  wBatch.setSelection(useBatch);
  wReturnKeys.setSelection(returnKeys);
  wTruncate.setSelection(useTruncate);
  wIgnore.setEnabled(useIgnore);
  wlIgnore.setEnabled(useIgnore);
  wlPartMonthly.setEnabled(usePartitioning);
  wPartMonthly.setEnabled(usePartitioning);
  wlPartDaily.setEnabled(usePartitioning);
  wPartDaily.setEnabled(usePartitioning);
  wlPartField.setEnabled(usePartitioning);
  wPartField.setEnabled(usePartitioning);
  wlNameField.setEnabled(isTableNameInField);
  wNameField.setEnabled(isTableNameInField);
  wlNameInTable.setEnabled(isTableNameInField);
  wNameInTable.setEnabled(isTableNameInField);
  wlTable.setEnabled(useTablename);
  wTable.setEnabled(useTablename);
  wlTruncate.setEnabled(enableTruncate);
  wTruncate.setEnabled(enableTruncate);
  wlReturnField.setEnabled(returnKeys);
  wReturnField.setEnabled(returnKeys);
  wlBatch.setEnabled(enableBatch);
  wBatch.setEnabled(enableBatch);
  boolean specifyFields=wSpecifyFields.getSelection();
  wFields.setEnabled(specifyFields);
  wGetFields.setEnabled(specifyFields);
  wDoMapping.setEnabled(specifyFields);
  wlNameInTable.setEnabled(isTableNameInField && !specifyFields);
  wNameInTable.setEnabled(isTableNameInField && !specifyFields);
  DatabaseMeta databaseMeta=transMeta.findDatabase(wConnection.getText());
  if (databaseMeta != null) {
    if (!databaseMeta.supportsAutoGeneratedKeys()) {
      wReturnKeys.setEnabled(false);
      wReturnKeys.setSelection(false);
      wReturnField.setEnabled(false);
      wReturnField.setText("");
    }
 else {
      wReturnKeys.setEnabled(true);
      wReturnField.setEnabled(true);
    }
  }
 else {
    wReturnKeys.setEnabled(true);
    wReturnField.setEnabled(true);
  }
}
