{
  SimpleDateFormat yyyyMMdd=new SimpleDateFormat("yyyyMMdd");
  SimpleDateFormat HHmmssSSS=new SimpleDateFormat("HHmmssSSS");
  SimpleDateFormat yyyyMMddHHmmssSSS=new SimpleDateFormat("yyyyMMdd_HHmmssSSS");
  File destFolder=new TemporaryFolder().newFolder("pdi5558");
  destFolder.deleteOnExit();
  String destFolderName=destFolder.getAbsolutePath();
  JobEntryFTP entry=new JobEntryFTP();
  entry.setTargetDirectory(destFolderName);
  entry.setAddDateBeforeExtension(true);
  entry.setDateInFilename(true);
  assertNull(entry.returnTargetFilename(null));
  assertEquals("Test Add Date without file extension",destFolderName + Const.FILE_SEPARATOR + "testFile_"+ yyyyMMdd.format(new Date()),entry.returnTargetFilename("testFile"));
  assertEquals("Test Add Date with file extension",destFolderName + Const.FILE_SEPARATOR + "testFile_"+ yyyyMMdd.format(new Date())+ ".txt",entry.returnTargetFilename("testFile.txt"));
  entry.setTimeInFilename(true);
  String beforeString=destFolderName + Const.FILE_SEPARATOR + "testFile_"+ yyyyMMddHHmmssSSS.format(new Date())+ ".txt";
  String actualValue=entry.returnTargetFilename("testFile.txt");
  String afterString=destFolderName + Const.FILE_SEPARATOR + "testFile_"+ yyyyMMddHHmmssSSS.format(new Date())+ ".txt";
  Pattern expectedFormat=Pattern.compile(Pattern.quote(destFolderName + Const.FILE_SEPARATOR + "testFile_"+ yyyyMMdd.format(new Date())+ "_") + "([\\d]{9})\\.txt");
  assertTrue("Output file matches expected format",expectedFormat.matcher(actualValue).matches());
  assertTrue("The actual time is not too early for test run",actualValue.compareTo(beforeString) >= 0);
  assertTrue("The actual time is not too late for test run",actualValue.compareTo(afterString) <= 0);
  entry.setDateInFilename(false);
  beforeString=destFolderName + Const.FILE_SEPARATOR + "testFile_"+ HHmmssSSS.format(new Date())+ ".txt";
  actualValue=entry.returnTargetFilename("testFile.txt");
  afterString=destFolderName + Const.FILE_SEPARATOR + "testFile_"+ HHmmssSSS.format(new Date())+ ".txt";
  expectedFormat=Pattern.compile(Pattern.quote(destFolderName + Const.FILE_SEPARATOR + "testFile_") + "([\\d]{9})\\.txt");
  assertTrue("Output file matches expected format",expectedFormat.matcher(actualValue).matches());
  assertTrue("The actual time is not too early for test run",actualValue.compareTo(beforeString) >= 0);
  assertTrue("The actual time is not too late for test run",actualValue.compareTo(afterString) <= 0);
}
