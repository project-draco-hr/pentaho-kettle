{
  Object oRC=new Object();
switch (ArgList.length) {
case 0:
    throw Context.reportRuntimeError("Please provide a valid string to the function call str2date.");
case 1:
  try {
    if (isNull(ArgList[0]))     return null;
 else     if (isUndefined(ArgList[0]))     return Context.getUndefinedValue();
    String sArg1=Context.toString(ArgList[0]);
    Format dfFormatter=new SimpleDateFormat();
    oRC=dfFormatter.parseObject(sArg1);
  }
 catch (  Exception e) {
    throw Context.reportRuntimeError("Could not apply local format : " + e.getMessage());
  }
break;
case 2:
try {
if (isNull(ArgList,new int[]{0,1})) return null;
 else if (isUndefined(ArgList,new int[]{0,1})) return Context.getUndefinedValue();
String sArg1=Context.toString(ArgList[0]);
String sArg2=Context.toString(ArgList[1]);
Format dfFormatter=new SimpleDateFormat(sArg2);
oRC=dfFormatter.parseObject(sArg1);
}
 catch (Exception e) {
throw Context.reportRuntimeError("Could not apply the given format on the string : " + e.getMessage());
}
break;
case 3:
try {
if (isNull(ArgList,new int[]{0,1,2})) return null;
 else if (isUndefined(ArgList,new int[]{0,1,2})) return Context.getUndefinedValue();
String sArg1=Context.toString(ArgList[0]);
Format dfFormatter;
String sArg2=Context.toString(ArgList[1]);
String sArg3=Context.toString(ArgList[2]);
if (sArg3.length() == 2) {
Locale dfLocale=new Locale(sArg3);
dfFormatter=new SimpleDateFormat(sArg2,dfLocale);
oRC=dfFormatter.parseObject(sArg1);
}
 else {
throw Context.reportRuntimeError("Locale is not 2 characters long.");
}
}
 catch (Exception e) {
throw Context.reportRuntimeError("Could not apply the local format : " + e.getMessage());
}
break;
case 4:
try {
if (isNull(ArgList,new int[]{0,1,2,3})) return null;
 else if (isUndefined(ArgList,new int[]{0,1,2,3})) return Context.getUndefinedValue();
String sArg1=Context.toString(ArgList[0]);
DateFormat dfFormatter;
String sArg2=Context.toString(ArgList[1]);
String sArg3=Context.toString(ArgList[2]);
String sArg4=Context.toString(ArgList[3]);
TimeZone tz=TimeZone.getTimeZone(sArg4);
if (sArg3.length() == 2) {
Locale dfLocale=new Locale(sArg3);
dfFormatter=new SimpleDateFormat(sArg2,dfLocale);
dfFormatter.setTimeZone(tz);
oRC=dfFormatter.parseObject(sArg1);
}
 else {
throw Context.reportRuntimeError("Locale is not 2 characters long.");
}
}
 catch (Exception e) {
throw Context.reportRuntimeError("Could not apply the local format : " + e.getMessage());
}
break;
default :
throw Context.reportRuntimeError("The function call str2date requires 1, 2, 3, or 4 arguments.");
}
return oRC;
}
