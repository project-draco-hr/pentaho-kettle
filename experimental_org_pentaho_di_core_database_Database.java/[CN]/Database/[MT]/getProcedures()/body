{
  String sql=databaseMeta.getSQLListOfProcedures();
  if (sql != null) {
    ArrayList procs=getRows(sql,1000);
    String[] str=new String[procs.size()];
    for (int i=0; i < procs.size(); i++) {
      str[i]=((Object[])procs.get(i))[0].toString();
    }
    return str;
  }
 else {
    ResultSet rs=null;
    try {
      DatabaseMetaData dbmd=getDatabaseMetaData();
      rs=dbmd.getProcedures(null,null,null);
      ArrayList rows=getRows(rs,0,null);
      String result[]=new String[rows.size()];
      for (int i=0; i < rows.size(); i++) {
        Object[] row=(Object[])rows.get(i);
        String procCatalog=rowinfo.getString(row,"PROCEDURE_CAT",null);
        String procSchema=rowinfo.getString(row,"PROCEDURE_SCHEMA",null);
        String procName=rowinfo.getString(row,"PROCEDURE_NAME","");
        String name="";
        if (procCatalog != null)         name+=procCatalog + ".";
 else         if (procSchema != null)         name+=procSchema + ".";
        name+=procName;
        result[i]=name;
      }
      return result;
    }
 catch (    Exception e) {
      throw new KettleDatabaseException("Unable to get list of procedures from database meta-data: ",e);
    }
 finally {
      if (rs != null)       try {
        rs.close();
      }
 catch (      Exception e) {
      }
    }
  }
}
