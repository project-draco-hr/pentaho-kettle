{
  LogWriter log=LogWriter.getInstance();
  Result result=previousResult;
  result.setResult(false);
  if (connection != null) {
    Database db=new Database(connection);
    db.shareVariablesWith(this);
    try {
      db.connect();
      String realTablename=environmentSubstitute(tablename);
      if (db.checkTableExists(realTablename)) {
        if (log.isDetailed())         log.logDetailed(toString(),"Table [" + realTablename + "] exists.");
        result.setResult(true);
      }
 else {
        if (log.isDetailed())         log.logDetailed(toString(),"Table [" + realTablename + "] doesn't exist!");
      }
      db.disconnect();
    }
 catch (    KettleDatabaseException dbe) {
      result.setNrErrors(1);
      log.logError(toString(),"An error occurred executing this step: " + dbe.getMessage());
    }
  }
 else {
    result.setNrErrors(1);
    log.logError(toString(),"No database connection is defined.");
  }
  return result;
}
