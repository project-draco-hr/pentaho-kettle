{
  shell.setMaximized(maximized);
  shell.setBounds(rectangle);
  if (minWidth > 0 || minHeight > 0) {
    Rectangle bounds=shell.getBounds();
    if (bounds.width < minWidth)     bounds.width=minWidth;
    if (bounds.height < minHeight)     bounds.height=minHeight;
    shell.setSize(bounds.width,bounds.height);
  }
  Rectangle shRect=shell.getBounds();
  Rectangle entireClientArea=shell.getDisplay().getClientArea();
  Rectangle resizedRect=Geometry.copy(shRect);
  constrainRectangleToContainer(resizedRect,entireClientArea);
  if (!resizedRect.equals(shRect) || isClippedByUnalignedMonitors(resizedRect,shell.getDisplay())) {
    Monitor monitor=shell.getDisplay().getPrimaryMonitor();
    if (shell.getParent() != null) {
      monitor=shell.getParent().getMonitor();
    }
    Rectangle monitorClientArea=monitor.getClientArea();
    constrainRectangleToContainer(resizedRect,monitorClientArea);
    resizedRect.x=monitorClientArea.x + (monitorClientArea.width - resizedRect.width) / 2;
    resizedRect.y=monitorClientArea.y + (monitorClientArea.height - resizedRect.height) / 2;
    shell.setBounds(resizedRect);
  }
}
