{
  Shell parent=getParent();
  shell=new Shell(parent,SWT.DIALOG_TRIM | SWT.RESIZE | SWT.MAX| SWT.MIN);
  props.setLook(shell);
  shell.setText("Enter Condition");
  FormLayout formLayout=new FormLayout();
  formLayout.marginWidth=Const.FORM_MARGIN;
  formLayout.marginHeight=Const.FORM_MARGIN;
  shell.setLayout(formLayout);
  wCond=new ConditionEditor(shell,SWT.NONE,condition,props,fields);
  props.setLook(wCond,Props.WIDGET_STYLE_FIXED);
  if (!getData())   return null;
  wOK=new Button(shell,SWT.PUSH);
  wOK.setText("  &OK  ");
  wCancel=new Button(shell,SWT.PUSH);
  wCancel.setText("  &Cancel  ");
  FormData fdCond=new FormData();
  int margin=Const.MARGIN * 2;
  fdCond.left=new FormAttachment(0,0);
  fdCond.top=new FormAttachment(0,0);
  fdCond.right=new FormAttachment(100,0);
  fdCond.bottom=new FormAttachment(100,-50);
  wCond.setLayoutData(fdCond);
  BaseStepDialog.positionBottomButtons(shell,new Button[]{wOK,wCancel},margin,null);
  wCancel.addListener(SWT.Selection,new Listener(){
    public void handleEvent(    Event e){
      condition=null;
      dispose();
    }
  }
);
  wOK.addListener(SWT.Selection,new Listener(){
    public void handleEvent(    Event e){
      handleOK();
    }
  }
);
  WindowProperty winprop=props.getScreen(shell.getText());
  if (winprop != null)   winprop.setShell(shell);
 else   shell.pack();
  shell.open();
  Display display=parent.getDisplay();
  while (!shell.isDisposed()) {
    if (!display.readAndDispatch())     display.sleep();
  }
  return condition;
}
