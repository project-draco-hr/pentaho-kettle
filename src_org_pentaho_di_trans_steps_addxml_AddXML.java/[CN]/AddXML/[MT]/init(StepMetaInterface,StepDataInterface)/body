{
  meta=(AddXMLMeta)smi;
  data=(AddXMLData)sdi;
  if (!super.init(smi,sdi))   return false;
  try {
    if (meta.isOmitNullValues()) {
      setSerializer(TransformerFactory.newInstance().newTransformer(new StreamSource(AddXML.class.getClassLoader().getResourceAsStream("org/pentaho/di/trans/steps/addxml/RemoveNulls.xsl"))));
    }
 else {
      setSerializer(TransformerFactory.newInstance().newTransformer());
    }
    setDomImplentation(DocumentBuilderFactory.newInstance().newDocumentBuilder().getDOMImplementation());
    if (meta.getEncoding() != null) {
      getSerializer().setOutputProperty(OutputKeys.ENCODING,meta.getEncoding());
    }
    if (meta.isOmitXMLheader()) {
      getSerializer().setOutputProperty(OutputKeys.OMIT_XML_DECLARATION,"yes");
    }
  }
 catch (  TransformerConfigurationException e) {
    return false;
  }
catch (  ParserConfigurationException e) {
    return false;
  }
  return true;
}
