{
  SpoonPerspective sp=perspectives.get(clazz);
  if (sp == null) {
    throw new KettleException("Could not locate perspective by class: " + clazz);
  }
  unloadPerspective(activePerspective);
  activePerspective=sp;
  List<XulEventHandler> theXulEventHandlers=sp.getEventHandlers();
  if (theXulEventHandlers != null) {
    for (    XulEventHandler handler : theXulEventHandlers) {
      domContainer.addEventHandler(handler);
    }
  }
  List<XulOverlay> overlays=sp.getOverlays();
  if (overlays != null) {
    for (    XulOverlay overlay : overlays) {
      try {
        domContainer.loadOverlay(overlay.getOverlayUri());
      }
 catch (      XulException e) {
        e.printStackTrace();
      }
    }
  }
  sp.setActive(true);
  deck.setSelectedIndex(deck.getChildNodes().indexOf(deck.getElementById("perspective-" + sp.getId())));
  return true;
}
