{
  int size=transMeta.findNrPrevSteps(stepInfo);
  try {
    if (before) {
      monitor.beginTask("Searching for input fields...",size);
      fields=transMeta.getPrevStepFields(stepInfo,monitor);
    }
 else {
      monitor.beginTask("Searching for output fields...",size);
      fields=transMeta.getStepFields(stepInfo,monitor);
    }
  }
 catch (  KettleStepException kse) {
    LogWriter.getInstance().logError("Search fields progress dialog","Unable to get fields for step [" + stepInfo + "] : "+ kse.getMessage());
    throw new InvocationTargetException(kse,"Unable to get fields for step [" + stepInfo + "] : "+ kse.getMessage());
  }
  monitor.done();
}
