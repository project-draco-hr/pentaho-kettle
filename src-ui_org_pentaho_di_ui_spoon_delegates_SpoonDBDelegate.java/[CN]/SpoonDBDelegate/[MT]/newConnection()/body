{
  HasDatabasesInterface hasDatabasesInterface=spoon.getActiveHasDatabasesInterface();
  if (hasDatabasesInterface == null)   return;
  DatabaseMeta databaseMeta=new DatabaseMeta();
  DatabaseDialog con=new DatabaseDialog(spoon.getShell(),databaseMeta);
  String con_name=con.open();
  if (!Const.isEmpty(con_name)) {
    databaseMeta.verifyAndModifyDatabaseName(hasDatabasesInterface.getDatabases(),null);
    hasDatabasesInterface.addDatabase(databaseMeta);
    spoon.addUndoNew((UndoInterface)hasDatabasesInterface,new DatabaseMeta[]{(DatabaseMeta)databaseMeta.clone()},new int[]{hasDatabasesInterface.indexOfDatabase(databaseMeta)});
    saveConnection(databaseMeta);
    spoon.refreshTree();
  }
}
