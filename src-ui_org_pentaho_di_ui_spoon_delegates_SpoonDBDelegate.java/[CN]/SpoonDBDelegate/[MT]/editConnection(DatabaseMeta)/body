{
  HasDatabasesInterface hasDatabasesInterface=spoon.getActiveHasDatabasesInterface();
  if (hasDatabasesInterface == null) {
    return;
  }
  if (databaseDialog == null) {
    databaseDialog=new XulDatabaseDialog(spoon.getShell());
  }
  databaseDialog.setDatabaseMeta(databaseMeta);
  databaseDialog.setDatabases(hasDatabasesInterface.getDatabases());
  String newname=databaseDialog.open();
  if (!Const.isEmpty(newname)) {
    databaseMeta=databaseDialog.getDatabaseMeta();
    saveConnection(databaseMeta,Const.VERSION_COMMENT_EDIT_VERSION);
    spoon.refreshTree();
  }
  spoon.setShellText();
}
