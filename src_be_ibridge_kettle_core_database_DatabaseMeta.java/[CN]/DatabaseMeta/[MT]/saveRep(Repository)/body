{
  try {
    if (getID() <= 0) {
      setID(rep.getDatabaseID(getName()));
    }
    if (getID() <= 0) {
      setID(rep.insertDatabase(getName(),getDatabaseTypeCode(getDatabaseType()),getAccessTypeDesc(getAccessType()),getHostname(),getDatabaseName(),getDatabasePortNumberString(),getUsername(),getPassword(),getServername(),getDataTablespace(),getIndexTablespace()));
    }
 else {
      rep.updateDatabase(getID(),getName(),getDatabaseTypeCode(getDatabaseType()),getAccessTypeDesc(getAccessType()),getHostname(),getDatabaseName(),getDatabasePortNumberString(),getUsername(),getPassword(),getServername(),getDataTablespace(),getIndexTablespace());
    }
    rep.delDatabaseAttributes(getID());
    Properties attributes=getAttributes();
    Enumeration keys=getAttributes().keys();
    while (keys.hasMoreElements()) {
      String code=(String)keys.nextElement();
      String attribute=(String)attributes.get(code);
      rep.insertDatabaseAttribute(getID(),code,attribute);
    }
  }
 catch (  KettleDatabaseException dbe) {
    throw new KettleException("Error saving database connection or one of its attributes to the repository.",dbe);
  }
}
