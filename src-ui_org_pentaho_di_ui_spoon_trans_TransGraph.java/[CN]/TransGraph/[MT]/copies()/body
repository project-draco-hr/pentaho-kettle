{
  final boolean multipleOK=checkNumberOfCopies(transMeta,getCurrentStep());
  selected_steps=null;
  String tt=Messages.getString("TransGraph.Dialog.NrOfCopiesOfStep.Title");
  String mt=Messages.getString("TransGraph.Dialog.NrOfCopiesOfStep.Message");
  EnterNumberDialog nd=new EnterNumberDialog(shell,getCurrentStep().getCopies(),tt,mt);
  int cop=nd.open();
  if (cop >= 0) {
    if (cop == 0)     cop=1;
    if (!multipleOK) {
      cop=1;
      MessageBox mb=new MessageBox(shell,SWT.YES | SWT.ICON_WARNING);
      mb.setMessage(Messages.getString("TransGraph.Dialog.MultipleCopiesAreNotAllowedHere.Message"));
      mb.setText(Messages.getString("TransGraph.Dialog.MultipleCopiesAreNotAllowedHere.Title"));
      mb.open();
    }
    if (getCurrentStep().getCopies() != cop) {
      getCurrentStep().setCopies(cop);
      spoon.refreshGraph();
    }
  }
}
