{
  final boolean multipleOK=checkNumberOfCopies(transMeta,getCurrentStep());
  selectedSteps=null;
  String tt=BaseMessages.getString(PKG,"TransGraph.Dialog.NrOfCopiesOfStep.Title");
  String mt=BaseMessages.getString(PKG,"TransGraph.Dialog.NrOfCopiesOfStep.Message");
  EnterStringDialog nd=new EnterStringDialog(shell,getCurrentStep().getCopiesString(),tt,mt,true,transMeta);
  String cop=nd.open();
  if (!Const.isEmpty(cop)) {
    int copies=Const.toInt(transMeta.environmentSubstitute(cop),-1);
    if (copies > 1 && !multipleOK) {
      cop="1";
      MessageBox mb=new MessageBox(shell,SWT.YES | SWT.ICON_WARNING);
      mb.setMessage(BaseMessages.getString(PKG,"TransGraph.Dialog.MultipleCopiesAreNotAllowedHere.Message"));
      mb.setText(BaseMessages.getString(PKG,"TransGraph.Dialog.MultipleCopiesAreNotAllowedHere.Title"));
      mb.open();
    }
    getCurrentStep().setCopiesString(cop);
    spoon.refreshGraph();
  }
}
