{
  try {
    TransMeta mappingMeta=null;
    if (this.currentStep.getStepMetaInterface() instanceof MappingMeta) {
      MappingMeta meta=(MappingMeta)this.currentStep.getStepMetaInterface();
      mappingMeta=MappingMeta.loadMappingMeta(meta,spoon.rep,transMeta);
    }
    if (this.currentStep.getStepMetaInterface() instanceof SingleThreaderMeta) {
      SingleThreaderMeta meta=(SingleThreaderMeta)this.currentStep.getStepMetaInterface();
      mappingMeta=SingleThreaderMeta.loadSingleThreadedTransMeta(meta,spoon.rep,transMeta);
    }
    if (this.currentStep.getStepMetaInterface() instanceof MetaInjectMeta) {
      MetaInjectMeta meta=(MetaInjectMeta)this.currentStep.getStepMetaInterface();
      mappingMeta=MetaInjectMeta.loadTransformationMeta(meta,spoon.rep,transMeta);
    }
    if (mappingMeta != null) {
      mappingMeta.clearChanged();
      spoon.addTransGraph(mappingMeta);
      TransGraph subTransGraph=spoon.getActiveTransGraph();
      attachActiveTrans(subTransGraph,this.currentStep);
    }
  }
 catch (  Exception e) {
    new ErrorDialog(shell,BaseMessages.getString(PKG,"TransGraph.Exception.UnableToLoadMapping.Title"),BaseMessages.getString(PKG,"TransGraph.Exception.UnableToLoadMapping.Message"),e);
  }
}
