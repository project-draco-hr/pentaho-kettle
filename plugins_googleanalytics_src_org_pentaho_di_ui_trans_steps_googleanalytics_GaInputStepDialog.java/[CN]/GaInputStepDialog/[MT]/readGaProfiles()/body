{
  try {
    createServiceApi(input);
    Analytics analytics=getAnalytics();
    if (analytics == null) {
      throw new IOException();
    }
    Analytics.Management.Profiles.List profiles=analytics.management().profiles().list("~all","~all");
    Profiles profileList=profiles.execute();
    profileTableIds.clear();
    List<String> profileNames=new ArrayList<String>();
    for (    Profile profile : profileList.getItems()) {
      String tableId="ga:" + profile.getId();
      String profileName=tableId + " - profile: " + profile.getName();
      profileNames.add(profileName);
      profileTableIds.put(profileName,tableId);
    }
    wGaProfile.setItems(profileNames.toArray(new String[0]));
    if (profileNames.size() > 0) {
      wGaProfile.select(0);
    }
  }
 catch (  Exception e) {
    logError(BaseMessages.getString(PKG,"GoogleAnalyticsDialog.AuthenticationFailure.DialogMessage"),e);
    MessageBox mb=new MessageBox(shell,SWT.OK | SWT.ICON_ERROR);
    mb.setText(BaseMessages.getString(PKG,"GoogleAnalyticsDialog.AuthenticationFailure.DialogTitle"));
    mb.setMessage(BaseMessages.getString(PKG,"GoogleAnalyticsDialog.AuthenticationFailure.DialogMessage"));
    mb.open();
  }
}
