{
  if (!running) {
    try {
      this.lastTransDebugMeta=transDebugMeta;
      log.setLogLevel(executionConfiguration.getLogLevel());
      log.logDetailed(toString(),Messages.getString("SpoonLog.Log.DoPreview"));
      String[] args=null;
      Map<String,String> arguments=executionConfiguration.getArguments();
      if (arguments != null) {
        args=convertArguments(arguments);
      }
      setVariables(executionConfiguration);
      trans=new Trans(transMeta);
      trans.setSafeModeEnabled(executionConfiguration.isSafeModeEnabled());
      trans.prepareExecution(args);
      transDebugMeta.addRowListenersToTransformation(trans);
      transDebugMeta.addBreakPointListers(new BreakPointListener(){
        public void breakPointHit(        TransDebugMeta transDebugMeta,        StepDebugMeta stepDebugMeta,        RowMetaInterface rowBufferMeta,        List<Object[]> rowBuffer){
          showPreview(transDebugMeta,stepDebugMeta,rowBufferMeta,rowBuffer);
        }
      }
);
      trans.startThreads();
      readLog();
      running=!running;
      debug=true;
      wStart.setEnabled(false);
      wPause.setEnabled(true);
      wStop.setEnabled(true);
    }
 catch (    Exception e) {
      new ErrorDialog(shell,Messages.getString("SpoonLog.Dialog.UnexpectedErrorDuringPreview.Title"),Messages.getString("SpoonLog.Dialog.UnexpectedErrorDuringPreview.Message"),e);
    }
  }
 else {
    MessageBox m=new MessageBox(shell,SWT.OK | SWT.ICON_WARNING);
    m.setText(Messages.getString("SpoonLog.Dialog.DoNoPreviewWhileRunning.Title"));
    m.setMessage(Messages.getString("SpoonLog.Dialog.DoNoPreviewWhileRunning.Message"));
    m.open();
  }
}
