{
  List<String> children=new ArrayList<String>();
  List<KettleVariables> values;
synchronized (map) {
    values=new ArrayList<KettleVariables>(map.values());
  }
  for (int i=0; i < values.size(); i++) {
    KettleVariables kv=(KettleVariables)values.get(i);
    if ((kv.getParentThread() == null && parentThread == null) || (kv.getParentThread() != null && parentThread != null && kv.getParentThread().equals(parentThread))) {
      if (kv.getLocalThread().equals(parentThread)) {
        System.out.println("---> !!!! This should not happen! Thread [" + parentThread + "] is linked to itself!");
      }
 else {
        children.add(kv.getLocalThread());
      }
    }
  }
  return children;
}
