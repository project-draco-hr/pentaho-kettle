{
  XulPromptBox prompt=promptForName(null);
  prompt.addDialogCallback(new XulDialogCallback<String>(){
    public void onClose(    XulComponent component,    Status status,    String value){
      newName=value;
    }
    public void onError(    XulComponent component,    Throwable err){
      System.out.println(err.getMessage());
    }
  }
);
  prompt.open();
  if (newName != null) {
    Collection<UIRepositoryDirectory> directory=folderTree.getSelectedItems();
    UIRepositoryDirectory selectedFolder=directory.iterator().next();
    if (selectedFolder == null) {
      selectedFolder=repositoryDirectory;
    }
    UIRepositoryDirectory newDirectory=selectedFolder.createFolder(newName);
    directoryBinding.fireSourceChanged();
    System.out.println(newDirectory.getName() + ", " + newDirectory.getObjectId().getId());
  }
  newName=null;
}
