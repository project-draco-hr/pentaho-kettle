{
  if (event.getDropParent() != null) {
    if (event.getDataTransfer().getData().size() == 1) {
      Object o=event.getDataTransfer().getData().get(0);
      if (o instanceof UIRepositoryDirectory && event.getDropParent() instanceof UIRepositoryDirectory) {
        UIRepositoryDirectory d=(UIRepositoryDirectory)o;
        RepositoryDirectory sourceDirectory=d.getDirectory();
        RepositoryDirectory targetDirectory=(RepositoryDirectory)((UIRepositoryDirectory)event.getDropParent()).getDirectory();
        try {
          d.getRepository().renameRepositoryDirectory(sourceDirectory.getObjectId(),targetDirectory,null);
          event.setAccepted(true);
        }
 catch (        Exception e) {
          event.setAccepted(false);
        }
      }
 else       if (o instanceof UIJob && event.getDropParent() instanceof UIRepositoryDirectory) {
        UIJob job=(UIJob)o;
        RepositoryDirectory targetDirectory=(RepositoryDirectory)((UIRepositoryDirectory)event.getDropParent()).getDirectory();
        try {
          job.getRepository().renameJob(job.getObjectId(),targetDirectory,null);
        }
 catch (        KettleException e) {
        }
        event.setAccepted(false);
      }
 else       if (o instanceof UITransformation && event.getDropParent() instanceof UIRepositoryDirectory) {
        UITransformation trans=(UITransformation)o;
        RepositoryDirectory targetDirectory=(RepositoryDirectory)((UIRepositoryDirectory)event.getDropParent()).getDirectory();
        try {
          trans.getRepository().renameTransformation(trans.getObjectId(),targetDirectory,null);
        }
 catch (        KettleException e) {
        }
        event.setAccepted(false);
      }
 else {
        event.setAccepted(false);
      }
    }
  }
 else {
    event.setAccepted(false);
  }
}
