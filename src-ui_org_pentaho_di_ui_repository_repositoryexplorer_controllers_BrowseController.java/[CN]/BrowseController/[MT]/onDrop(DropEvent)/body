{
  if (event.getDropParent() != null) {
    if (event.getDataTransfer().getData().size() == 1) {
      Object o=event.getDataTransfer().getData().get(0);
      if (o instanceof UIRepositoryDirectory && event.getDropParent() instanceof UIRepositoryDirectory) {
        UIRepositoryDirectory d=(UIRepositoryDirectory)o;
        RepositoryDirectory sourceDirectory=d.getDirectory();
        RepositoryDirectory targetDirectory=(RepositoryDirectory)((UIRepositoryDirectory)event.getDropParent()).getDirectory();
        try {
          d.getRepository().renameRepositoryDirectory(sourceDirectory.getObjectId(),targetDirectory,null);
          event.setAccepted(true);
        }
 catch (        Exception e) {
          event.setAccepted(false);
        }
      }
    }
  }
 else {
    event.setAccepted(false);
  }
}
