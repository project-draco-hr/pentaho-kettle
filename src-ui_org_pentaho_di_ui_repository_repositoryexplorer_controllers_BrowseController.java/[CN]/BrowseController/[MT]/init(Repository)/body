{
  try {
    this.repository=repository;
    mainController=(MainController)this.getXulDomContainer().getEventHandler("mainController");
    this.repositoryDirectory=new UIRepositoryDirectory(repository.loadRepositoryDirectoryTree(),repository);
    dirMap=new HashMap<ObjectId,UIRepositoryDirectory>();
    populateDirMap(repositoryDirectory);
    bf=new DefaultBindingFactory();
    bf.setDocument(this.getXulDomContainer().getDocumentRoot());
    createBindings();
  }
 catch (  Exception e) {
    throw new ControllerInitializationException(e);
  }
}
