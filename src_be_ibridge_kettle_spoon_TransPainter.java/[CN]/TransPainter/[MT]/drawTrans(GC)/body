{
  if (props.isAntiAliasingEnabled())   gc.setAntialias(SWT.ON);
  shadowsize=props.getShadowSize();
  Point max=transMeta.getMaximum();
  Point thumb=getThumb(area,max);
  offset=getOffset(thumb,area);
  if (hori != null && vert != null) {
    hori.setThumb(thumb.x);
    vert.setThumb(thumb.y);
  }
  gc.setFont(noteFont);
  for (int i=0; i < transMeta.nrNotes(); i++) {
    NotePadMeta ni=transMeta.getNote(i);
    drawNote(gc,ni);
  }
  gc.setFont(graphFont);
  gc.setBackground(background);
  if (shadowsize > 0) {
    for (int i=0; i < transMeta.nrSteps(); i++) {
      StepMeta stepMeta=transMeta.getStep(i);
      if (stepMeta.isDrawn())       drawStepShadow(gc,stepMeta);
    }
  }
  for (int i=0; i < transMeta.nrTransHops(); i++) {
    TransHopMeta hi=transMeta.getTransHop(i);
    drawHop(gc,hi);
  }
  if (candidate != null) {
    drawHop(gc,candidate,true);
  }
  for (int i=0; i < transMeta.nrSteps(); i++) {
    StepMeta stepMeta=transMeta.getStep(i);
    if (stepMeta.isDrawn())     drawStep(gc,stepMeta);
  }
  if (drop_candidate != null) {
    gc.setLineStyle(SWT.LINE_SOLID);
    gc.setForeground(black);
    Point screen=real2screen(drop_candidate.x,drop_candidate.y);
    gc.drawRectangle(screen.x,screen.y,iconsize,iconsize);
  }
  drawRect(gc,selrect);
}
