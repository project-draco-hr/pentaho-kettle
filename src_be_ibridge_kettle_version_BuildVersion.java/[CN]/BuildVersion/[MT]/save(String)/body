{
  FileWriter fileWriter=null;
  try {
    String filename=BUILD_VERSION_FILE;
    if (baseDirectory != null)     filename=baseDirectory + "/" + BUILD_VERSION_FILE;
    File file=new File(filename);
    fileWriter=new FileWriter(file);
    fileWriter.write(Integer.toString(revision) + " ");
    fileWriter.write(SEPARATOR);
    SimpleDateFormat format=new SimpleDateFormat(BUILD_DATE_FORMAT);
    fileWriter.write(" " + format.format(buildDate));
    fileWriter.write("\n\r");
  }
 catch (  Exception e) {
    throw new RuntimeException("Unable to save revision information to file [" + BUILD_VERSION_FILE + "]",e);
  }
 finally {
    try {
      if (fileWriter != null) {
        fileWriter.close();
      }
    }
 catch (    Exception e) {
      throw new RuntimeException("Unable to close file [" + BUILD_VERSION_FILE + "] after writing",e);
    }
  }
}
