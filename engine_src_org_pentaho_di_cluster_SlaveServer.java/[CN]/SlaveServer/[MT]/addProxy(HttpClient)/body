{
  String hostName;
  String proxyHost;
  String proxyPort;
  String nonProxyHosts;
  lock.readLock().lock();
  try {
    hostName=environmentSubstitute(this.hostname);
    proxyHost=environmentSubstitute(this.proxyHostname);
    proxyPort=environmentSubstitute(this.proxyPort);
    nonProxyHosts=environmentSubstitute(this.nonProxyHosts);
  }
  finally {
    lock.readLock().unlock();
  }
  if (!Const.isEmpty(proxyHost) && !Const.isEmpty(proxyPort)) {
    if (!Const.isEmpty(nonProxyHosts) && !Const.isEmpty(hostName) && hostName.matches(nonProxyHosts)) {
      return;
    }
    client.getHostConfiguration().setProxy(proxyHost,Integer.parseInt(proxyPort));
  }
}
