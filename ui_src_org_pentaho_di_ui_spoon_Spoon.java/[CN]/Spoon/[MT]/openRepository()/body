{
  loginDialog=new RepositoriesDialog(shell,null,new ILoginCallback(){
    public void onSuccess(    Repository repository){
      if (rep != null) {
        rep.disconnect();
        SpoonPluginManager.getInstance().notifyLifecycleListeners(SpoonLifeCycleEvent.REPOSITORY_DISCONNECTED);
      }
      setRepository(repository);
      loadSessionInformation(repository,true);
      refreshTree();
      setShellText();
      SpoonPluginManager.getInstance().notifyLifecycleListeners(SpoonLifeCycleEvent.REPOSITORY_CONNECTED);
    }
    public void onError(    Throwable t){
      closeRepository();
      onLoginError(t);
    }
    public void onCancel(){
    }
  }
);
  loginDialog.show();
}
