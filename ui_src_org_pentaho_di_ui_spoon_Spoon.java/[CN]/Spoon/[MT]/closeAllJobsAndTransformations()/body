{
  if (props.showCloseAllFilesWarning()) {
    MessageDialogWithToggle md=new MessageDialogWithToggle(getShell(),BaseMessages.getString(PKG,"Spoon.Dialog.PromptToCloseAll.Title"),null,BaseMessages.getString(PKG,"Spoon.Dialog.PromptToCloseAll.Message"),MessageDialog.QUESTION,new String[]{BaseMessages.getString(PKG,"Spoon.Message.Warning.Yes"),BaseMessages.getString(PKG,"Spoon.Message.Warning.No"),BaseMessages.getString(PKG,"Spoon.Message.Warning.Cancel")},1,BaseMessages.getString(PKG,"Spoon.Dialog.PromptToCloseAll.DontAskAgain.Label"),!props.showCloseAllFilesWarning());
    MessageDialogWithToggle.setDefaultImage(GUIResource.getInstance().getImageSpoon());
    final int answer=md.open();
    if ((answer & 0xFF) == 0) {
      Spoon.getInstance().closeAllFiles();
    }
    props.showSetCloseAllFilesWarning(!md.getToggleState());
    props.saveProps();
  }
 else {
    Spoon.getInstance().closeAllFiles();
  }
}
