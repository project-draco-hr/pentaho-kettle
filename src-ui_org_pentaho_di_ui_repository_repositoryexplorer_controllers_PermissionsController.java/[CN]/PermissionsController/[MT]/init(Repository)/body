{
  try {
    browseController=(BrowseController)this.getXulDomContainer().getEventHandler("browseController");
    if (rep != null && rep.hasService(RepositorySecurityProvider.class)) {
      service=(RepositorySecurityProvider)rep.getService(RepositorySecurityProvider.class);
    }
 else {
      throw new ControllerInitializationException(BaseMessages.getString(RepositoryExplorer.class,"PermissionsController.ERROR_0001_UNABLE_TO_INITIAL_REPOSITORY_SERVICE",RepositorySecurityManager.class));
    }
    confirmBox=(XulConfirmBox)document.createElement("confirmbox");
    confirmBox.setTitle(messages.getString("PermissionsController.RemoveAclWarning"));
    confirmBox.setMessage(messages.getString("PermissionsController.RemoveAclWarningText"));
    confirmBox.setAcceptLabel(messages.getString("Dialog.Ok"));
    confirmBox.setCancelLabel(messages.getString("Dialog.Cancel"));
    confirmBox.addDialogCallback(new XulDialogCallback(){
      public void onClose(      XulComponent sender,      Status returnCode,      Object retVal){
        if (returnCode == Status.ACCEPT) {
          viewAclsModel.removeSelectedAcls();
        }
      }
      public void onError(      XulComponent sender,      Throwable t){
      }
    }
);
    messageBox=(XulMessageBox)document.createElement("messagebox");
    viewAclsModel=new UIRepositoryObjectAcls();
    manageAclsModel=new UIRepositoryObjectAclModel(viewAclsModel);
    browseController.addContextChangeListener(this);
    bf=new DefaultBindingFactory();
    bf.setDocument(this.getXulDomContainer().getDocumentRoot());
    createBindings();
  }
 catch (  Exception e) {
    throw new ControllerInitializationException(e);
  }
}
