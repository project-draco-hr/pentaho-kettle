{
  data.document=document;
  if (meta.isNamespaceAware())   prepareNSMap(data.document.getRootElement());
  if (log.isDebug())   logDebug(Messages.getString("GetXMLData.Log.StreamingMode.ApplyXPath"));
  if (!applyXPath()) {
    throw new KettleException(Messages.getString("GetXMLData.Log.UnableApplyXPath"));
  }
  if (log.isDebug())   logDebug(Messages.getString("GetXMLData.Log.StreamingMode.ProcessingRows"));
  boolean cont=true;
  while (data.nodenr < data.nodesize && cont && !isStopped()) {
    Object[] r=getXMLRowPutRowWithErrorhandling();
    if (data.errorInRowButContinue)     continue;
    cont=putRowOut(r);
  }
  if (log.isDebug())   logDebug(Messages.getString("GetXMLData.Log.StreamingMode.FreeMemory"));
  data.an.clear();
  data.nodesize=data.an.size();
  data.nodenr=0;
}
