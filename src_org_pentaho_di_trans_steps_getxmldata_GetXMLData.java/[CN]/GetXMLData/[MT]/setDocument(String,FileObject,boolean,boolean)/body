{
  try {
    SAXReader reader=new SAXReader();
    if (meta.isValidating()) {
      reader.setValidation(true);
      reader.setFeature("http://apache.org/xml/features/validation/schema",true);
    }
    if (meta.isIgnoreComments())     reader.setIgnoreComments(true);
    if (IsInXMLField) {
      data.document=reader.read(new StringReader(StringXML));
    }
 else     if (readurl) {
      data.document=reader.read(new URL(StringXML));
    }
 else {
      String encoding="UTF-8";
      if (!Const.isEmpty(meta.getEncoding()))       encoding=meta.getEncoding();
      data.document=reader.read(new FileInputStream(KettleVFS.getFilename(file)),encoding);
    }
    if (meta.isNamespaceAware())     prepareNSMap(data.document.getRootElement());
  }
 catch (  Exception e) {
    throw new KettleException(e);
  }
  return true;
}
