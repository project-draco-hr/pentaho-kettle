{
  meta=(CsvInputMeta)smi;
  data=(CsvInputData)sdi;
  if (super.init(smi,sdi)) {
    data.preferredBufferSize=Integer.parseInt(environmentSubstitute(meta.getBufferSize()));
    if (getTransMeta().findNrPrevSteps(getStepMeta()) == 0) {
      String filename=environmentSubstitute(meta.getFilename());
      if (Const.isEmpty(filename)) {
        logError(Messages.getString("CsvInput.MissingFilename.Message"));
        return false;
      }
      data.filenames=new String[]{filename};
    }
 else {
      data.filenames=null;
      data.filenr=0;
    }
    data.delimiter=environmentSubstitute(meta.getDelimiter()).getBytes();
    if (Const.isEmpty(meta.getEnclosure())) {
      data.enclosure=null;
    }
 else {
      data.enclosure=environmentSubstitute(meta.getEnclosure()).getBytes();
    }
    return true;
  }
  return false;
}
