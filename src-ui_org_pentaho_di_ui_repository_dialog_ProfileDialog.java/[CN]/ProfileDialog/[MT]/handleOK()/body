{
  if (wName.getText().length() > 0) {
    profileName=wName.getText();
    profile.setName(wName.getText());
    profile.setDescription(wDesc.getText());
    profile.removeAllPermissions();
    String[] selection=wPermission.getSelection();
    for (    String permissionDescription : selection) {
      Permission permission=Permission.getPermissionWithDescription(permissionDescription);
      profile.addPermission(permission);
    }
    dispose();
  }
 else {
    MessageBox mb=new MessageBox(shell,SWT.OK | SWT.ICON_ERROR);
    mb.setMessage(BaseMessages.getString(PKG,"ProfileDialog.Dialog.UnexpectedError.Message"));
    mb.setText(BaseMessages.getString(PKG,"ProfileDialog.Dialog.UnexpectedError.Title"));
    mb.open();
  }
}
