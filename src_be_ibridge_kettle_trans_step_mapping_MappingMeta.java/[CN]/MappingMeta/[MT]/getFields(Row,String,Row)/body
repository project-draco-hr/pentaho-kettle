{
  if (mappingTransMeta != null) {
    StepMeta stepMeta=mappingTransMeta.getMappingOutputStep();
    stepMeta.getStepMetaInterface().getFields(r,name,info);
    for (int i=0; i < outputMapping.length; i++) {
      Value v=r.searchValue(outputMapping[i]);
      if (v != null) {
        v.setName(outputField[i]);
        v.setOrigin(name);
      }
 else {
        throw new KettleStepException("Mapping output field specified couldn't be found: " + outputMapping[i]);
      }
    }
    return r;
  }
 else {
    throw new KettleStepException("Unable to get fields from Mapping: no mapping is selected.");
  }
}
