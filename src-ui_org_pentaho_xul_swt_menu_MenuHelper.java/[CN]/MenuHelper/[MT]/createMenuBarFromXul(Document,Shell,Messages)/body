{
  NodeList list=doc.getElementsByTagName("menubar");
  if (list != null && list.getLength() > 0) {
    MenuBar menuBar=new MenuBar(shell);
    Node menubarNode=list.item(0);
    Node menuNode=XMLHandler.getSubNode(menubarNode,"menu");
    while (menuNode != null) {
      if ("menu".equals(menuNode.getNodeName())) {
        String id=XMLHandler.getTagAttribute(menuNode,"value");
        String name=XMLHandler.getTagAttribute(menuNode,"label");
        if (name == null) {
          name=getMenuLabel(menuNode);
        }
        name=localizeXulText(name,xulMessages);
        String accessKey=XMLHandler.getTagAttribute(menuNode,"accesskey");
        Menu menu=new Menu(menuBar,name,id,accessKey);
        createMenuFromXul(menu,XMLHandler.getSubNode(menuNode,"menupopup"),xulMessages);
      }
      menuNode=menuNode.getNextSibling();
    }
    return menuBar;
  }
  return null;
}
