{
  HashMap<String,String> existingOptions=new HashMap<String,String>();
  existingOptions.put("type1.extra","extraValue");
  existingOptions.put("type1.existing","existingValue");
  existingOptions.put("type2.extra","extraValue2");
  HashMap<String,String> newOptions=new HashMap<String,String>();
  newOptions.put("type1.new","newValue");
  newOptions.put("type1.existing","existingDefault");
  DatabasePluginType.getInstance().searchPlugins();
  DatabaseMeta meta=new DatabaseMeta();
  DatabaseInterface type=mock(DatabaseInterface.class);
  meta.setDatabaseInterface(type);
  when(type.getExtraOptions()).thenReturn(existingOptions);
  when(type.getDefaultOptions()).thenReturn(newOptions);
  meta.applyDefaultOptions(type);
  verify(type).addExtraOption("type1","new","newValue");
  verify(type,never()).addExtraOption("type1","existing","existingDefault");
}
