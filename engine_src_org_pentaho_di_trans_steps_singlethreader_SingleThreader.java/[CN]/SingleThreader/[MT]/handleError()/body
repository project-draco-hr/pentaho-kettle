{
  if (getStepMeta().isDoingErrorHandling()) {
    int lastLogLine=KettleLogStore.getLastBufferLineNr();
    StringBuffer logText=KettleLogStore.getAppender().getBuffer(getData().mappingTrans.getLogChannelId(),false,getData().lastLogLine);
    getData().lastLogLine=lastLogLine;
    for (    Object[] row : getData().errorBuffer) {
      putError(getInputRowMeta(),row,1L,logText.toString(),null,"STR-001");
    }
    getData().executor.clearError();
    return true;
  }
 else {
    setErrors(1);
    stopAll();
    logError(BaseMessages.getString(PKG,"SingleThreader.Log.ErrorOccurredInSubTransformation"));
    return false;
  }
}
