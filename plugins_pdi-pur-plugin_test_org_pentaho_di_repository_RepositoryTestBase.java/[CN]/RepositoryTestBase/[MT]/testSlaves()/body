{
  SlaveServer slave=createSlaveServer("");
  repository.save(slave,VERSION_COMMENT_V1,null);
  assertNotNull(slave.getObjectId());
  ObjectRevision version=slave.getObjectRevision();
  assertNotNull(version);
  assertTrue(hasVersionWithComment(slave,VERSION_COMMENT_V1));
  assertTrue(repository.exists(EXP_SLAVE_NAME,null,RepositoryObjectType.SLAVE_SERVER));
  SlaveServer fetchedSlave=repository.loadSlaveServer(slave.getObjectId(),null);
  assertEquals(EXP_SLAVE_NAME,fetchedSlave.getName());
  assertEquals(EXP_SLAVE_HOSTNAME,fetchedSlave.getHostname());
  assertEquals(EXP_SLAVE_PORT,fetchedSlave.getPort());
  assertEquals(EXP_SLAVE_USERNAME,fetchedSlave.getUsername());
  assertEquals(EXP_SLAVE_PASSWORD,fetchedSlave.getPassword());
  assertEquals(EXP_SLAVE_PROXY_HOSTNAME,fetchedSlave.getProxyHostname());
  assertEquals(EXP_SLAVE_PROXY_PORT,fetchedSlave.getProxyPort());
  assertEquals(EXP_SLAVE_NON_PROXY_HOSTS,fetchedSlave.getNonProxyHosts());
  assertEquals(EXP_SLAVE_MASTER,fetchedSlave.isMaster());
  slave.setHostname(EXP_SLAVE_HOSTNAME_V2);
  repository.save(slave,VERSION_COMMENT_V2,null);
  assertEquals(VERSION_COMMENT_V2,slave.getObjectRevision().getComment());
  fetchedSlave=repository.loadSlaveServer(slave.getObjectId(),null);
  assertEquals(EXP_SLAVE_HOSTNAME_V2,fetchedSlave.getHostname());
  fetchedSlave=repository.loadSlaveServer(slave.getObjectId(),VERSION_LABEL_V1);
  assertEquals(EXP_SLAVE_HOSTNAME,fetchedSlave.getHostname());
  assertEquals(slave.getObjectId(),repository.getSlaveID(EXP_SLAVE_NAME));
  assertEquals(1,repository.getSlaveIDs(false).length);
  assertEquals(1,repository.getSlaveIDs(true).length);
  assertEquals(slave.getObjectId(),repository.getSlaveIDs(false)[0]);
  assertEquals(1,repository.getSlaveNames(false).length);
  assertEquals(1,repository.getSlaveNames(true).length);
  assertEquals(EXP_SLAVE_NAME,repository.getSlaveNames(false)[0]);
  assertEquals(1,repository.getSlaveServers().size());
  assertEquals(EXP_SLAVE_NAME,repository.getSlaveServers().get(0).getName());
  repository.deleteSlave(slave.getObjectId());
  assertFalse(repository.exists(EXP_SLAVE_NAME,null,RepositoryObjectType.SLAVE_SERVER));
  assertEquals(0,repository.getSlaveIDs(false).length);
  assertEquals(0,repository.getSlaveIDs(true).length);
  assertEquals(0,repository.getSlaveNames(false).length);
  assertEquals(0,repository.getSlaveNames(true).length);
  assertEquals(0,repository.getSlaveServers().size());
}
