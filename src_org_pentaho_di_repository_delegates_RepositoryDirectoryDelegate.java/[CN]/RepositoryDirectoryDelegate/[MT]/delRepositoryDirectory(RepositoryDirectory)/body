{
  try {
    String trans[]=repository.getTransformationNames(dir.getID());
    String jobs[]=repository.getJobNames(dir.getID());
    long[] subDirectories=repository.getSubDirectoryIDs(dir.getID());
    if (trans.length == 0 && jobs.length == 0 && subDirectories.length == 0) {
      repository.directoryDelegate.deleteDirectory(dir.getID());
    }
 else {
      throw new KettleException("This directory is not empty!");
    }
  }
 catch (  Exception e) {
    throw new KettleException("Unexpected error deleting repository directory",e);
  }
}
