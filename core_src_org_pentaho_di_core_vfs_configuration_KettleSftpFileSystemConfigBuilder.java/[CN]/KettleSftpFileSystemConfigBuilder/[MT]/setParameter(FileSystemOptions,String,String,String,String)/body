{
  if (!fullParameterName.startsWith("vfs.sftp")) {
    super.setParameter(opts,name,value,fullParameterName,vfsUrl);
  }
 else {
    try {
      FileNameParser sftpFilenameParser=SftpFileNameParser.getInstance();
      URLFileName file=(URLFileName)sftpFilenameParser.parseUri(null,null,vfsUrl);
      if (!parameterContainsHost(fullParameterName) || fullParameterName.endsWith(file.getHostName())) {
        if (name.equalsIgnoreCase("AuthKeyPassphrase")) {
          setParam(opts,UserInfo.class.getName(),new PentahoUserInfo(value));
        }
 else         if (name.equals("identity")) {
          IdentityInfo[] identities=(IdentityInfo[])this.getParam(opts,IDENTITY_KEY);
          if (identities == null) {
            identities=new IdentityInfo[]{new IdentityInfo(new File(value))};
          }
 else {
            IdentityInfo[] temp=new IdentityInfo[identities.length + 1];
            System.arraycopy(identities,0,temp,0,identities.length);
            identities=temp;
            identities[identities.length - 1]=new IdentityInfo(new File(value));
          }
          setParam(opts,IDENTITY_KEY,identities);
        }
 else {
          super.setParameter(opts,name,value,fullParameterName,vfsUrl);
        }
      }
 else {
        log.logDebug("No host match found for: " + fullParameterName);
      }
    }
 catch (    IOException e) {
      log.logError("Failed to set VFS parameter: [" + fullParameterName + "] "+ value,e);
    }
  }
}
