{
  InputStream inputStream=null;
  InputStreamReader reader=null;
  String retval=null;
  try {
    inputStream=KettleVFS.getInputStream(vfsFilename);
    if (!Const.isEmpty(encoding)) {
      reader=new InputStreamReader(new BufferedInputStream(inputStream),encoding);
    }
 else {
      reader=new InputStreamReader(new BufferedInputStream(inputStream));
    }
    int c;
    StringBuffer stringBuffer=new StringBuffer();
    while ((c=reader.read()) != -1)     stringBuffer.append((char)c);
    retval=stringBuffer.toString();
  }
 catch (  Exception e) {
    throw new KettleException(BaseMessages.getString(PKG,"LoadFileInput.Error.GettingFileContent",vfsFilename,e.toString()));
  }
 finally {
    if (reader != null)     try {
      reader.close();
    }
 catch (    Exception e) {
    }
    ;
    if (inputStream != null)     try {
      inputStream.close();
    }
 catch (    Exception e) {
    }
    ;
  }
  return retval;
}
