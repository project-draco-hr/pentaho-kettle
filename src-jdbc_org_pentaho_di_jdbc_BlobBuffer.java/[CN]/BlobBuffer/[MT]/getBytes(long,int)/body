{
  pos--;
  if (pos < 0) {
    throw new SQLException(BaseMessages.getString(PKG,"error.blobclob.badpos"),"HY090");
  }
  if (pos > this.length) {
    throw new SQLException(BaseMessages.getString(PKG,"error.blobclob.badposlen"),"HY090");
  }
  if (len < 0) {
    throw new SQLException(BaseMessages.getString(PKG,"error.blobclob.badlen"),"HY090");
  }
  if (pos + len > this.length) {
    len=(int)(this.length - pos);
  }
  try {
    byte[] data=new byte[len];
    if (blobFile == null) {
      System.arraycopy(buffer,(int)(pos),data,0,len);
    }
 else {
      InputStream is=new BlobInputStream(pos);
      int bc=is.read(data);
      is.close();
      if (bc != data.length) {
        throw new IOException("Unexpected EOF on BLOB data file bc=" + bc + " data.len="+ data.length);
      }
    }
    return data;
  }
 catch (  IOException e) {
    throw new SQLException(BaseMessages.getString(PKG,"error.generic.ioerror",e.getMessage()),"HY000");
  }
}
