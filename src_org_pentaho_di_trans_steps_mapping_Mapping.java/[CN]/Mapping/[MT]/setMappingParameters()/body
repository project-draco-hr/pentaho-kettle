{
  MappingParameters mappingParameters=meta.getMappingParameters();
  if (mappingParameters != null) {
    if (mappingParameters.isInheritingAllVariables()) {
      data.mappingTransMeta.copyVariablesFrom(getTransMeta());
    }
    for (int i=0; i < mappingParameters.getVariable().length; i++) {
      String name=mappingParameters.getVariable()[i];
      String value=environmentSubstitute(mappingParameters.getInputField()[i]);
      if (!Const.isEmpty(name) && !Const.isEmpty(value)) {
        data.mappingTransMeta.setVariable(name,value);
      }
    }
  }
}
