{
  Pattern p;
  String options="";
  if (meta.caseInsensitive()) {
    options=options + "(?i)";
  }
  if (meta.comment()) {
    options=options + "(?x)";
  }
  if (meta.dotAll()) {
    options=options + "(?s)";
  }
  if (meta.multiLine()) {
    options=options + "(?m)";
  }
  if (meta.unicode()) {
    options=options + "(?u)";
  }
  if (meta.unix()) {
    options=options + "(?d)";
  }
  String regularexpression=meta.getScript();
  if (meta.useVar()) {
    regularexpression=environmentSubstitute(meta.getScript());
  }
  if (log.isDetailed())   logDetailed(Messages.getString("RegexEval.Log.Regexp") + " " + options+ regularexpression);
  if (meta.canoeq()) {
    p=Pattern.compile(options + regularexpression,Pattern.CANON_EQ);
  }
 else {
    p=Pattern.compile(options + regularexpression);
  }
  return p;
}
