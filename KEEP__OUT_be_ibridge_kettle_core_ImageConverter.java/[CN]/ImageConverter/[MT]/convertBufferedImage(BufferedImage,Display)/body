{
  Image img=null;
  int width=awt.getWidth();
  int height=awt.getHeight();
  PixelGrabber grabber=new PixelGrabber(awt,0,0,width,height,true);
  try {
    if (grabber.grabPixels()) {
      DirectColorModel cm=(DirectColorModel)ColorModel.getRGBdefault();
      int[] pixels=(int[])grabber.getPixels();
      PaletteData palette=new PaletteData(cm.getRedMask(),cm.getGreenMask(),cm.getBlueMask());
      ImageData imgdata=new ImageData(width,height,cm.getPixelSize(),palette);
      imgdata.setPixels(0,0,width * height,pixels,0);
      img=new Image(disp,imgdata);
    }
  }
 catch (  InterruptedException e) {
  }
  return img;
}
