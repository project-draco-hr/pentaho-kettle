{
  Hashtable<String,String> env=new Hashtable<String,String>();
  env.put(Context.INITIAL_CONTEXT_FACTORY,"com.sun.jndi.ldap.LdapCtxFactory");
  env.put(Context.PROVIDER_URL,"ldap://" + hostname + ":"+ Const.toInt(port,389));
  env.put(Context.SECURITY_AUTHENTICATION,"simple");
  if (wusingAuthentication.getSelection()) {
    env.put(Context.SECURITY_PRINCIPAL,username);
    env.put(Context.SECURITY_CREDENTIALS,password);
  }
  return new InitialDirContext(env);
}
