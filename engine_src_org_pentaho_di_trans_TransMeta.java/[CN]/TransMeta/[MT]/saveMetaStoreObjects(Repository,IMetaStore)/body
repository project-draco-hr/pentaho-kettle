{
  if (dataService != null && dataService.isDefined()) {
    if (repository != null) {
      dataService.setTransRepositoryPath(getRepositoryDirectory().getPath() + RepositoryDirectory.DIRECTORY_SEPARATOR + getName());
      if (repository.getRepositoryMeta().getRepositoryCapabilities().supportsReferences()) {
        dataService.setTransObjectId(id);
      }
 else {
        dataService.setTransRepositoryPath(directory.getPath() + "/" + getName());
      }
    }
    dataService.setTransFilename(filename);
    DataServiceMetaStoreUtil.createOrUpdateDataServiceElement(metaStore,dataService);
  }
}
