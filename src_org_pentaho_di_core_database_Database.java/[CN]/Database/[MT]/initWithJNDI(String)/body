{
  connection=null;
  try {
    DataSource dataSource=DatasourceHelper.getDataSourceFromJndi(jndiName);
    if (dataSource != null) {
      connection=dataSource.getConnection();
      if (connection == null) {
        throw new KettleDatabaseException("Invalid JNDI connection " + jndiName);
      }
    }
 else {
      throw new KettleDatabaseException("Invalid JNDI connection " + jndiName);
    }
  }
 catch (  Exception e) {
    throw new KettleDatabaseException("Invalid JNDI connection " + jndiName + " : "+ e.getMessage());
  }
}
