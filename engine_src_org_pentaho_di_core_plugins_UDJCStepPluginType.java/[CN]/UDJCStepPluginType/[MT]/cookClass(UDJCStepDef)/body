{
  ClassBodyEvaluator cbe=new ClassBodyEvaluator();
  cbe.setClassName(def.getClassName());
  StringReader sr;
  if (def.isTransformClass()) {
    cbe.setExtendedType(UDJCStepBase.class);
    sr=new StringReader(def.getTransformedSource());
  }
 else {
    sr=new StringReader(def.getSource());
  }
  cbe.setDefaultImports(new String[]{"org.pentaho.di.trans.*","org.pentaho.di.trans.steps.userdefinedjavaclass.*","org.pentaho.di.trans.steps.udjcstep.*","org.pentaho.di.trans.step.*","org.pentaho.di.core.row.*","org.pentaho.di.core.*","org.pentaho.di.core.exception.*"});
  cbe.cook(new Scanner(null,sr));
  return cbe.getClazz();
}
