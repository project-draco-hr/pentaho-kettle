{
  SalesforceUpsert sfInputStep=new SalesforceUpsert(smh.stepMeta,smh.stepDataInterface,0,smh.transMeta,smh.trans);
  SalesforceUpsertMeta meta=generateSalesforceUpsertMeta(new String[]{ACCOUNT_EXT_ID_ACCOUNT_ID_C_ACCOUNT},new Boolean[]{true});
  SalesforceUpsertData data=generateSalesforceUpsertData();
  sfInputStep.init(meta,data);
  RowMeta rowMeta=new RowMeta();
  ValueMetaBase valueMeta=new ValueMetaString("AccExtId");
  rowMeta.addValueMeta(valueMeta);
  smh.initStepDataInterface.inputRowMeta=rowMeta;
  sfInputStep.writeToSalesForce(new Object[]{"tkas88"});
  assertNull(data.sfBuffer[0].getFieldsToNull());
  assertEquals(1,data.sfBuffer[0].get_any().length);
  assertEquals(getExpectedMessageElement(ACCOUNT_EXT_ID_ACCOUNT_ID_C_ACCOUNT,"tkas88",true),data.sfBuffer[0].get_any()[0]);
}
