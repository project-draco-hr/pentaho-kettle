{
  try {
    StringBuilder xml=new StringBuilder();
    xml.append(XMLHandler.openTag("pars"));
    for (    String parameter : job.listParameters()) {
      String value=job.getParameterValue(parameter);
      xml.append(XMLHandler.openTag("par"));
      xml.append(XMLHandler.addTagValue("name",parameter,false));
      xml.append(XMLHandler.addTagValue("value",value,false));
      xml.append(XMLHandler.closeTag("par"));
    }
    xml.append(XMLHandler.closeTag("pars"));
    return xml.toString();
  }
 catch (  Exception e) {
    throw new RuntimeException("Unexpected error encoding parameters to XML",e);
  }
}
