{
  Shell parent=getParent();
  Display display=parent.getDisplay();
  shell=new Shell(parent,SWT.DIALOG_TRIM | SWT.RESIZE | SWT.MAX| SWT.MIN);
  props.setLook(shell);
  FormLayout formLayout=new FormLayout();
  formLayout.marginWidth=Const.FORM_MARGIN;
  formLayout.marginHeight=Const.FORM_MARGIN;
  shell.setLayout(formLayout);
  shell.setText("Simple SQL Editor");
  int margin=Const.MARGIN;
  wlScript=new Label(shell,SWT.NONE);
  wlScript.setText("SQL statements, separated by ; ");
  props.setLook(wlScript);
  fdlScript=new FormData();
  fdlScript.left=new FormAttachment(0,0);
  fdlScript.top=new FormAttachment(0,0);
  wlScript.setLayoutData(fdlScript);
  wScript=new Text(shell,SWT.MULTI | SWT.LEFT | SWT.BORDER| SWT.H_SCROLL| SWT.V_SCROLL);
  wScript.setText("");
  props.setLook(wScript,Props.WIDGET_STYLE_FIXED);
  fdScript=new FormData();
  fdScript.left=new FormAttachment(0,0);
  fdScript.top=new FormAttachment(wlScript,margin);
  fdScript.right=new FormAttachment(100,-5);
  fdScript.bottom=new FormAttachment(100,-70);
  wScript.setLayoutData(fdScript);
  wlPosition=new Label(shell,SWT.NONE);
  wlPosition.setText("Linenr: 0        ");
  props.setLook(wlPosition);
  fdlPosition=new FormData();
  fdlPosition.left=new FormAttachment(0,0);
  fdlPosition.top=new FormAttachment(wScript,margin);
  wlPosition.setLayoutData(fdlPosition);
  wExec=new Button(shell,SWT.PUSH);
  wExec.setText(" &Execute ");
  wClear=new Button(shell,SWT.PUSH);
  wClear.setText(" &Clear cache ");
  wCancel=new Button(shell,SWT.PUSH);
  wCancel.setText(" &Close ");
  wClear.setToolTipText("Use this button if you find that the results above do not correspond with the actual situation in the database.\nThe database cache becomes invalid if you use other tools besides Kettle to create or alter tables in the database.");
  BaseStepDialog.positionBottomButtons(shell,new Button[]{wExec,wClear,wCancel},margin,null);
  lsCancel=new Listener(){
    public void handleEvent(    Event e){
      cancel();
    }
  }
;
  lsClear=new Listener(){
    public void handleEvent(    Event e){
      clearCache();
    }
  }
;
  lsExec=new Listener(){
    public void handleEvent(    Event e){
      try {
        exec();
      }
 catch (      Exception ge) {
      }
    }
  }
;
  wCancel.addListener(SWT.Selection,lsCancel);
  wClear.addListener(SWT.Selection,lsClear);
  wExec.addListener(SWT.Selection,lsExec);
  shell.addShellListener(new ShellAdapter(){
    public void shellClosed(    ShellEvent e){
      cancel();
    }
  }
);
  wScript.addKeyListener(new KeyAdapter(){
    public void keyReleased(    KeyEvent e){
      int linenr=wScript.getCaretLineNumber() + 1;
      wlPosition.setText("Linenr: " + linenr + "   ");
    }
  }
);
  BaseStepDialog.setSize(shell);
  getData();
  shell.open();
  while (!shell.isDisposed()) {
    if (!display.readAndDispatch())     display.sleep();
  }
}
