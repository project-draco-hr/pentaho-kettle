{
  boolean retval=false;
  boolean filexists=false;
  try {
    String shortfilename=getDestinationFilename(sourcefile.getName().getBaseName());
    String destinationFilename=destinationFolder + Const.FILE_SEPARATOR + shortfilename;
    FileObject destinationfile=KettleVFS.getFileObject(destinationFilename);
    filexists=destinationfile.exists();
    if (filexists) {
      if (log.isDetailed())       log.logDetailed(toString(),Messages.getString("JobEntryCopyMoveResultFilenames.Log.FileExists",destinationFilename));
    }
    if ((!filexists) || (filexists && isOverwriteFile())) {
      if (getAction().equals("copy")) {
        FileUtil.copyContent(sourcefile,destinationfile);
        if (log.isDetailed())         log.logDetailed(toString(),Messages.getString("JobEntryCopyMoveResultFilenames.log.CopiedFile",sourcefile.toString(),destinationFolder));
      }
 else {
        sourcefile.moveTo(destinationfile);
        if (log.isDetailed())         log.logDetailed(toString(),Messages.getString("JobEntryCopyMoveResultFilenames.log.MovedFile",sourcefile.toString(),destinationFolder));
      }
      if (isRemovedSourceFilename()) {
        result.getResultFiles().remove(sourcefile.toString());
        if (log.isDetailed())         log.logDetailed(toString(),Messages.getString("JobEntryCopyMoveResultFilenames.RemovedFileFromResult",sourcefile.toString()));
      }
      if (isAddDestinationFilename()) {
        ResultFile resultFile=new ResultFile(ResultFile.FILE_TYPE_GENERAL,KettleVFS.getFileObject(destinationfile.toString()),parentJob.getName(),toString());
        result.getResultFiles().put(resultFile.getFile().toString(),resultFile);
        if (log.isDetailed())         log.logDetailed(toString(),Messages.getString("JobEntryCopyMoveResultFilenames.AddedFileToResult",destinationfile.toString()));
      }
    }
    retval=true;
  }
 catch (  Exception e) {
    log.logError(toString(),Messages.getString("JobEntryCopyMoveResultFilenames.Log.ErrorProcessing",e.toString()));
  }
  return retval;
}
