{
  final Label wlConnection;
  final Button wbnConnection;
  final Button wbeConnection;
  final CCombo wConnection;
  final FormData fdlConnection, fdbConnection, fdeConnection, fdConnection;
  wConnection=new CCombo(parent,SWT.BORDER | SWT.READ_ONLY);
  props.setLook(wConnection);
  addDatabases(wConnection);
  wlConnection=new Label(parent,SWT.RIGHT);
  wlConnection.setText(Messages.getString("BaseStepDialog.Connection.Label"));
  props.setLook(wlConnection);
  fdlConnection=new FormData();
  fdlConnection.left=new FormAttachment(0,0);
  fdlConnection.right=new FormAttachment(middle,-margin);
  if (previous != null)   fdlConnection.top=new FormAttachment(previous,margin);
 else   fdlConnection.top=new FormAttachment(0,0);
  wlConnection.setLayoutData(fdlConnection);
  wbnConnection=new Button(parent,SWT.PUSH);
  wbnConnection.setText(Messages.getString("BaseStepDialog.NewConnectionButton.Label"));
  wbnConnection.addSelectionListener(new SelectionAdapter(){
    public void widgetSelected(    SelectionEvent e){
      DatabaseMeta ci=new DatabaseMeta();
      DatabaseDialog cid=new DatabaseDialog(shell,SWT.NONE,log,ci,props);
      if (cid.open() != null) {
        transMeta.addDatabase(ci);
        wConnection.removeAll();
        addDatabases(wConnection);
        selectDatabase(wConnection,ci.getName());
      }
    }
  }
);
  fdbConnection=new FormData();
  fdbConnection.right=new FormAttachment(100,0);
  if (previous != null)   fdbConnection.top=new FormAttachment(previous,margin);
 else   fdbConnection.top=new FormAttachment(0,0);
  wbnConnection.setLayoutData(fdbConnection);
  wbeConnection=new Button(parent,SWT.PUSH);
  wbeConnection.setText(Messages.getString("BaseStepDialog.EditConnectionButton.Label"));
  wbeConnection.addSelectionListener(new SelectionAdapter(){
    public void widgetSelected(    SelectionEvent e){
      DatabaseMeta ci=transMeta.findDatabase(wConnection.getText());
      if (ci != null) {
        DatabaseDialog cid=new DatabaseDialog(shell,SWT.NONE,log,ci,props);
        if (cid.open() != null) {
          wConnection.removeAll();
          addDatabases(wConnection);
          selectDatabase(wConnection,ci.getName());
        }
      }
    }
  }
);
  fdeConnection=new FormData();
  fdeConnection.right=new FormAttachment(wbnConnection,-margin);
  if (previous != null)   fdeConnection.top=new FormAttachment(previous,margin);
 else   fdeConnection.top=new FormAttachment(0,0);
  wbeConnection.setLayoutData(fdeConnection);
  fdConnection=new FormData();
  fdConnection.left=new FormAttachment(middle,0);
  if (previous != null)   fdConnection.top=new FormAttachment(previous,margin);
 else   fdConnection.top=new FormAttachment(0,0);
  fdConnection.right=new FormAttachment(wbeConnection,-margin);
  wConnection.setLayoutData(fdConnection);
  return wConnection;
}
