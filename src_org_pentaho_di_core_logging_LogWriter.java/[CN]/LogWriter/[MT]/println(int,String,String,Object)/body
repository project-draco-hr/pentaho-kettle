{
  if (level == LOG_LEVEL_NOTHING)   return;
  if (level < lvl)   return;
  String subject=subj;
  if (subject == null)   subject="Kettle";
  msg=(args.length <= 0) ? msg : MessageFormat.format(msg,args);
  if (filter != null && filter.length() > 0) {
    if (subject.indexOf(filter) < 0 && msg.indexOf(filter) < 0) {
      return;
    }
  }
  Logger logger=Logger.getLogger(subject);
  Log4jMessage message=new Log4jMessage(msg,subject,lvl);
switch (lvl) {
case LOG_LEVEL_ERROR:
    logger.error(message);
  break;
case LOG_LEVEL_ROWLEVEL:
case LOG_LEVEL_DEBUG:
logger.debug(message);
break;
default :
logger.info(message);
break;
}
}
