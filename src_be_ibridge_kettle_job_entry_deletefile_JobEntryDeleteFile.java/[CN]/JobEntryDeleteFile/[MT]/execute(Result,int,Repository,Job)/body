{
  LogWriter log=LogWriter.getInstance();
  Result result=new Result(nr);
  result.setResult(false);
  if (filename != null) {
    String realFilename=getRealFilename();
    File file=new File(realFilename);
    if (!file.exists()) {
      if (isFailIfFileNotExists()) {
        result.setResult(false);
        log.logError(toString(),"File [" + realFilename + "] doesn't exist, failing.");
      }
 else {
        result.setResult(true);
        log.logBasic(toString(),"File [" + realFilename + "] already deleted.");
      }
    }
 else {
      try {
        boolean deleted=file.delete();
        if (!deleted) {
          log.logError(toString(),"Could not delete file [" + realFilename + "], aborting.");
          result.setResult(false);
          result.setNrErrors(1);
        }
      }
 catch (      Exception e) {
        log.logError(toString(),"Could not delete file [" + realFilename + "], aborting.");
        result.setResult(false);
        result.setNrErrors(1);
      }
      log.logBasic(toString(),"File [" + realFilename + "] deleted!");
      result.setResult(true);
    }
  }
 else {
    log.logError(toString(),"No filename is defined.");
  }
  return result;
}
