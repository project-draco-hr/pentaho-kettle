{
  LogWriter log=LogWriter.getInstance();
  StepLoader stepLoader=StepLoader.getInstance();
  if (!stepLoader.read()) {
    throw new RuntimeException("Unable to load steps and plugins");
  }
  DummyTransMeta meta=new DummyTransMeta();
  TransMeta transMeta=TransPreviewFactory.generatePreviewTransformation(meta,STEPNAME_STARTPOINT);
  Trans trans=new Trans(log,transMeta);
  trans.prepareExecution(null);
  RowProducer rp=trans.addRowProducer(STEPNAME_STARTPOINT,0);
  trans.startThreads();
  for (int i=0; i < 3; i++) {
    rp.putRow(createRow());
  }
  rp.finished();
  trans.waitUntilFinished();
}
