{
  NodeList list=doc.getElementsByTagName("toolbox");
  Toolbar toolbar=null;
  if (list != null && list.getLength() > 0) {
    Node toolboxNode=list.item(0);
    Node toolbarNode=XMLHandler.getSubNode(toolboxNode,"toolbar");
    while (toolbarNode != null) {
      if ("toolbar".equals(toolbarNode.getNodeName())) {
        String id=XMLHandler.getTagAttribute(toolbarNode,"id");
        toolbar=new Toolbar(shell,id,null);
        Node buttonNode=toolbarNode.getFirstChild();
        while (buttonNode != null) {
          if ("toolbarbutton".equals(buttonNode.getNodeName())) {
            String value=XMLHandler.getTagAttribute(buttonNode,"value");
            String imagePath=XMLHandler.getTagAttribute(buttonNode,"image");
            String hint=XMLHandler.getTagAttribute(buttonNode,"tooltiptext");
            hint=localizeXulText(hint,xulMessages);
            ToolbarButton button=new ToolbarButton(shell,value,toolbar);
            button.setHint(hint);
            final Image image=new Image(shell.getDisplay(),caller.getClass().getResourceAsStream(imagePath));
            button.setImage(image);
          }
 else           if ("toolbarseparator".equals(buttonNode.getNodeName())) {
            new ToolbarSeparator(shell,toolbar);
          }
          buttonNode=buttonNode.getNextSibling();
        }
      }
      toolbarNode=toolbarNode.getNextSibling();
    }
    return toolbar;
  }
  return null;
}
