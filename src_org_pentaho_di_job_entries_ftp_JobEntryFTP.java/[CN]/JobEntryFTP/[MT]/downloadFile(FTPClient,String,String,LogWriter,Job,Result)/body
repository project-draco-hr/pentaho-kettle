{
  String localFilename=filename;
  targetFilename=getTargetFilename(localFilename);
  if ((!onlyGettingNewFiles) || (onlyGettingNewFiles && needsDownload(targetFilename))) {
    if (log.isDetailed())     log.logDetailed(toString(),Messages.getString("JobEntryFTP.GettingFile",filename,environmentSubstitute(targetDirectory)));
    ftpclient.get(targetFilename,filename);
    updateRetrievedFiles();
    if (log.isDetailed())     log.logDetailed(toString(),Messages.getString("JobEntryFTP.GotFile",filename));
    addFilenameToResultFilenames(log,result,parentJob,targetFilename);
    if (remove) {
      ftpclient.delete(filename);
      if (log.isDetailed())       if (log.isDetailed())       log.logDetailed(toString(),Messages.getString("JobEntryFTP.DeletedFile",filename));
    }
 else {
      if (movefiles) {
        ftpclient.rename(filename,realMoveToFolder + FILE_SEPARATOR + filename);
        if (log.isDetailed())         log.logDetailed(toString(),Messages.getString("JobEntryFTP.MovedFile",filename,realMoveToFolder));
      }
    }
  }
}
