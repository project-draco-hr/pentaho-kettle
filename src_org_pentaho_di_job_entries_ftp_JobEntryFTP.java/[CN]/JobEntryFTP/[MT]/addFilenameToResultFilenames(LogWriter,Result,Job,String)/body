{
  if (isaddresult) {
    FileObject targetFile=null;
    try {
      targetFile=KettleVFS.getFileObject(filename);
      ResultFile resultFile=new ResultFile(ResultFile.FILE_TYPE_GENERAL,targetFile,parentJob.getJobname(),toString());
      resultFile.setComment(Messages.getString("JobEntryFTP.Downloaded",serverName));
      result.getResultFiles().put(resultFile.getFile().toString(),resultFile);
      if (log.isDetailed())       log.logDetailed(toString(),Messages.getString("JobEntryFTP.FileAddedToResult",filename));
    }
 catch (    Exception e) {
      throw new KettleException(e);
    }
 finally {
      try {
        targetFile.close();
        targetFile=null;
      }
 catch (      Exception e) {
      }
    }
  }
}
