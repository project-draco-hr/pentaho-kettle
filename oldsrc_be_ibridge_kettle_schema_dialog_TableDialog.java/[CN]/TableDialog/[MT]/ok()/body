{
  tableinfo.setName(wName.getText());
  tableinfo.setDBName(wTable.getText());
  tableinfo.setType(wType.getSelectionIndex());
  tableinfo.setSize(Const.toInt(wSize.getText(),-1));
  tableinfo.setDatabase(schema.findConnection(wConnection.getText()));
  tableinfo.removeAllFields();
  for (int i=0; i < wFields.nrNonEmpty(); i++) {
    TableItem item=wFields.getNonEmpty(i);
    String name=item.getText(1);
    String dbname=item.getText(2);
    String ftype=item.getText(3);
    String atype=item.getText(4);
    String desc=item.getText(7);
    TableField f=new TableField(name,dbname,TableField.getFieldType(ftype),TableField.getAggregationType(atype),tableinfo);
    f.setHidden("Y".equalsIgnoreCase(item.getText(5)));
    f.setExact("Y".equalsIgnoreCase(item.getText(6)));
    f.setDescription(desc);
    tableinfo.addField(f);
  }
  tableinfo.removeAllConditions();
  for (int i=0; i < wConditions.nrNonEmpty(); i++) {
    TableItem item=wConditions.getNonEmpty(i);
    String name=item.getText(1);
    String field=item.getText(2);
    String comp=item.getText(3);
    String code=item.getText(4);
    String desc=item.getText(5);
    WhereCondition c=new WhereCondition(tableinfo,name,code);
    c.setField(tableinfo.findField(field));
    c.setComparator(comp);
    c.setDescription(desc);
    tableinfo.addCondition(c);
  }
  tablename=wName.getText();
  dispose();
}
