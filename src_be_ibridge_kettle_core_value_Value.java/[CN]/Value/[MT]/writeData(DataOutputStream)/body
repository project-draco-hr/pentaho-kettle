{
  try {
    dos.writeBoolean(isNull());
    if (!isNull()) {
switch (getType()) {
case VALUE_TYPE_STRING:
case VALUE_TYPE_BIGNUMBER:
        if (getString() != null && getString().getBytes().length > 0) {
          dos.writeInt(getString().getBytes().length);
          dos.writeChars(getString());
        }
 else {
          dos.writeInt(0);
        }
      break;
case VALUE_TYPE_DATE:
    dos.writeBoolean(getDate() != null);
  if (getDate() != null) {
    dos.writeLong(getDate().getTime());
  }
break;
case VALUE_TYPE_NUMBER:
dos.writeDouble(getNumber());
break;
case VALUE_TYPE_BOOLEAN:
dos.writeBoolean(getBoolean());
break;
case VALUE_TYPE_INTEGER:
dos.writeLong(getInteger());
break;
default :
break;
}
}
}
 catch (IOException e) {
throw new KettleFileException("Unable to write value data to output stream",e);
}
return true;
}
