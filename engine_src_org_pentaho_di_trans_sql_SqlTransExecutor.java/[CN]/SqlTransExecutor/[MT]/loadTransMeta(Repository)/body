{
  TransMeta transMeta=null;
  if (!Const.isEmpty(service.getFileName())) {
    try {
      transMeta=new TransMeta(service.getFileName(),false);
      transMeta.getLogChannel().logDetailed("Service transformation was loaded from XML file [" + service.getFileName() + "]");
    }
 catch (    Exception e) {
      throw new KettleException("Unable to load service transformation for service '" + serviceName + "'",e);
    }
  }
 else {
    try {
      transMeta=repository.loadTransformation(service.getObjectId(),null);
      transMeta.getLogChannel().logDetailed("Service transformation was loaded from repository for service [" + service.getName() + "]");
    }
 catch (    Exception e) {
      throw new KettleException("Unable to load service transformation for service '" + serviceName + "' from the repository",e);
    }
  }
  return transMeta;
}
