{
  LogWriter log=LogWriter.getInstance();
  Result result=new Result(nr);
  result.setResult(false);
  if (filename != null) {
    String realFilename=getRealFilename();
    File file=new File(realFilename);
    if (file.exists()) {
      if (isFailIfFileExists()) {
        result.setResult(false);
        log.logError(toString(),"File [" + realFilename + "] exists, failing.");
      }
 else {
        result.setResult(true);
        log.logBasic(toString(),"File [" + realFilename + "] already exists, not recreating.");
      }
    }
 else {
      FileOutputStream output=null;
      try {
        output=new FileOutputStream(file);
      }
 catch (      Exception e) {
        log.logError(toString(),"Could not create file [" + realFilename + "], aborting.");
        result.setResult(false);
        result.setNrErrors(1);
      }
 finally {
        try {
          if (output != null) {
            output.close();
          }
        }
 catch (        Exception e) {
        }
      }
      log.logBasic(toString(),"File [" + realFilename + "] created!");
      result.setResult(true);
    }
  }
 else {
    log.logError(toString(),"No filename is defined.");
  }
  return result;
}
