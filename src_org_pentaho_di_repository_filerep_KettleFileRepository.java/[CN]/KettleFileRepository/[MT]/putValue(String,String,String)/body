{
  try {
    FileObject storeDir=KettleVFS.getFileObject(getKeyValueStoreDirectory());
    if (!storeDir.exists()) {
      storeDir.createFolder();
    }
    FileObject namespaceDir=KettleVFS.getFileObject(getNamespaceDir(namespace));
    if (!namespaceDir.exists()) {
      namespaceDir.createFolder();
    }
    OutputStream outputStream=null;
    try {
      outputStream=KettleVFS.getOutputStream(getKeyFilename(namespace,key),false);
      outputStream.write(value.getBytes(TEXT_ENCODING));
    }
  finally {
      if (outputStream != null) {
        outputStream.close();
      }
    }
  }
 catch (  IOException e) {
    throw new KettleException("Unable to create key/value entry for namespace '" + namespace + "' and key '"+ key+ "'",e);
  }
}
