{
  String filename=calcDirectoryName(repdir) + transname + ".ktr";
  TransMeta transMeta=null;
  try {
    transMeta=DomainObjectRegistry.getInstance().constructTransMeta(new Class[]{String.class,Repository.class,boolean.class},new Object[]{filename,this,setInternalVariables});
  }
 catch (  DomainObjectCreationException doce) {
    transMeta=new TransMeta(filename,this,setInternalVariables);
  }
  transMeta.setFilename(null);
  transMeta.setName(transname);
  transMeta.setObjectId(new StringObjectId(calcObjectId(repdir,transname,EXT_TRANSFORMATION)));
  return transMeta;
}
