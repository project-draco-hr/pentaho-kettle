{
  String folder=calcDirectoryName(parentDirectory);
  String newFolder=folder;
  if (folder.endsWith("/"))   newFolder+=directoryPath;
 else   newFolder+="/" + directoryPath;
  FileObject parent=KettleVFS.getFileObject(newFolder);
  try {
    parent.createFolder();
  }
 catch (  FileSystemException e) {
    throw new KettleException("Unable to create folder " + newFolder,e);
  }
  RepositoryDirectory newDir=new RepositoryDirectory(parentDirectory,directoryPath);
  parentDirectory.addSubdirectory(newDir);
  newDir.setObjectId(new StringObjectId(newDir.toString()));
  return newDir;
}
