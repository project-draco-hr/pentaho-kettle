{
synchronized (cal) {
    java.util.Date tmp=target.getTime();
    try {
      cal.setTime(value);
      target.set(Calendar.HOUR_OF_DAY,cal.get(Calendar.HOUR_OF_DAY));
      target.set(Calendar.MINUTE,cal.get(Calendar.MINUTE));
      target.set(Calendar.SECOND,cal.get(Calendar.SECOND));
      target.set(Calendar.MILLISECOND,cal.get(Calendar.MILLISECOND));
      target.set(Calendar.YEAR,cal.get(Calendar.YEAR));
      target.set(Calendar.MONTH,cal.get(Calendar.MONTH));
      target.set(Calendar.DAY_OF_MONTH,cal.get(Calendar.DAY_OF_MONTH));
      return target.getTime().getTime();
    }
  finally {
      target.setTime(tmp);
    }
  }
}
