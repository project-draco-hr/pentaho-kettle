{
  if (value == null) {
    return null;
  }
  if (value.scale() < 0) {
    value=value.setScale(0);
  }
  if (value.scale() > maxPrecision) {
    value=value.setScale(maxPrecision,BigDecimal.ROUND_HALF_UP);
  }
  BigInteger max=MAX_VALUE_38;
  while (value.abs().unscaledValue().compareTo(max) > 0) {
    int scale=value.scale() - 1;
    if (scale < 0) {
      throw new SQLException(Messages.get("error.normalize.numtoobig",String.valueOf(maxPrecision)),"22000");
    }
    value=value.setScale(scale,BigDecimal.ROUND_HALF_UP);
  }
  return value;
}
