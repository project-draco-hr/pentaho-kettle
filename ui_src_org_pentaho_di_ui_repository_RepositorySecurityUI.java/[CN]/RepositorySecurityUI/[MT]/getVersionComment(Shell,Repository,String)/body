{
  if (repository == null) {
    return null;
  }
  RepositorySecurityProvider provider=repository.getSecurityProvider();
  if (provider.allowsVersionComments()) {
    String explanation="Enter a comment ";
    if (provider.isVersionCommentMandatory()) {
      explanation+="(Mandatory) : ";
    }
 else {
      explanation+=": ";
    }
    String versionComment=Const.VERSION_COMMENT_EDIT_VERSION + " of [" + operationDescription+ "]";
    EnterStringDialog dialog=new EnterStringDialog(shell,versionComment,"Enter comment",explanation);
    dialog.setManditory(provider.isVersionCommentMandatory());
    versionComment=dialog.open();
    return versionComment;
  }
  return null;
}
