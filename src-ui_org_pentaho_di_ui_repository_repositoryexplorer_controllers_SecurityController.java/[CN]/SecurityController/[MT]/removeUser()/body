{
  XulConfirmBox confirmBox=(XulConfirmBox)document.createElement("confirmbox");
  confirmBox.setTitle(messages.getString("ConfirmDialog.Title"));
  confirmBox.setMessage(messages.getString("RemoveUserConfirmDialog.Message"));
  confirmBox.setAcceptLabel(messages.getString("Dialog.Ok"));
  confirmBox.setCancelLabel(messages.getString("Dialog.Cancel"));
  confirmBox.addDialogCallback(new XulDialogCallback<Object>(){
    public void onClose(    XulComponent sender,    Status returnCode,    Object retVal){
      if (returnCode == Status.ACCEPT) {
        if (service != null) {
          if (security != null && security.getSelectedUser() != null) {
            try {
              service.delUser(security.getSelectedUser().getName());
              security.removeUser(security.getSelectedUser().getName());
            }
 catch (            Throwable th) {
              messageBox.setTitle(messages.getString("Dialog.Error"));
              messageBox.setAcceptLabel(messages.getString("Dialog.Ok"));
              messageBox.setMessage(BaseMessages.getString(RepositoryExplorer.class,"RemoveUser.UnableToRemoveUser",th.getLocalizedMessage()));
              messageBox.open();
            }
          }
 else {
            messageBox.setTitle(messages.getString("Dialog.Error"));
            messageBox.setAcceptLabel(messages.getString("Dialog.Ok"));
            messageBox.setMessage(messages.getString("RemoveUser.NoUserSelected"));
            messageBox.open();
          }
        }
      }
    }
    public void onError(    XulComponent sender,    Throwable t){
      messageBox.setTitle(messages.getString("Dialog.Error"));
      messageBox.setAcceptLabel(messages.getString("Dialog.Ok"));
      messageBox.setMessage(BaseMessages.getString(RepositoryExplorer.class,"RemoveUser.UnableToRemoveUser",t.getLocalizedMessage()));
      messageBox.open();
    }
  }
);
  confirmBox.open();
}
