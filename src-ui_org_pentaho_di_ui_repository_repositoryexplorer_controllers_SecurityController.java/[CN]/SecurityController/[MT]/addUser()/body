{
  if (rui != null) {
    UserInfo userInfo=new UserInfo();
    userInfo.setDescription(securityUser.getDescription());
    userInfo.setLogin(securityUser.getName());
    userInfo.setName(securityUser.getName());
    userInfo.setUsername(securityUser.getName());
    for (    UIRepositoryRole role : securityUser.getAssignedRoles()) {
      userInfo.addRole(role.getRoleInfo());
    }
    try {
      rui.saveUserInfo(userInfo);
      security.addUser(new UIRepositoryUser(userInfo));
    }
 catch (    KettleException ke) {
      messageBox.setTitle("Error");
      messageBox.setAcceptLabel("Ok");
      messageBox.setMessage("Unable to add a user :" + ke.getLocalizedMessage());
      messageBox.open();
    }
  }
  userDialog.hide();
}
