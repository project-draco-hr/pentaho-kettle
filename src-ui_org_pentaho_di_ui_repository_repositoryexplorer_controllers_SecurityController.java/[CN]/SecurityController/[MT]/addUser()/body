{
  if (service != null) {
    try {
      service.saveUserInfo(securityUser.getUserInfo());
      security.addUser(UIObjectRegistry.getInstance().constructUIRepositoryUser(securityUser.getUserInfo()));
      userDialog.hide();
    }
 catch (    Throwable th) {
      messageBox.setTitle(messages.getString("Dialog.Error"));
      messageBox.setAcceptLabel(messages.getString("Dialog.Ok"));
      messageBox.setMessage(BaseMessages.getString(RepositoryExplorer.class,"AddUser.UnableToAddUser",th.getLocalizedMessage()));
      messageBox.open();
    }
  }
}
