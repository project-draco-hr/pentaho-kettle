{
  confirmBox.setTitle(messages.getString("ConfirmDialog.Title"));
  confirmBox.setMessage(messages.getString("RemoveRoleConfirmDialog.Message"));
  confirmBox.setAcceptLabel(messages.getString("Dialog.Ok"));
  confirmBox.setCancelLabel(messages.getString("Dialog.Cancel"));
  confirmBox.addDialogCallback(new XulDialogCallback<Object>(){
    public void onClose(    XulComponent sender,    Status returnCode,    Object retVal){
      if (returnCode == Status.ACCEPT) {
        if (rsm != null) {
          if (security != null && security.getSelectedRole() != null) {
            try {
              rsm.deleteRole(security.getSelectedRole().getName());
              security.removeRole(security.getSelectedRole().getName());
            }
 catch (            KettleException ke) {
              messageBox.setTitle(messages.getString("Dialog.Error"));
              messageBox.setAcceptLabel(messages.getString("Dialog.Ok"));
              messageBox.setMessage(BaseMessages.getString(RepositoryExplorer.class,"RemoveRole.UnableToRemoveRole",ke.getLocalizedMessage()));
              messageBox.open();
            }
          }
 else {
            messageBox.setTitle(messages.getString("Dialog.Error"));
            messageBox.setAcceptLabel(messages.getString("Dialog.Ok"));
            messageBox.setMessage(messages.getString("RemoveRole.NoRoleSelected"));
            messageBox.open();
          }
        }
      }
    }
    public void onError(    XulComponent sender,    Throwable t){
      messageBox.setTitle(messages.getString("Dialog.Error"));
      messageBox.setAcceptLabel(messages.getString("Dialog.Ok"));
      messageBox.setMessage(BaseMessages.getString(RepositoryExplorer.class,"RemoveRole.UnableToRemoveRole",t.getLocalizedMessage()));
      messageBox.open();
    }
  }
);
  confirmBox.open();
}
