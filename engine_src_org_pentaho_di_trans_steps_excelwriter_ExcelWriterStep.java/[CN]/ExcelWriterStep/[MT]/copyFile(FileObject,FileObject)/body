{
  BufferedInputStream fis=null;
  BufferedOutputStream fos=null;
  try {
    fis=new BufferedInputStream(KettleVFS.getInputStream(in));
    fos=new BufferedOutputStream(KettleVFS.getOutputStream(out,false));
    byte[] buf=new byte[1024 * 1024];
    int i=0;
    while ((i=fis.read(buf)) != -1) {
      fos.write(buf,0,i);
    }
    fos.flush();
    fos.close();
    fis.close();
  }
 catch (  Exception e) {
    throw new KettleException(e);
  }
 finally {
    if (fis != null) {
      try {
        fis.close();
      }
 catch (      IOException e) {
        e.printStackTrace();
      }
    }
    if (fos != null) {
      try {
        fos.close();
      }
 catch (      IOException e) {
        e.printStackTrace();
      }
    }
  }
}
