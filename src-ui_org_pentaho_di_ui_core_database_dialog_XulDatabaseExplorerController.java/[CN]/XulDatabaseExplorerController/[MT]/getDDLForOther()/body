{
  if (databases != null) {
    Database db=new Database(null,this.model.getDatabaseMeta());
    try {
      db.connect();
      RowMetaInterface r=db.getTableFields(this.model.getTable());
      List<DatabaseMeta> dbs=new ArrayList<DatabaseMeta>();
      for (int i=0; i < databases.size(); i++) {
        if (((databases.get(i)).getDatabaseInterface() instanceof SAPR3DatabaseMeta)) {
          dbs.add(databases.get(i));
        }
      }
      String conn[]=new String[dbs.size()];
      for (int i=0; i < conn.length; i++)       conn[i]=(dbs.get(i)).getName();
      EnterSelectionDialog esd=new EnterSelectionDialog(this.dbExplorerDialog.getShell(),conn,BaseMessages.getString(PKG,"DatabaseExplorerDialog.TargetDatabase.Title"),BaseMessages.getString(PKG,"DatabaseExplorerDialog.TargetDatabase.Message"));
      String target=esd.open();
      if (target != null) {
        DatabaseMeta targetdbi=DatabaseMeta.findDatabase(dbs,target);
        Database targetdb=new Database(null,targetdbi);
        String sql=targetdb.getCreateTableStatement(this.model.getTable(),r,null,false,null,true);
        SQLEditor se=new SQLEditor(this.dbExplorerDialog.getShell(),SWT.NONE,this.model.getDatabaseMeta(),this.dbcache,sql);
        se.open();
      }
    }
 catch (    KettleDatabaseException dbe) {
      new ErrorDialog(this.dbExplorerDialog.getShell(),BaseMessages.getString(PKG,"Dialog.Error.Header"),BaseMessages.getString(PKG,"DatabaseExplorerDialog.Error.GenDDL"),dbe);
    }
 finally {
      db.disconnect();
    }
  }
 else {
    MessageBox mb=new MessageBox(this.dbExplorerDialog.getShell(),SWT.NONE | SWT.ICON_INFORMATION);
    mb.setMessage(BaseMessages.getString(PKG,"DatabaseExplorerDialog.NoConnectionsKnown.Message"));
    mb.setText(BaseMessages.getString(PKG,"DatabaseExplorerDialog.NoConnectionsKnown.Title"));
    mb.open();
  }
}
