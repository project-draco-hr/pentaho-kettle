{
  String filename=BUILD_VERSION_FILE;
  StringBuffer buffer=new StringBuffer(30);
  try {
    InputStream inputStream=getClass().getResourceAsStream("/" + filename);
    if (inputStream == null) {
      try {
        inputStream=new FileInputStream(filename);
      }
 catch (      FileNotFoundException e) {
        inputStream=new FileInputStream("./" + filename);
      }
    }
 else {
    }
    int c=inputStream.read();
    while (c > 0 && c != '\n' && c != '\r') {
      if (c != ' ' && c != '\t')       buffer.append((char)c);
      c=inputStream.read();
    }
    String parts[]=buffer.toString().split(SEPARATOR);
    if (parts.length != 3) {
      throw new RuntimeException("Could not find 3 parts in versioning line : [" + buffer + "]");
    }
    version=Integer.parseInt(parts[0]);
    SimpleDateFormat format=new SimpleDateFormat(BUILD_DATE_FORMAT);
    buildDate=format.parse(parts[1]);
    try {
      File engineJar=new File("lib/kettle-engine.jar");
      long lastModifiedJar=engineJar.lastModified();
      if (lastModifiedJar != 0L) {
        buildDate=new Date(lastModifiedJar);
      }
 else {
        System.out.println("Unable to find kettle engine jar file to set build date. (ingored)");
      }
    }
 catch (    Exception e) {
    }
  }
 catch (  FileNotFoundException e) {
    System.out.println("Unable to load revision number from file : [" + filename + "]");
  }
catch (  Exception e) {
    System.out.println("Unable to load revision number from file : [" + filename + "]"+ e.getMessage());
    e.printStackTrace();
  }
 finally {
    version=1;
    buildDate=new Date();
  }
}
