{
  StepMeta fr_backup=input.getFromStep();
  StepMeta to_backup=input.getToStep();
  input.setFromStep(transMeta.findStep(wFrom.getText()));
  input.setToStep(transMeta.findStep(wTo.getText()));
  if (transMeta.hasLoop(input.getFromStep())) {
    input.setFromStep(fr_backup);
    input.setToStep(to_backup);
    MessageBox mb=new MessageBox(shell,SWT.YES | SWT.ICON_WARNING);
    mb.setMessage("This hop causes a loop in the transformation.  Loops are not allowed!");
    mb.setText("Warning!");
    mb.open();
  }
 else {
    if (input.getFromStep() == null) {
      MessageBox mb=new MessageBox(shell,SWT.YES | SWT.ICON_WARNING);
      mb.setMessage("Step [" + wFrom.getText() + "] doesn't exist!");
      mb.setText("Warning!");
      mb.open();
    }
 else {
      if (input.getToStep() == null) {
        MessageBox mb=new MessageBox(shell,SWT.YES | SWT.ICON_WARNING);
        mb.setMessage("Step [" + wTo.getText() + "] doesn't exist!");
        mb.setText("Warning!");
        mb.open();
      }
 else {
        if (input.getFromStep().equals(input.getToStep())) {
          MessageBox mb=new MessageBox(shell,SWT.YES | SWT.ICON_WARNING);
          mb.setMessage("A hop can't go to the same step!");
          mb.setText("Warning!");
          mb.open();
        }
 else {
          dispose();
        }
      }
    }
  }
}
