{
  this();
  try {
    if (rep != null) {
      RepositoryDirectory repdir=rep.loadRepositoryDirectoryTree().findDirectory(dirname);
      if (repdir != null) {
        this.transMeta=rep.loadTransformation(name,repdir,null,false,null);
      }
 else {
        throw new KettleException(BaseMessages.getString(PKG,"Trans.Exception.UnableToLoadTransformation",name,dirname));
      }
    }
 else {
      this.transMeta=new TransMeta(filename,false);
    }
    this.log=new LogChannel(this);
    transMeta.initializeVariablesFrom(parentVariableSpace);
    initializeVariablesFrom(parentVariableSpace);
    transMeta.copyParametersFrom(this);
    transMeta.activateParameters();
  }
 catch (  KettleException e) {
    throw new KettleException(BaseMessages.getString(PKG,"Trans.Exception.UnableToOpenTransformation",name),e);
  }
}
