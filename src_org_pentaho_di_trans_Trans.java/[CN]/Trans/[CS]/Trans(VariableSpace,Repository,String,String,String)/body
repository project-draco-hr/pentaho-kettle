{
  try {
    if (rep != null) {
      RepositoryDirectory repdir=rep.getDirectoryTree().findDirectory(dirname);
      if (repdir != null) {
        this.transMeta=rep.loadTransformation(name,repdir,null,false);
      }
 else {
        throw new KettleException(BaseMessages.getString(PKG,"Trans.Exception.UnableToLoadTransformation",name,dirname));
      }
    }
 else {
      this.transMeta=new TransMeta(filename,false);
    }
    transMeta.initializeVariablesFrom(parentVariableSpace);
    initializeVariablesFrom(parentVariableSpace);
    transMeta.copyParametersFrom(this);
    transMeta.activateParameters();
    threadName=Thread.currentThread().getName();
  }
 catch (  KettleException e) {
    throw new KettleException(BaseMessages.getString(PKG,"Trans.Exception.UnableToOpenTransformation",name),e);
  }
  transListeners=new ArrayList<TransListener>();
  finished=new AtomicBoolean(false);
  paused=new AtomicBoolean(false);
  stopped=new AtomicBoolean(false);
}
