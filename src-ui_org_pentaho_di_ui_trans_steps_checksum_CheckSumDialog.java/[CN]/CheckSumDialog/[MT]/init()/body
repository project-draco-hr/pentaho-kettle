{
  checkSumTypes=new ArrayList<String>();
  fields=new AbstractModelList<Field>();
  checkSumTypes.add(BaseMessages.getString(PKG,"CheckSumDialog.Type.CRC32"));
  checkSumTypes.add(BaseMessages.getString(PKG,"CheckSumDialog.Type.ADLER32"));
  checkSumTypes.add(BaseMessages.getString(PKG,"CheckSumDialog.Type.MD5"));
  checkSumTypes.add(BaseMessages.getString(PKG,"CheckSumDialog.Type.SHA1"));
  checkTypeCombo=(XulMenuList)document.getElementById("checkType");
  resultTypeCombo=(XulMenuList)document.getElementById("resultType");
  fieldTable=(XulTree)document.getElementById("fieldsTable");
  resultName=(XulTextbox)document.getElementById("resultField");
  stepName=(XulTextbox)document.getElementById("stepName");
  checkTypeCombo.setElements(checkSumTypes);
  resultTypeCombo.setElements(Arrays.asList(CheckSumMeta.resultTypeDesc));
  bf.setBindingType(Binding.Type.ONE_WAY);
  try {
    bf.createBinding(fields,"children",fieldTable,"elements").fireSourceChanged();
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  final Runnable runnable=new Runnable(){
    public void run(){
      StepMeta stepMeta=transMeta.findStep(stepname);
      if (stepMeta != null) {
        try {
          RowMetaInterface row=transMeta.getPrevStepFields(stepMeta);
          for (int i=0; i < row.size(); i++) {
            inputFields.put(row.getValueMeta(i).getName(),Integer.valueOf(i));
          }
          document.invokeLater(new Runnable(){
            public void run(){
              setComboBoxes();
              loadFromMeta();
              activeResultType();
            }
          }
);
        }
 catch (        KettleException e) {
          logError(BaseMessages.getString(PKG,"System.Dialog.GetFieldsFailed.Message"));
        }
      }
    }
  }
;
  new Thread(runnable).start();
}
