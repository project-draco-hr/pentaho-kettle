{
  Connection connection=null;
  DataSource dataSource=(new DatabaseUtil()).getNamedDataSource(jndiName);
  if (dataSource != null) {
    try {
      connection=dataSource.getConnection();
    }
 catch (    SQLException e) {
      throw new KettleDatabaseException("Invalid JNDI connection " + jndiName + " : "+ e.getMessage());
    }
    if (connection == null) {
      throw new KettleDatabaseException("Invalid JNDI connection " + jndiName);
    }
  }
 else {
    throw new KettleDatabaseException("Invalid JNDI connection " + jndiName);
  }
  this.connection=connection;
}
