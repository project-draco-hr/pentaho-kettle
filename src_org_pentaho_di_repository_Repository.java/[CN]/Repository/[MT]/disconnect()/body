{
  try {
    currentRepository=null;
    closeStepAttributeLookupPreparedStatement();
    closeTransAttributeLookupPreparedStatement();
    closeLookupJobEntryAttribute();
    if (!database.isAutoCommit())     commit();
    repinfo.setLock(false);
  }
 catch (  KettleException dbe) {
    log.logError(toString(),"Error disconnecting from database : " + dbe.getMessage());
  }
 finally {
    database.disconnect();
  }
}
