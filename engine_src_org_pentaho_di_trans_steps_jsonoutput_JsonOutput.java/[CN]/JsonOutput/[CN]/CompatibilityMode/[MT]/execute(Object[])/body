{
  for (int i=0; i < data.nrFields; i++) {
    JsonOutputField outputField=meta.getOutputFields()[i];
    ValueMetaInterface v=data.inputRowMeta.getValueMeta(data.fieldIndexes[i]);
    ObjectNode jo=data.mapper.createObjectNode();
    addJsonField(jo,outputField,v,row,i);
    data.jsonArray.add(jo);
  }
  attemptToFlush(row);
}
