{
  JsonNode jsonDoc;
  if (!data.realBlocName.isEmpty()) {
    ObjectNode jsonObj=data.mapper.createObjectNode();
    if (data.nrRowsInBloc == 1) {
      if (data.jsonArray.size() > 0) {
        jsonObj.put(data.realBlocName,data.jsonArray.get(0));
      }
 else {
        jsonObj.put(data.realBlocName,data.mapper.createObjectNode());
      }
    }
 else {
      jsonObj.put(data.realBlocName,data.jsonArray);
    }
    jsonDoc=jsonObj;
  }
 else {
    if (data.nrRowsInBloc == 1) {
      if (data.jsonArray.size() > 0) {
        jsonDoc=data.jsonArray.get(0);
      }
 else {
        jsonDoc=data.mapper.createObjectNode();
      }
    }
 else {
      jsonDoc=data.jsonArray;
    }
  }
  return jsonDoc;
}
