{
  if (data.rowsOnFile > 0) {
    if (data.firstRead) {
      try {
        data.fis=new FileInputStream(data.tempFile);
        data.dis=new DataInputStream(data.fis);
        data.firstRead=false;
      }
 catch (      IOException e) {
        throw new KettleFileException(Messages.getString("GroupBy.Exception.UnableToReadBackRowFromTemporaryFile"),e);
      }
    }
    Row row=new Row(data.dis);
    data.rowsOnFile--;
    return row;
  }
 else {
    if (data.bufferList.size() > 0) {
      Row row=(Row)data.bufferList.get(0);
      data.bufferList.remove(0);
      return row;
    }
 else {
      return null;
    }
  }
}
