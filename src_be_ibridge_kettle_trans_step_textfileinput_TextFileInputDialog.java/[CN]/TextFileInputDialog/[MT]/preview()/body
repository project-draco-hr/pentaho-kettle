{
  TextFileInputMeta oneMeta=new TextFileInputMeta();
  getInfo(oneMeta);
  TransMeta previewMeta=TransPreviewFactory.generatePreviewTransformation(oneMeta,wStepname.getText());
  EnterNumberDialog numberDialog=new EnterNumberDialog(shell,props,500,Messages.getString("TextFileInputDialog.PreviewSize.DialogTitle"),Messages.getString("TextFileInputDialog.PreviewSize.DialogMessage"));
  int previewSize=numberDialog.open();
  if (previewSize > 0) {
    TransPreviewProgressDialog progressDialog=new TransPreviewProgressDialog(shell,previewMeta,new String[]{wStepname.getText()},new int[]{previewSize});
    progressDialog.open();
    if (!progressDialog.isCancelled()) {
      Trans trans=progressDialog.getTrans();
      String loggingText=progressDialog.getLoggingText();
      if (trans.getResult() != null && trans.getResult().getNrErrors() > 0) {
        MessageBox mb=new MessageBox(shell,SWT.OK | SWT.ICON_ERROR);
        mb.setMessage(Messages.getString("TextFileInputDialog.ErrorInPreview.DialogMessage"));
        mb.setText(Messages.getString("System.DialogTitle.Error"));
        mb.open();
      }
      PreviewRowsDialog prd=new PreviewRowsDialog(shell,SWT.NONE,wStepname.getText(),progressDialog.getPreviewRows(wStepname.getText()),loggingText);
      prd.open();
    }
  }
}
