{
  if (obj == null)   return "";
  Class c=obj.getClass();
  if (useToStringAsClassName && redefinesToString(obj))   return quote(obj.toString());
 else {
    String name=c.getName();
    if (!showPackageNamesInClasses || c.getPackage() == LJV.class.getPackage()) {
      name=name.substring(name.lastIndexOf('.') + 1);
      if (!qualifyNestedClassNames)       name=name.substring(name.lastIndexOf('$') + 1);
    }
    return name;
  }
}
