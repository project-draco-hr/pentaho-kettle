{
  try {
    Row r=transMeta.getPrevStepFields(stepname);
    if (r != null) {
      TreeItem item=new TreeItem(wTree,SWT.NULL);
      item.setText("Output Fields");
      String strItemToAdd="";
      for (int i=0; i < r.size(); i++) {
        Value v=r.getValue(i);
switch (v.getType()) {
case Value.VALUE_TYPE_STRING:
          strItemToAdd=v.getName() + ".setString(var)";
        break;
case Value.VALUE_TYPE_NUMBER:
      strItemToAdd=v.getName() + ".setNumber(var)";
    break;
case Value.VALUE_TYPE_INTEGER:
  strItemToAdd=v.getName() + ".setInt(var)";
break;
case Value.VALUE_TYPE_DATE:
strItemToAdd=v.getName() + ".setDate(var)";
break;
case Value.VALUE_TYPE_BOOLEAN:
strItemToAdd=v.getName() + ".setBool(var)";
break;
default :
strItemToAdd=v.getName();
break;
}
TreeItem itemInputFields=new TreeItem(item,SWT.NULL);
itemInputFields.setText(strItemToAdd);
itemInputFields.setData(strItemToAdd);
}
}
}
 catch (KettleException ke) {
new ErrorDialog(shell,props,"Get fields failed","Unable to get fields from previous steps because of an error",ke);
}
}
