{
  Object obj=document.getRootElement().getManagedObject();
  Shell parent;
  if (obj instanceof Shell) {
    parent=(Shell)obj;
  }
 else {
    parent=((Composite)obj).getShell();
  }
  if (parent == null) {
    throw new IllegalStateException("Could not get Shell reference from Xul Dialog Tree.");
  }
  DatabaseMeta dbinfo=new DatabaseMeta();
  getInfo(dbinfo);
  try {
    if (dbinfo.getAccessType() != DatabaseMeta.TYPE_ACCESS_PLUGIN) {
      DatabaseExplorerDialog ded=new DatabaseExplorerDialog(parent,SWT.NONE,dbinfo,databases,true);
      ded.open();
    }
 else {
      MessageBox mb=new MessageBox(parent,SWT.OK | SWT.ICON_INFORMATION);
      mb.setText(Messages.getString("DatabaseDialog.ExplorerNotImplemented.Title"));
      mb.setMessage(Messages.getString("DatabaseDialog.ExplorerNotImplemented.Message"));
      mb.open();
    }
  }
 catch (  Exception e) {
    new ErrorDialog(parent,Messages.getString("DatabaseDialog.ErrorParameters.title"),Messages.getString("DatabaseDialog.ErrorParameters.description"),e);
  }
}
