{
  if (wName.getText().length() > 0) {
    profileName=wName.getText();
    profile.setName(wName.getText());
    profile.setDescription(wDesc.getText());
    profile.removeAllPermissions();
    int sel[]=wPermission.getSelectionIndices();
    for (int i=0; i < sel.length; i++) {
      String perm=wPermission.getItem(sel[i]);
      PermissionMeta perminfo=new PermissionMeta(perm);
      profile.addPermission(perminfo);
    }
    dispose();
  }
 else {
    MessageBox mb=new MessageBox(shell,SWT.OK | SWT.ICON_ERROR);
    mb.setMessage(Messages.getString("ProfileDialog.Dialog.UnexpectedError.Message"));
    mb.setText(Messages.getString("ProfileDialog.Dialog.UnexpectedError.Title"));
    mb.open();
  }
}
