{
  while (undo.size() > undo_position + 1 && undo.size() > 0) {
    int last=undo.size() - 1;
    undo.remove(last);
  }
  undo.add(ta);
  undo_position++;
  while (undo.size() > props.getMaxUndo()) {
    undo.remove(0);
    undo_position--;
  }
  setUndoMenu();
}
