{
  String newDirectoryPath=getPath(null,newDirectory,null);
  RepositoryFile file=pur.getFileById(id.getId());
  StringBuilder buf=new StringBuilder(file.getPath().length());
  if (newDirectory != null) {
    buf.append(newDirectoryPath);
  }
 else {
    buf.append(getParentPath(file.getPath()));
  }
  buf.append(RepositoryFile.SEPARATOR);
  if (newName != null) {
    buf.append(checkAndSanitize(newName));
    if (!newName.endsWith(objectType.getExtension())) {
      buf.append(objectType.getExtension());
    }
  }
 else {
    buf.append(file.getName());
  }
  return buf.toString();
}
