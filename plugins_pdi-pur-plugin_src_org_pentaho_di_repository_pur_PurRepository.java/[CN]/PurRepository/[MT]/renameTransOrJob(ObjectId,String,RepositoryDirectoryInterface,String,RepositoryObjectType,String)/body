{
  RepositoryFile file=pur.getFileById(idObject.getId());
  newName=checkNewName(newName,objectType,file);
  String absPath=calcDestAbsPath(file,newDirectory,newName);
  RepositoryFile fileFromDestination=pur.getFile(absPath);
  RepositoryFile beforeRename=pur.getFileById(idObject.getId());
  if (fileFromDestination == null) {
    beforeRename=new RepositoryFile.Builder(beforeRename).title(RepositoryFile.DEFAULT_LOCALE,newName).build();
    NodeRepositoryFileData data=pur.getDataAtVersionForRead(beforeRename.getId(),null,NodeRepositoryFileData.class);
    pur.updateFile(beforeRename,data,versionComment);
    pur.moveFile(idObject.getId(),absPath,null);
    rootRef.clearRef();
    return idObject;
  }
 else {
    throw new KettleException(BaseMessages.getString(PKG,errorMsgKey,beforeRename.getName(),newName));
  }
}
