{
  Database database=null;
  KettleEnvironment.init();
  TransMeta transMeta=new TransMeta();
  transMeta.setName("transname");
  for (int i=0; i < databasesXML.length; i++) {
    DatabaseMeta databaseMeta=new DatabaseMeta(databasesXML[i]);
    transMeta.addDatabase(databaseMeta);
  }
  DatabaseMeta dbInfo=transMeta.findDatabase("db");
  database=new Database(transMeta,dbInfo);
  database.connect();
  return database;
}
