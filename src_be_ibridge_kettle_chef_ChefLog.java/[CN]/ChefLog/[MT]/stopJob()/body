{
  try {
    if (job != null) {
      job.stopAll();
      job.endProcessing("stop");
      LocalVariables.getInstance().removeKettleVariables(job.getName());
      job=null;
      isRunning=false;
      log.logMinimal(Chef.APP_NAME,Messages.getString("ChefLog.Log.JobWasStopped"));
    }
  }
 catch (  KettleJobException je) {
    MessageBox m=new MessageBox(shell,SWT.OK | SWT.ICON_WARNING);
    m.setText(Messages.getString("ChefLog.Dialog.UnableToSaveStopLineInLoggingTable.Title"));
    m.setMessage(Messages.getString("ChefLog.Dialog.UnableToSaveStopLineInLoggingTable.Message") + Const.CR + je.toString());
    m.open();
  }
 finally {
    job=null;
    wStart.setText(START_TEXT);
    chef.tiFileRun.setEnabled(true);
  }
}
