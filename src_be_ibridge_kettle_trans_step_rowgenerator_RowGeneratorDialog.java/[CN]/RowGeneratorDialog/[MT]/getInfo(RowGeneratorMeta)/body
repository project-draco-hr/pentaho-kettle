{
  meta.setRowLimit(wLimit.getText());
  int nrfields=wFields.nrNonEmpty();
  meta.allocate(nrfields);
  for (int i=0; i < nrfields; i++) {
    TableItem item=wFields.getNonEmpty(i);
    meta.getFieldName()[i]=item.getText(1);
    meta.getFieldType()[i]=item.getText(2);
    meta.getFieldFormat()[i]=item.getText(3);
    String slength=item.getText(4);
    String sprec=item.getText(5);
    meta.getCurrency()[i]=item.getText(6);
    meta.getDecimal()[i]=item.getText(7);
    meta.getGroup()[i]=item.getText(8);
    meta.getValue()[i]=item.getText(9);
    meta.getFieldLength()[i]=Const.toInt(slength,-1);
    meta.getFieldPrecision()[i]=Const.toInt(sprec,-1);
  }
  long longLimit=Const.toLong(StringUtil.environmentSubstitute(wLimit.getText()),-1L);
  if (longLimit < 0) {
    throw new KettleException(Messages.getString("RowGeneratorDialog.Wrong.RowLimit.Number"));
  }
}
