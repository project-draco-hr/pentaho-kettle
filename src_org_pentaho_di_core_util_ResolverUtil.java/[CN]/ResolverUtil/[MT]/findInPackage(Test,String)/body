{
  packageName=packageName.replace('.','/');
  ClassLoader loader=getClassLoader();
  Enumeration<URL> urls;
  try {
    urls=loader.getResources(packageName);
  }
 catch (  IOException ioe) {
    log.warn("Could not read package: " + packageName,ioe);
    return;
  }
  while (urls.hasMoreElements()) {
    try {
      String urlPath=urls.nextElement().getFile();
      urlPath=URLDecoder.decode(urlPath,"UTF-8");
      if (urlPath.startsWith("file:")) {
        urlPath=urlPath.substring(5);
      }
      if (urlPath.indexOf('!') > 0) {
        urlPath=urlPath.substring(0,urlPath.indexOf('!'));
      }
      log.info("Scanning for classes in [" + urlPath + "] matching criteria: "+ test);
      File file=new File(urlPath);
      if (file.isDirectory()) {
        loadImplementationsInDirectory(test,packageName,file);
      }
 else {
        loadImplementationsInJar(test,packageName,file);
      }
    }
 catch (    IOException ioe) {
      log.warn("could not read entries",ioe);
    }
  }
}
