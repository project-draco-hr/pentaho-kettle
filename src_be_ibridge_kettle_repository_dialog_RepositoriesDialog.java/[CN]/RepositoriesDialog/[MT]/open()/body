{
  props.setLook(shell);
  FormLayout formLayout=new FormLayout();
  formLayout.marginWidth=Const.FORM_MARGIN;
  formLayout.marginHeight=Const.FORM_MARGIN;
  shell.setLayout(formLayout);
  shell.setText("Select a repository");
  int middle=props.getMiddlePct();
  int margin=Const.MARGIN;
  wlKettle=new Label(shell,SWT.CENTER);
  wlKettle.setText("Welcome to Kettle - " + toolName);
  props.setLook(wlKettle);
  final Font f=new Font(shell.getDisplay(),"Arial",18,SWT.BOLD | SWT.ITALIC);
  wlKettle.addDisposeListener(new DisposeListener(){
    public void widgetDisposed(    DisposeEvent e){
      f.dispose();
    }
  }
);
  wlKettle.setFont(f);
  fdlKettle=new FormData();
  fdlKettle.left=new FormAttachment(0,0);
  fdlKettle.right=new FormAttachment(100,0);
  fdlKettle.top=new FormAttachment(0,margin);
  wlKettle.setLayoutData(fdlKettle);
  wlRepository=new Label(shell,SWT.RIGHT);
  wlRepository.setText("Repository ");
  props.setLook(wlRepository);
  fdlRepository=new FormData();
  fdlRepository.left=new FormAttachment(0,0);
  fdlRepository.right=new FormAttachment(middle,-margin);
  fdlRepository.top=new FormAttachment(wlKettle,20);
  wlRepository.setLayoutData(fdlRepository);
  wRepository=new CCombo(shell,SWT.SINGLE | SWT.READ_ONLY | SWT.BORDER);
  wnRepository=new Button(shell,SWT.PUSH);
  wnRepository.setText("New");
  weRepository=new Button(shell,SWT.PUSH);
  weRepository.setText("Edit");
  wdRepository=new Button(shell,SWT.PUSH);
  wdRepository.setText("Delete");
  fddRepository=new FormData();
  fddRepository.right=new FormAttachment(100,0);
  fddRepository.top=new FormAttachment(wlKettle,20);
  wdRepository.setLayoutData(fddRepository);
  fdeRepository=new FormData();
  fdeRepository.right=new FormAttachment(wdRepository,-margin);
  fdeRepository.top=new FormAttachment(wlKettle,20);
  weRepository.setLayoutData(fdeRepository);
  fdnRepository=new FormData();
  fdnRepository.right=new FormAttachment(weRepository,-margin);
  fdnRepository.top=new FormAttachment(wlKettle,20);
  wnRepository.setLayoutData(fdnRepository);
  props.setLook(wRepository);
  fdRepository=new FormData();
  fdRepository.left=new FormAttachment(middle,0);
  fdRepository.right=new FormAttachment(wnRepository,-margin);
  fdRepository.top=new FormAttachment(wlKettle,20);
  wRepository.setLayoutData(fdRepository);
  wnRepository.addSelectionListener(new SelectionAdapter(){
    public void widgetSelected(    SelectionEvent arg0){
      RepositoryMeta ri=new RepositoryMeta();
      RepositoryDialog dd=new RepositoryDialog(shell,SWT.APPLICATION_MODAL,log,props,ri,input,steploader);
      if (dd.open() != null) {
        input.addRepository(ri);
        fillRepositories();
        int idx=input.indexOfRepository(ri);
        wRepository.select(idx);
      }
    }
  }
);
  weRepository.addSelectionListener(new SelectionAdapter(){
    public void widgetSelected(    SelectionEvent arg0){
      RepositoryMeta ri=input.searchRepository(wRepository.getText());
      if (ri != null) {
        RepositoryDialog dd=new RepositoryDialog(shell,SWT.APPLICATION_MODAL,log,props,ri,input,steploader);
        if (dd.open() != null) {
          fillRepositories();
          int idx=input.indexOfRepository(ri);
          wRepository.select(idx);
        }
      }
    }
  }
);
  wdRepository.addSelectionListener(new SelectionAdapter(){
    public void widgetSelected(    SelectionEvent arg0){
      RepositoryMeta ri=input.searchRepository(wRepository.getText());
      if (ri != null) {
        int idx=input.indexOfRepository(ri);
        input.removeRepository(idx);
        fillRepositories();
      }
    }
  }
);
  wlUsername=new Label(shell,SWT.RIGHT);
  wlUsername.setText("Login: ");
  props.setLook(wlUsername);
  fdlUsername=new FormData();
  fdlUsername.left=new FormAttachment(0,0);
  fdlUsername.right=new FormAttachment(middle,-margin);
  fdlUsername.top=new FormAttachment(wdRepository,margin);
  wlUsername.setLayoutData(fdlUsername);
  wUsername=new CCombo(shell,SWT.SINGLE | SWT.LEFT | SWT.BORDER);
  props.setLook(wUsername);
  fdUsername=new FormData();
  fdUsername.left=new FormAttachment(middle,0);
  fdUsername.right=new FormAttachment(100,0);
  fdUsername.top=new FormAttachment(wdRepository,margin);
  wUsername.setLayoutData(fdUsername);
  wlPassword=new Label(shell,SWT.RIGHT);
  wlPassword.setText("Password: ");
  props.setLook(wlPassword);
  fdlPassword=new FormData();
  fdlPassword.left=new FormAttachment(0,0);
  fdlPassword.right=new FormAttachment(middle,-margin);
  fdlPassword.top=new FormAttachment(wUsername,margin);
  wlPassword.setLayoutData(fdlPassword);
  wPassword=new Text(shell,SWT.SINGLE | SWT.LEFT | SWT.BORDER);
  props.setLook(wPassword);
  wPassword.setEchoChar('*');
  fdPassword=new FormData();
  fdPassword.left=new FormAttachment(middle,0);
  fdPassword.right=new FormAttachment(100,0);
  fdPassword.top=new FormAttachment(wUsername,margin);
  wPassword.setLayoutData(fdPassword);
  wOK=new Button(shell,SWT.PUSH);
  wOK.setText(" &OK ");
  wNorep=new Button(shell,SWT.PUSH);
  wNorep.setText(" &No repository ");
  wCancel=new Button(shell,SWT.PUSH);
  wCancel.setText(" &Cancel ");
  Button[] buttons=new Button[]{wOK,wNorep,wCancel};
  BaseStepDialog.positionBottomButtons(shell,buttons,margin,wPassword);
  lsOK=new Listener(){
    public void handleEvent(    Event e){
      ok();
    }
  }
;
  lsNorep=new Listener(){
    public void handleEvent(    Event e){
      norep();
    }
  }
;
  lsCancel=new Listener(){
    public void handleEvent(    Event e){
      cancel();
    }
  }
;
  wOK.addListener(SWT.Selection,lsOK);
  wNorep.addListener(SWT.Selection,lsNorep);
  wCancel.addListener(SWT.Selection,lsCancel);
  shell.addShellListener(new ShellAdapter(){
    public void shellClosed(    ShellEvent e){
      cancel();
    }
  }
);
  lsDef=new SelectionAdapter(){
    public void widgetDefaultSelected(    SelectionEvent e){
      ok();
    }
  }
;
  lsKey=new KeyAdapter(){
    public void keyPressed(    KeyEvent e){
      if (e.character == SWT.CR)       ok();
    }
  }
;
  lsJmp=new KeyAdapter(){
    public void keyPressed(    KeyEvent e){
      if (e.character == SWT.CR) {
        if (wPassword.getText().length() != 0)         ok();
 else {
          wPassword.setFocus();
          wPassword.selectAll();
        }
      }
    }
  }
;
  wRepository.addKeyListener(lsKey);
  wUsername.addKeyListener(lsJmp);
  wPassword.addSelectionListener(lsDef);
  getData();
  WindowProperty winprop=props.getScreen(shell.getText());
  if (winprop != null)   winprop.setShell(shell);
 else   shell.pack();
  shell.open();
  while (!shell.isDisposed()) {
    if (!display.readAndDispatch())     display.sleep();
  }
  return repinfo != null;
}
