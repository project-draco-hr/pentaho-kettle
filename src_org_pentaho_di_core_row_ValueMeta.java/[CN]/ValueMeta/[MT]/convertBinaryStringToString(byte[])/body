{
  if (identicalFormat) {
    String string;
    if (Const.isEmpty(stringEncoding)) {
      string=new String(binary);
    }
 else {
      try {
        string=new String(binary,stringEncoding);
      }
 catch (      UnsupportedEncodingException e) {
        throw new KettleValueException("Unable to convert binary value to String with specified string encoding [" + stringEncoding + "]",e);
      }
    }
    return string;
  }
 else {
    Object nativeType=convertData(storageMetadata,binary);
    if (nativeMetadata == null) {
      nativeMetadata=this.clone();
      nativeMetadata.setStorageType(STORAGE_TYPE_NORMAL);
    }
    if (stringMetadata == null) {
      stringMetadata=storageMetadata.clone();
      stringMetadata.setStorageType(STORAGE_TYPE_NORMAL);
    }
    return (String)stringMetadata.convertData(nativeMetadata,nativeType);
  }
}
