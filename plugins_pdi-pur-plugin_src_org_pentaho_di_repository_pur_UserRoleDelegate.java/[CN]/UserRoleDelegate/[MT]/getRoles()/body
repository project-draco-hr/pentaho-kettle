{
  try {
    if (hasNecessaryPermissions) {
      return UserRoleHelper.convertToListFromProxyPentahoRoles(userRoleSecurityInfo,rsm);
    }
 else {
      return UserRoleHelper.convertToListFromNonPentahoRoles(userRoleInfo,rsm);
    }
  }
 catch (  Exception e) {
    throw new KettleException(BaseMessages.getString(UserRoleDelegate.class,"UserRoleDelegate.ERROR_0011_UNABLE_TO_GET_ROLES"),e);
  }
}
