{
  final String DUMMY_STEP_NAME="dummy.step.name";
  final String DUMMY_STEP_XML_CONTENT="<dummy-step>content</dummy-step>";
  final boolean DUMMY_STEP_IS_CLUSTERED=true;
  StepInitThread mockStepInitThread=mock(StepInitThread.class);
  StepMetaDataCombi mockStepMetaDataCombi=mock(StepMetaDataCombi.class);
  mockStepMetaDataCombi.stepname=DUMMY_STEP_NAME;
  StepMeta mockStepMeta=mock(StepMeta.class);
  when(mockStepMeta.getName()).thenReturn(DUMMY_STEP_NAME);
  when(mockStepMeta.isClustered()).thenReturn(DUMMY_STEP_IS_CLUSTERED);
  when(mockStepMeta.getXML()).thenReturn(DUMMY_STEP_XML_CONTENT);
  mockStepMetaDataCombi.stepMeta=mockStepMeta;
  when(mockStepInitThread.getCombi()).thenReturn(mockStepMetaDataCombi);
  Assert.assertNull(stepBeforeInitializeMonitor.toKettleEvent(new String("not a StepInitThread Object")));
  Assert.assertNull(stepAfterInitializeMonitor.toKettleEvent(new String("not a StepInitThread Object")));
  Assert.assertNull(stepBeforeStartMonitor.toKettleEvent(new String("not a StepMetaDataCombi Object")));
  Assert.assertNull(stepFinishedMonitor.toKettleEvent(new String("not a StepMetaDataCombi Object")));
  IKettleMonitoringEvent event=stepBeforeInitializeMonitor.toKettleEvent(mockStepInitThread);
  Assert.assertNotNull(event);
  Assert.assertTrue(event instanceof StepEvent);
  Assert.assertTrue(StepEvent.EventType.BEFORE_INIT == ((StepEvent)event).getEventType());
  Assert.assertTrue(DUMMY_STEP_NAME.equals(((StepEvent)event).getName()));
  Assert.assertTrue(DUMMY_STEP_XML_CONTENT.equals(((StepEvent)event).getXmlContent()));
  Assert.assertTrue(DUMMY_STEP_IS_CLUSTERED == ((StepEvent)event).isClustered());
  event=stepAfterInitializeMonitor.toKettleEvent(mockStepInitThread);
  Assert.assertNotNull(event);
  Assert.assertTrue(event instanceof StepEvent);
  Assert.assertTrue(StepEvent.EventType.AFTER_INIT == ((StepEvent)event).getEventType());
  Assert.assertTrue(DUMMY_STEP_NAME.equals(((StepEvent)event).getName()));
  Assert.assertTrue(DUMMY_STEP_XML_CONTENT.equals(((StepEvent)event).getXmlContent()));
  Assert.assertTrue(DUMMY_STEP_IS_CLUSTERED == ((StepEvent)event).isClustered());
  event=stepBeforeStartMonitor.toKettleEvent(mockStepMetaDataCombi);
  Assert.assertNotNull(event);
  Assert.assertTrue(event instanceof StepEvent);
  Assert.assertTrue(StepEvent.EventType.BEFORE_START == ((StepEvent)event).getEventType());
  Assert.assertTrue(DUMMY_STEP_NAME.equals(((StepEvent)event).getName()));
  Assert.assertTrue(DUMMY_STEP_XML_CONTENT.equals(((StepEvent)event).getXmlContent()));
  Assert.assertTrue(DUMMY_STEP_IS_CLUSTERED == ((StepEvent)event).isClustered());
  event=stepFinishedMonitor.toKettleEvent(mockStepMetaDataCombi);
  Assert.assertNotNull(event);
  Assert.assertTrue(event instanceof StepEvent);
  Assert.assertTrue(StepEvent.EventType.FINIHED == ((StepEvent)event).getEventType());
  Assert.assertTrue(DUMMY_STEP_NAME.equals(((StepEvent)event).getName()));
  Assert.assertTrue(DUMMY_STEP_XML_CONTENT.equals(((StepEvent)event).getXmlContent()));
  Assert.assertTrue(DUMMY_STEP_IS_CLUSTERED == ((StepEvent)event).isClustered());
}
