{
  meta=(SelectValuesMeta)smi;
  data=(SelectValuesData)sdi;
  Object[] rowData=getRow();
  if (rowData == null) {
    setOutputDone();
    return false;
  }
  if (log.isRowLevel())   logRowlevel(BaseMessages.getString(PKG,"SelectValues.Log.GotRowFromPreviousStep") + getInputRowMeta().getString(rowData));
  if (first) {
    first=false;
    data.selectRowMeta=getInputRowMeta().clone();
    meta.getSelectFields(data.selectRowMeta,getStepname());
    data.deselectRowMeta=data.selectRowMeta.clone();
    meta.getDeleteFields(data.deselectRowMeta);
    data.metadataRowMeta=data.deselectRowMeta.clone();
    meta.getMetadataFields(data.metadataRowMeta,getStepname());
  }
  Object[] outputData=rowData;
  if (data.select)   outputData=selectValues(getInputRowMeta(),outputData);
  if (data.deselect)   outputData=removeValues(data.selectRowMeta,outputData);
  if (data.metadata)   outputData=metadataValues(data.deselectRowMeta,outputData);
  if (outputData == null) {
    setOutputDone();
    return false;
  }
  putRow(data.metadataRowMeta,outputData);
  if (log.isRowLevel())   logRowlevel(BaseMessages.getString(PKG,"SelectValues.Log.WroteRowToNextStep") + data.metadataRowMeta.getString(outputData));
  if (checkFeedback(getLinesRead()))   logBasic(BaseMessages.getString(PKG,"SelectValues.Log.LineNumber") + getLinesRead());
  return true;
}
