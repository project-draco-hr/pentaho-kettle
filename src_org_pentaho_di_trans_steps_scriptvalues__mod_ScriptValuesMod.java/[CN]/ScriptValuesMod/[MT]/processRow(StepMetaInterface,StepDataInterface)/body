{
  meta=(ScriptValuesMetaMod)smi;
  data=(ScriptValuesModData)sdi;
  Object[] r=getRow();
  if (r == null) {
    try {
      if (strEndScript != null && strEndScript.length() > 0) {
        Script endScript=data.cx.compileString(strEndScript,"trans_End",1,null);
        endScript.exec(data.cx,data.scope);
        if (log.isDetailed())         logDetailed(("End Script found!"));
      }
 else {
        if (log.isDetailed())         logDetailed(("No end Script found!"));
      }
    }
 catch (    Exception e) {
      logError(Messages.getString("ScriptValuesMod.Log.UnexpectedeError") + " : " + e.toString());
      logError(Messages.getString("ScriptValuesMod.Log.ErrorStackTrace") + Const.CR + Const.getStackTracker(e));
      setErrors(1);
      stopAll();
    }
    if (data.cx != null)     Context.exit();
    setOutputDone();
    return false;
  }
  try {
    addValues(getInputRowMeta(),r);
  }
 catch (  KettleValueException e) {
    String location=null;
    if (e.getCause() instanceof EvaluatorException) {
      EvaluatorException ee=(EvaluatorException)e.getCause();
      location="--> " + ee.lineNumber() + ":"+ ee.columnNumber();
    }
    if (getStepMeta().isDoingErrorHandling()) {
      putError(getInputRowMeta(),r,1,e.getMessage() + Const.CR + location,null,"SCR-001");
    }
 else {
      throw (e);
    }
  }
  if (checkFeedback(linesRead))   logBasic(Messages.getString("ScriptValuesMod.Log.LineNumber") + linesRead);
  return bRC;
}
