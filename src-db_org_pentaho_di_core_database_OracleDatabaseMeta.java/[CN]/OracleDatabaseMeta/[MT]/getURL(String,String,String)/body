{
  if (getAccessType() == DatabaseMeta.TYPE_ACCESS_ODBC) {
    return "jdbc:odbc:" + databaseName;
  }
 else   if (getAccessType() == DatabaseMeta.TYPE_ACCESS_NATIVE) {
    if (databaseName != null && databaseName.length() > 0 && (databaseName.startsWith("/") || databaseName.startsWith(":"))) {
      return "jdbc:oracle:thin:@" + hostname + ":"+ port+ databaseName;
    }
 else     if (Const.isEmpty(getHostname()) && (Const.isEmpty(getDatabasePortNumberString()) || getDatabasePortNumberString().equals("-1"))) {
      return "jdbc:oracle:thin:@" + getDatabaseName();
    }
 else {
      return "jdbc:oracle:thin:@" + hostname + ":"+ port+ ":"+ databaseName;
    }
  }
 else {
    if (getDatabaseName() != null && getDatabaseName().length() > 0) {
      if (getHostname() != null && getHostname().length() > 0 && getDatabasePortNumberString() != null && getDatabasePortNumberString().length() > 0) {
        return "jdbc:oracle:oci:@(description=(address=(host=" + getHostname() + ")(protocol=tcp)(port="+ getDatabasePortNumberString()+ "))(connect_data=(sid="+ getDatabaseName()+ ")))";
      }
 else {
        return "jdbc:oracle:oci:@" + getDatabaseName();
      }
    }
 else {
      throw new KettleDatabaseException("Unable to construct a JDBC URL: at least the database name must be specified");
    }
  }
}
