{
  DatabaseDialog databaseDialog=getDatabaseDialog(parentShell);
  if (databaseMeta != null) {
    databaseMeta.shareVariablesWith(transMeta);
    databaseDialog.setDatabaseMeta(databaseMeta);
  }
  databaseDialog.setModalDialog(true);
  if (databaseDialog.open() != null) {
    log.logError("getConnection(DatabaseMeta) could not open the connection dialog.");
  }
  if (databaseMeta != null) {
    model.setConnectionName(databaseMeta.getName());
  }
}
