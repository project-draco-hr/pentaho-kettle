{
  if (SvgSupport.isSvgName(resource)) {
    if (SvgSupport.isSvgEnabled()) {
      InputStream in=super.getResourceAsStream(resource);
      if (in != null) {
        try {
          SvgImage svg=SvgSupport.loadSvgImage(in);
          SwtUniversalImage image=new SwtUniversalImageSvg(svg);
          Display d=Display.getCurrent() != null ? Display.getCurrent() : Display.getDefault();
          Image result=image.getAsBitmapForSize(d,iconWidth,iconHeight);
          ImageLoader loader=new ImageLoader();
          loader.data=new ImageData[]{result.getImageData()};
          ByteArrayOutputStream out=new ByteArrayOutputStream();
          loader.save(out,SWT.IMAGE_PNG);
          image.dispose();
          return new ByteArrayInputStream(out.toByteArray());
        }
 catch (        Exception ex) {
          throw new RuntimeException("Error loading " + resource,ex);
        }
 finally {
          IOUtils.closeQuietly(in);
        }
      }
    }
    resource=SvgSupport.toPngName(resource);
  }
  return super.getResourceAsStream(resource);
}
