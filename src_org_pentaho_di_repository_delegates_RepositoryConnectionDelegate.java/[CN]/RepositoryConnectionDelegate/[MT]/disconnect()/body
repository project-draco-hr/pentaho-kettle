{
  try {
    repository.connectionDelegate.closeStepAttributeLookupPreparedStatement();
    repository.connectionDelegate.closeTransAttributeLookupPreparedStatement();
    repository.connectionDelegate.closeLookupJobEntryAttribute();
    if (!database.isAutoCommit())     commit();
    repository.getRepositoryInfo().setLock(false);
  }
 catch (  KettleException dbe) {
    log.logError(toString(),"Error disconnecting from database : " + dbe.getMessage());
  }
 finally {
    database.disconnect();
  }
}
