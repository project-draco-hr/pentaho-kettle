{
  meta=(UpdateMeta)smi;
  data=(UpdateData)sdi;
  try {
    if (!data.db.isAutoCommit()) {
      if (getErrors() == 0) {
        data.db.commit();
      }
 else {
        data.db.rollback();
      }
    }
    data.db.closePreparedStatement(data.prepStatementUpdate);
    data.db.closePreparedStatement(data.prepStatementLookup);
  }
 catch (  KettleDatabaseException e) {
    log.logError(toString(),BaseMessages.getString(PKG,"Update.Log.UnableToCommitUpdateConnection") + data.db + "] :"+ e.toString());
    setErrors(1);
  }
 finally {
    if (data.db != null) {
      data.db.disconnect();
    }
  }
  super.dispose(smi,sdi);
}
