{
  Properties sp=new Properties();
  KettleVariables kettleVariables=KettleVariables.getInstance();
  sp.putAll(kettleVariables.getProperties());
  sp.putAll(System.getProperties());
  List list=jobMeta.getUsedVariables();
  for (int i=0; i < list.size(); i++) {
    String varName=(String)list.get(i);
    String varValue=sp.getProperty(varName,"");
    System.out.println("variable [" + varName + "] is defined as : "+ varValue);
    if (variables.searchValueIndex(varName) < 0) {
      variables.addValue(new Value(varName,varValue));
    }
  }
  EnterStringsDialog esd=new EnterStringsDialog(shell,SWT.NONE,variables);
  esd.setReadOnly(false);
  if (esd.open() != null) {
    for (int i=0; i < variables.size(); i++) {
      Value varval=variables.getValue(i);
      if (!Const.isEmpty(varval.getString())) {
        kettleVariables.setVariable(varval.getName(),varval.getString());
        System.out.println("Variable ${" + varval.getName() + "} set to ["+ varval.getString()+ "] for thread ["+ Thread.currentThread()+ "]");
      }
    }
  }
}
