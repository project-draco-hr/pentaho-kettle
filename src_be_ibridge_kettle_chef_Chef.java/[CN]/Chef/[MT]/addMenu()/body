{
  Menu mBar=new Menu(shell,SWT.BAR);
  shell.setMenuBar(mBar);
  MenuItem mFile=new MenuItem(mBar,SWT.CASCADE);
  mFile.setText("&File");
  msFile=new Menu(shell,SWT.DROP_DOWN);
  mFile.setMenu(msFile);
  MenuItem miFileNew=new MenuItem(msFile,SWT.CASCADE);
  miFileNew.setText("&New\tCTRL-N");
  MenuItem miFileOpen=new MenuItem(msFile,SWT.CASCADE);
  miFileOpen.setText("&Open\tCTRL-O");
  MenuItem miFileSave=new MenuItem(msFile,SWT.CASCADE);
  miFileSave.setText("&Save\tCTRL-S");
  MenuItem miFileSaveAs=new MenuItem(msFile,SWT.CASCADE);
  miFileSaveAs.setText("Save &as...");
  new MenuItem(msFile,SWT.SEPARATOR);
  MenuItem miFilePrint=new MenuItem(msFile,SWT.CASCADE);
  miFilePrint.setText("&Print\tCTRL-P");
  new MenuItem(msFile,SWT.SEPARATOR);
  MenuItem miFileQuit=new MenuItem(msFile,SWT.CASCADE);
  miFileQuit.setText("&Quit");
  miFileSep3=new MenuItem(msFile,SWT.SEPARATOR);
  addMenuLast();
  Listener lsFileOpen=new Listener(){
    public void handleEvent(    Event e){
      openFile(false);
    }
  }
;
  Listener lsFileNew=new Listener(){
    public void handleEvent(    Event e){
      newFile();
    }
  }
;
  Listener lsFileSave=new Listener(){
    public void handleEvent(    Event e){
      saveFile();
    }
  }
;
  Listener lsFileSaveAs=new Listener(){
    public void handleEvent(    Event e){
      saveFileAs();
    }
  }
;
  Listener lsFilePrint=new Listener(){
    public void handleEvent(    Event e){
      printFile();
    }
  }
;
  Listener lsFileQuit=new Listener(){
    public void handleEvent(    Event e){
      quitFile();
    }
  }
;
  miFileOpen.addListener(SWT.Selection,lsFileOpen);
  miFileNew.addListener(SWT.Selection,lsFileNew);
  miFileSave.addListener(SWT.Selection,lsFileSave);
  miFileSaveAs.addListener(SWT.Selection,lsFileSaveAs);
  miFilePrint.addListener(SWT.Selection,lsFilePrint);
  miFileQuit.addListener(SWT.Selection,lsFileQuit);
  MenuItem mEdit=new MenuItem(mBar,SWT.CASCADE);
  mEdit.setText("&Edit");
  Menu msEdit=new Menu(shell,SWT.DROP_DOWN);
  mEdit.setMenu(msEdit);
  miEditUndo=new MenuItem(msEdit,SWT.CASCADE);
  miEditRedo=new MenuItem(msEdit,SWT.CASCADE);
  setUndoMenu();
  new MenuItem(msEdit,SWT.SEPARATOR);
  MenuItem miEditUnselectAll=new MenuItem(msEdit,SWT.CASCADE);
  miEditUnselectAll.setText("&Clear selection\tESC");
  MenuItem miEditSelectAll=new MenuItem(msEdit,SWT.CASCADE);
  miEditSelectAll.setText("&Select all steps\tCTRL-A");
  new MenuItem(msEdit,SWT.SEPARATOR);
  MenuItem miEditOptions=new MenuItem(msEdit,SWT.CASCADE);
  miEditOptions.setText("&Options...");
  Listener lsEditUndo=new Listener(){
    public void handleEvent(    Event e){
      undoAction();
    }
  }
;
  Listener lsEditRedo=new Listener(){
    public void handleEvent(    Event e){
      redoAction();
    }
  }
;
  Listener lsEditUnselectAll=new Listener(){
    public void handleEvent(    Event e){
      editUnselectAll();
    }
  }
;
  Listener lsEditSelectAll=new Listener(){
    public void handleEvent(    Event e){
      editSelectAll();
    }
  }
;
  Listener lsEditOptions=new Listener(){
    public void handleEvent(    Event e){
      editOptions();
    }
  }
;
  miEditUndo.addListener(SWT.Selection,lsEditUndo);
  miEditRedo.addListener(SWT.Selection,lsEditRedo);
  miEditUnselectAll.addListener(SWT.Selection,lsEditUnselectAll);
  miEditSelectAll.addListener(SWT.Selection,lsEditSelectAll);
  miEditOptions.addListener(SWT.Selection,lsEditOptions);
  MenuItem mRep=new MenuItem(mBar,SWT.CASCADE);
  mRep.setText("&Repository");
  Menu msRep=new Menu(shell,SWT.DROP_DOWN);
  mRep.setMenu(msRep);
  MenuItem miRepConnect=new MenuItem(msRep,SWT.CASCADE);
  miRepConnect.setText("&Connect to repository \tCTRL-R");
  MenuItem miRepDisconnect=new MenuItem(msRep,SWT.CASCADE);
  miRepDisconnect.setText("&Disconnect repository \tCTRL-D");
  MenuItem miRepExplore=new MenuItem(msRep,SWT.CASCADE);
  miRepExplore.setText("&Explore repository \tCTRL-E");
  new MenuItem(msRep,SWT.SEPARATOR);
  MenuItem miRepUser=new MenuItem(msRep,SWT.CASCADE);
  miRepUser.setText("&Edit current user\tCTRL-U");
  Listener lsRepConnect=new Listener(){
    public void handleEvent(    Event e){
      openRepository();
    }
  }
;
  Listener lsRepDisconnect=new Listener(){
    public void handleEvent(    Event e){
      closeRepository();
    }
  }
;
  Listener lsRepExplore=new Listener(){
    public void handleEvent(    Event e){
      exploreRepository();
    }
  }
;
  Listener lsRepUser=new Listener(){
    public void handleEvent(    Event e){
      editRepositoryUser();
    }
  }
;
  miRepConnect.addListener(SWT.Selection,lsRepConnect);
  miRepDisconnect.addListener(SWT.Selection,lsRepDisconnect);
  miRepExplore.addListener(SWT.Selection,lsRepExplore);
  miRepUser.addListener(SWT.Selection,lsRepUser);
  Licenses licenses=Licenses.getInstance();
  if (licenses.checkLicense(Licenses.PRODUCT_CHEF_ENTERPRISE) < 0) {
    miRepConnect.setEnabled(false);
    miRepDisconnect.setEnabled(false);
    miRepExplore.setEnabled(false);
    miRepUser.setEnabled(false);
  }
  MenuItem mJob=new MenuItem(mBar,SWT.CASCADE);
  mJob.setText("&Job");
  Menu msJob=new Menu(shell,SWT.DROP_DOWN);
  mJob.setMenu(msJob);
  MenuItem miJobRun=new MenuItem(msJob,SWT.CASCADE);
  miJobRun.setText("&Run...\tF9");
  new MenuItem(msJob,SWT.SEPARATOR);
  MenuItem miJobCopy=new MenuItem(msJob,SWT.CASCADE);
  miJobCopy.setText("&Copy job to clipboard");
  new MenuItem(msJob,SWT.SEPARATOR);
  MenuItem miJobInfo=new MenuItem(msJob,SWT.CASCADE);
  miJobInfo.setText("&Settings...\tCTRL-J");
  Listener lsJobInfo=new Listener(){
    public void handleEvent(    Event e){
      setJob();
    }
  }
;
  miJobInfo.addListener(SWT.Selection,lsJobInfo);
  Listener lsJobCopy=new Listener(){
    public void handleEvent(    Event e){
      toClipboard(XMLHandler.getXMLHeader() + jobMeta.getXML());
    }
  }
;
  miJobCopy.addListener(SWT.Selection,lsJobCopy);
  MenuItem mWizard=new MenuItem(mBar,SWT.CASCADE);
  mWizard.setText("&Wizard");
  Menu msWizard=new Menu(shell,SWT.DROP_DOWN);
  mWizard.setMenu(msWizard);
  MenuItem miWizardNewConnection=new MenuItem(msWizard,SWT.CASCADE);
  miWizardNewConnection.setText("&Create database connection wizard...\tF3");
  Listener lsWizardNewConnection=new Listener(){
    public void handleEvent(    Event e){
      createDatabaseWizard();
    }
  }
;
  miWizardNewConnection.addListener(SWT.Selection,lsWizardNewConnection);
  MenuItem miWizardRipDatabase=new MenuItem(msWizard,SWT.CASCADE);
  miWizardRipDatabase.setText("&Copy tables wizard...\tF10");
  Listener lsWizardRipDatabase=new Listener(){
    public void handleEvent(    Event e){
      ripDBWizard();
    }
  }
;
  miWizardRipDatabase.addListener(SWT.Selection,lsWizardRipDatabase);
  MenuItem mHelp=new MenuItem(mBar,SWT.CASCADE);
  mHelp.setText("&Help");
  Menu msHelp=new Menu(shell,SWT.DROP_DOWN);
  mHelp.setMenu(msHelp);
  MenuItem miHelpAbout=new MenuItem(msHelp,SWT.CASCADE);
  miHelpAbout.setText("&About");
  Listener lsHelpAbout=new Listener(){
    public void handleEvent(    Event e){
      helpAbout();
    }
  }
;
  miHelpAbout.addListener(SWT.Selection,lsHelpAbout);
}
