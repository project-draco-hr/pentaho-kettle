{
  boolean exit=true;
  boolean showWarning=true;
  log.logDetailed(toString(),"Quit application.");
  saveSettings();
  if (jobMeta.hasChanged()) {
    MessageBox mb=new MessageBox(shell,SWT.YES | SWT.NO | SWT.CANCEL| SWT.ICON_WARNING);
    mb.setMessage("File has changed!  Do you want to save first?");
    mb.setText("Warning!");
    int answer=mb.open();
switch (answer) {
case SWT.YES:
      saveFile();
    exit=true;
  showWarning=false;
break;
case SWT.NO:
exit=true;
showWarning=false;
break;
case SWT.CANCEL:
exit=false;
showWarning=false;
break;
}
}
if ((exit && cheflog.isRunning()) || (exit && showWarning && props.showExitWarning())) {
String message="Are you sure you want to exit?";
if (cheflog.isRunning()) message="There is a running job.  Are you sure you want to exit?";
MessageDialogWithToggle md=new MessageDialogWithToggle(shell,"Warning!",null,message,MessageDialog.WARNING,new String[]{"Yes","No"},1,"Please, don't show this warning anymore.",!props.showExitWarning());
int idx=md.open();
props.setExitWarningShown(!md.getToggleState());
props.saveProps();
if (idx == 1) exit=false;
 else exit=true;
}
if (exit) dispose();
return exit;
}
