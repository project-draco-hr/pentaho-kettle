{
  boolean exit=true;
  boolean showWarning=true;
  log.logDetailed(toString(),"Quit application.");
  saveSettings();
  if (jobMeta.hasChanged()) {
    MessageBox mb=new MessageBox(shell,SWT.YES | SWT.NO | SWT.CANCEL| SWT.ICON_WARNING);
    mb.setMessage(Messages.getString("Chef.Dialog.FileChangedSaveFirst.Message"));
    mb.setText(Messages.getString("Chef.Dialog.FileChangedSaveFirst.Title"));
    int answer=mb.open();
switch (answer) {
case SWT.YES:
      saveFile();
    exit=true;
  showWarning=false;
break;
case SWT.NO:
exit=true;
showWarning=false;
break;
case SWT.CANCEL:
exit=false;
showWarning=false;
break;
}
}
if ((exit && cheflog.isRunning()) || (exit && showWarning && props.showExitWarning())) {
String message=Messages.getString("Chef.Dialog.ExitApplicationAreYouSure.Message");
if (cheflog.isRunning()) message=Messages.getString("Chef.Dialog.ExitApplicationAreYouSure.MessageRunning");
MessageDialogWithToggle md=new MessageDialogWithToggle(shell,Messages.getString("Chef.Dialog.ExitApplicationAreYouSure.Title"),null,message,MessageDialog.WARNING,new String[]{Messages.getString("System.Button.Yes"),Messages.getString("System.Button.No")},1,Messages.getString("Chef.Dialog.ExitApplicationAreYouSure.Toggle"),!props.showExitWarning());
int idx=md.open();
props.setExitWarningShown(!md.getToggleState());
props.saveProps();
if (idx == 1) exit=false;
 else exit=true;
}
if (exit) dispose();
return exit;
}
