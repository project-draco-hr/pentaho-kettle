{
  log.logDetailed(toString(),"Save to repository...");
  if (rep != null) {
    boolean answer=true;
    boolean ask=ask_name;
    while (answer && (ask || jobMeta.getName() == null || jobMeta.getName().length() == 0)) {
      if (!ask) {
        MessageBox mb=new MessageBox(shell,SWT.OK | SWT.ICON_WARNING);
        mb.setMessage(Messages.getString("Chef.Dialog.GiveJobANameBeforeSaving.Message"));
        mb.setText(Messages.getString("Chef.Dialog.GiveJobANameBeforeSaving.Title"));
        mb.open();
      }
      ask=false;
      answer=setJob();
    }
    if (answer && jobMeta.getName() != null && jobMeta.getName().length() > 0) {
      if (!rep.getUserInfo().isReadonly()) {
        boolean saved=false;
        int response=SWT.YES;
        if (jobMeta.showReplaceWarning(rep)) {
          MessageBox mb=new MessageBox(shell,SWT.YES | SWT.NO | SWT.ICON_QUESTION);
          mb.setMessage(Messages.getString("Chef.Dialog.JobExistsOverwrite.Message1") + jobMeta.getName() + Messages.getString("Chef.Dialog.JobExistsOverwrite.Message2")+ Const.CR+ Messages.getString("Chef.Dialog.JobExistsOverwrite.Message3"));
          mb.setText(Messages.getString("Chef.Dialog.JobExistsOverwrite.Title"));
          response=mb.open();
        }
        if (response == SWT.YES) {
          jobMeta.modifiedDate=new Value("MODIFIED_DATE",Value.VALUE_TYPE_DATE);
          jobMeta.modifiedDate.sysdate();
          jobMeta.modifiedUser=rep.getUserInfo().getLogin();
          JobSaveProgressDialog jspd=new JobSaveProgressDialog(shell,rep,jobMeta);
          if (jspd.open()) {
            if (!props.getSaveConfirmation()) {
              MessageDialogWithToggle md=new MessageDialogWithToggle(shell,Messages.getString("Chef.Dialog.JobWasStoredInTheRepository.Title"),null,Messages.getString("Chef.Dialog.JobWasStoredInTheRepository.Message"),MessageDialog.QUESTION,new String[]{Messages.getString("System.Button.OK")},0,Messages.getString("Chef.Dialog.JobWasStoredInTheRepository.Toggle"),props.getSaveConfirmation());
              md.open();
              props.setSaveConfirmation(md.getToggleState());
            }
            props.addLastFile(LastUsedFile.FILE_TYPE_JOB,jobMeta.getName(),jobMeta.getDirectory().getPath(),true,rep.getName());
            saveSettings();
            addMenuLast();
            setShellText();
          }
        }
        return saved;
      }
 else {
        MessageBox mb=new MessageBox(shell,SWT.CLOSE | SWT.ICON_ERROR);
        mb.setMessage(Messages.getString("Chef.Dialog.UserCanOnlyReadFromTheRepositoryJobNotSaved.Message"));
        mb.setText(Messages.getString("Chef.Dialog.UserCanOnlyReadFromTheRepositoryJobNotSaved.Title"));
        mb.open();
      }
    }
  }
 else {
    MessageBox mb=new MessageBox(shell,SWT.OK | SWT.ICON_ERROR);
    mb.setMessage(Messages.getString("Chef.Dialog.NoRepositoryConnectionAvailable.Message"));
    mb.setText(Messages.getString("Chef.Dialog.NoRepositoryConnectionAvailable.Title"));
    mb.open();
  }
  return false;
}
