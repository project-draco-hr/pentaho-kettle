{
  if (rep != null) {
    if (!rep.getUserInfo().isReadonly()) {
      try {
        db.saveRep(rep);
        log.logDetailed(toString(),"Saved database connection [" + db + "] to the repository.");
        rep.commit();
      }
 catch (      KettleException ke) {
        new ErrorDialog(shell,props,"Error saving connection","Error saving connection [" + db + "] to repository!",ke);
      }
    }
 else {
      new ErrorDialog(shell,props,"Error saving connection","Can't save database connection!",new KettleException("This repository user is read-only!"));
    }
  }
}
