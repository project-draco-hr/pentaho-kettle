{
  try {
    Collection<UINamedCluster> namedClusters=namedClustersTable.getSelectedItems();
    if (namedClusters != null && !namedClusters.isEmpty()) {
      NamedCluster original=((UINamedCluster)namedClusters.toArray()[0]).getNamedCluster();
      NamedCluster namedCluster=original.clone();
      if (NamedClusterManager.getInstance().read(namedCluster.getName(),Spoon.getInstance().getMetaStore()) == null) {
        MessageBox mb=new MessageBox(shell,SWT.ICON_ERROR | SWT.OK);
        mb.setMessage(BaseMessages.getString(PKG,"RepositoryExplorerDialog.NamedCluster.Edit.DoesNotExists.Message"));
        mb.setText(BaseMessages.getString(PKG,"RepositoryExplorerDialog.NamedCluster.Edit.DoesNotExists.Title"));
        mb.open();
      }
 else {
        getNamedClusterDialog().setNamedCluster(namedCluster);
        String namedClusterName=getNamedClusterDialog().open();
        if (namedClusterName != null && !namedClusterName.equals("")) {
          NamedClusterManager.getInstance().delete(original.getName(),Spoon.getInstance().getMetaStore());
          NamedClusterManager.getInstance().create(namedCluster,Spoon.getInstance().getMetaStore());
        }
      }
    }
 else {
      MessageBox mb=new MessageBox(shell,SWT.ICON_ERROR | SWT.OK);
      mb.setMessage(BaseMessages.getString(PKG,"RepositoryExplorerDialog.NamedCluster.Edit.NoItemSelected.Message"));
      mb.setText(BaseMessages.getString(PKG,"RepositoryExplorerDialog.NamedCluster.Edit.NoItemSelected.Title"));
      mb.open();
    }
  }
 catch (  Exception e) {
    if (mainController == null || !mainController.handleLostRepository(e)) {
      new ErrorDialog(shell,BaseMessages.getString(PKG,"RepositoryExplorerDialog.NamedCluster.Edit.UnexpectedError.Title"),BaseMessages.getString(PKG,"RepositoryExplorerDialog.NamedCluster.Edit.UnexpectedError.Message"),e);
    }
  }
 finally {
    refreshNamedClustersList();
  }
}
