{
  KettleVariables vars=KettleVariables.getInstance();
  Properties sysprops=new Properties();
  sysprops.putAll(getEnv());
  sysprops.putAll(System.getProperties());
  sysprops.putAll(vars.getProperties());
  String[] envp=new String[sysprops.size()];
  List<String> list=new ArrayList(sysprops.keySet());
  for (int i=0; i < list.size(); i++) {
    String var=(String)list.get(i);
    String val=sysprops.getProperty(var);
    envp[i]=var + "=" + val;
  }
  return envp;
}
