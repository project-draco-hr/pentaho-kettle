{
  BufferedReader reader=new BufferedReader(new InputStreamReader(KettleVFS.getInputStream(fileObject)));
  String messagesPackage=null;
  int row=0;
  String line=reader.readLine();
  while (line != null) {
    row++;
    if (line.matches("^[ \t]*package .*;[ \t]*$")) {
      int beginIndex=line.indexOf("org.pentaho.");
      int endIndex=line.indexOf(';');
      messagesPackage=line.substring(beginIndex,endIndex);
    }
    if (line.matches("^[ \t]*import [a-z\\._0-9]*\\.Messages;[ \t]*$")) {
      int beginIndex=line.indexOf("org.pentaho.");
      int endIndex=line.indexOf(".Messages;");
      messagesPackage=line.substring(beginIndex,endIndex);
    }
    int index=line.indexOf(MESSAGES_GETSTRING);
    while (index >= 0) {
      if (index == 0 || (index > 0 & !Character.isJavaIdentifierPart(line.charAt(index - 1)))) {
        addLineOccurrence(fileObject,messagesPackage,line,row,index);
      }
      index=line.indexOf(MESSAGES_GETSTRING,index + 1);
    }
    line=reader.readLine();
  }
  reader.close();
}
