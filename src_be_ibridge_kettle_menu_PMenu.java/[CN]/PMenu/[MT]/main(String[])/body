{
  Locale.setDefault(Const.DEFAULT_LOCALE);
  LogWriter log=LogWriter.getInstance(Const.MENU_LOG_FILE,false,LogWriter.LOG_LEVEL_BASIC);
  StepLoader stloader=StepLoader.getInstance();
  if (!stloader.read()) {
    log.logError("Menu","Error loading steps... halting Menu!");
    return;
  }
  final PMenu win=new PMenu(log,stloader);
  win.demo_mode=false;
  if (args.length == 1) {
    if (win.schema.loadXML(args[0],false)) {
      win.setFilename(args[0]);
      win.schema.clearChanged();
    }
  }
 else {
    if (win.schema.props.openLastFile()) {
      String lastfiles[]=win.schema.props.getLastFiles();
      if (lastfiles.length > 0) {
        if (win.schema.loadXML(lastfiles[0],false)) {
          win.setFilename(lastfiles[0]);
          win.schema.clearChanged();
        }
      }
    }
  }
  win.open();
  while (!win.isDisposed()) {
    if (!win.readAndDispatch())     win.sleep();
  }
  win.dispose();
  log.close();
}
