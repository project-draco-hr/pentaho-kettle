{
  String jarfiles[]=sp.getJarfiles();
  URL urls[]=new URL[jarfiles.length];
  for (int i=0; i < jarfiles.length; i++) {
    FileSystemManager mgr=VFS.getManager();
    FileObject jarfile=mgr.resolveFile(jarfiles[i]);
    urls[i]=new URL(jarfile.getName().getURI());
  }
  ClassLoader classLoader=getClass().getClassLoader();
  URLClassLoader ucl=(URLClassLoader)classLoaders.get(sp.getID());
  if (ucl == null) {
synchronized (classLoaders) {
      ucl=new URLClassLoader(urls,classLoader);
      classLoaders.put(sp.getID(),ucl);
    }
  }
  return ucl;
}
