{
  DatabaseMeta databaseMeta=new DatabaseMeta();
  try {
    RowMetaAndData r=getDatabase(id_database);
    if (r != null) {
      long id_database_type=r.getInteger(Repository.FIELD_DATABASE_ID_DATABASE_TYPE,0);
      String dbTypeDesc=getDatabaseTypeCode(id_database_type);
      if (dbTypeDesc != null) {
        databaseMeta.setDatabaseInterface(DatabaseMeta.getDatabaseInterface(dbTypeDesc));
        databaseMeta.setAttributes(new Properties());
      }
 else {
      }
      databaseMeta.setID(id_database);
      databaseMeta.setName(r.getString(Repository.FIELD_DATABASE_NAME,""));
      long id_database_contype=r.getInteger(Repository.FIELD_DATABASE_ID_DATABASE_CONTYPE,0);
      databaseMeta.setAccessType(DatabaseMeta.getAccessType(getDatabaseConTypeCode(id_database_contype)));
      databaseMeta.setHostname(r.getString(Repository.FIELD_DATABASE_HOST_NAME,""));
      databaseMeta.setDBName(r.getString(Repository.FIELD_DATABASE_DATABASE_NAME,""));
      databaseMeta.setDBPort(r.getString(Repository.FIELD_DATABASE_PORT,""));
      databaseMeta.setUsername(r.getString(Repository.FIELD_DATABASE_USERNAME,""));
      databaseMeta.setPassword(Encr.decryptPasswordOptionallyEncrypted(r.getString(Repository.FIELD_DATABASE_PASSWORD,"")));
      databaseMeta.setServername(r.getString(Repository.FIELD_DATABASE_SERVERNAME,""));
      databaseMeta.setDataTablespace(r.getString(Repository.FIELD_DATABASE_DATA_TBS,""));
      databaseMeta.setIndexTablespace(r.getString(Repository.FIELD_DATABASE_INDEX_TBS,""));
      final Collection<RowMetaAndData> attrs=getDatabaseAttributes(id_database);
      for (      RowMetaAndData row : attrs) {
        String code=row.getString(Repository.FIELD_DATABASE_ATTRIBUTE_CODE,"");
        String attribute=row.getString(Repository.FIELD_DATABASE_ATTRIBUTE_VALUE_STR,"");
        databaseMeta.getAttributes().put(code,Const.NVL(attribute,""));
      }
    }
    return databaseMeta;
  }
 catch (  KettleDatabaseException dbe) {
    throw new KettleException("Error loading database connection from repository (id_database=" + id_database + ")",dbe);
  }
}
