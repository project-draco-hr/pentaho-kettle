{
  int flags=SWT.DRAW_DELIMITER | SWT.DRAW_TAB | SWT.DRAW_TRANSPARENT;
  if (notePadMeta.isSelected())   gc.setLineWidth(2);
 else   gc.setLineWidth(1);
  org.eclipse.swt.graphics.Point ext;
  if (Const.isEmpty(notePadMeta.getNote())) {
    ext=new org.eclipse.swt.graphics.Point(10,10);
  }
 else {
    int swt=SWT.NORMAL;
    if (notePadMeta.isFontBold())     swt=SWT.BOLD;
    if (notePadMeta.isFontItalic())     swt=swt | SWT.ITALIC;
    gc.setFont(new Font(PropsUI.getDisplay(),Const.NVL(notePadMeta.getFontName(),props.getNoteFont().getName()),notePadMeta.getFontSize() == -1 ? props.getNoteFont().getHeight() : notePadMeta.getFontSize(),swt));
    ext=gc.textExtent(notePadMeta.getNote(),flags);
  }
  Point p=new Point(ext.x,ext.y);
  Point loc=notePadMeta.getLocation();
  Point note=real2screen(loc.x,loc.y,offset);
  int margin=Const.NOTE_MARGIN;
  p.x+=2 * margin;
  p.y+=2 * margin;
  int width=notePadMeta.width;
  int height=notePadMeta.height;
  if (p.x > width)   width=p.x;
  if (p.y > height)   height=p.y;
  int noteshape[]=new int[]{note.x,note.y,note.x + width + 2 * margin,note.y,note.x + width + 2 * margin,note.y + height,note.x + width,note.y + height + 2 * margin,note.x + width,note.y + height,note.x + width + 2 * margin,note.y + height,note.x + width,note.y + height + 2 * margin,note.x,note.y + height + 2 * margin};
  if (notePadMeta.isDrawShadow()) {
    int s=this.props.getShadowSize();
    int shadowa[]=new int[]{note.x + s,note.y + s,note.x + width + 2 * margin + s,note.y + s,note.x + width + 2 * margin + s,note.y + height + s,note.x + width + s,note.y + height + 2 * margin + s,note.x + s,note.y + height + 2 * margin + s};
    gc.setBackground(lightGray);
    gc.fillPolygon(shadowa);
  }
  gc.setBackground(new Color(PropsUI.getDisplay(),new RGB(notePadMeta.getBackGroundColorRed(),notePadMeta.getBackGroundColorGreen(),notePadMeta.getBackGroundColorBlue())));
  gc.setForeground(new Color(PropsUI.getDisplay(),new RGB(notePadMeta.getBorderColorRed(),notePadMeta.getBorderColorGreen(),notePadMeta.getBorderColorBlue())));
  gc.fillPolygon(noteshape);
  gc.drawPolygon(noteshape);
  if (!Const.isEmpty(notePadMeta.getNote())) {
    gc.setForeground(new Color(PropsUI.getDisplay(),new RGB(notePadMeta.getFontColorRed(),notePadMeta.getFontColorGreen(),notePadMeta.getFontColorBlue())));
    gc.drawText(notePadMeta.getNote(),note.x + margin,note.y + margin,flags);
  }
  notePadMeta.width=width;
  notePadMeta.height=height;
  if (notePadMeta.isSelected())   gc.setLineWidth(1);
 else   gc.setLineWidth(2);
  if (!shadow) {
    areaOwners.add(new AreaOwner(AreaType.NOTE,note.x,note.y,width,height,transMeta,notePadMeta));
  }
}
