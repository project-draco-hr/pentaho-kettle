{
  if (repository != null) {
    try {
      SelectObjectDialog sod=new SelectObjectDialog(shell,props,repository,true,false,false);
      String transName=sod.open();
      RepositoryDirectory repdir=sod.getDirectory();
      if (transName != null && repdir != null) {
        mappingTransMeta=new TransMeta(repository,transName,repdir);
        mappingTransMeta.clearChanged();
        updateTransformationPath(mappingTransMeta);
      }
    }
 catch (    KettleException ke) {
      new ErrorDialog(shell,props,"Error","Error selecting object from repository",ke);
    }
  }
 else {
    FileDialog dialog=new FileDialog(shell,SWT.OPEN);
    dialog.setFilterExtensions(Const.STRING_TRANS_FILTER_EXT);
    dialog.setFilterNames(Const.STRING_TRANS_FILTER_NAMES);
    String fname=dialog.open();
    if (fname != null) {
      try {
        mappingTransMeta=new TransMeta(fname);
        mappingTransMeta.clearChanged();
        updateTransformationPath(mappingTransMeta);
      }
 catch (      KettleException e) {
        new ErrorDialog(shell,props,"Error loading transformation","There was an error loading the transformation from XML file:",e);
      }
    }
  }
}
