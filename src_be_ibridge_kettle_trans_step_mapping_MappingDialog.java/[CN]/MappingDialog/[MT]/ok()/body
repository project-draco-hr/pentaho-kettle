{
  try {
    stepname=wStepname.getText();
    loadTransformation();
    input.setFileName(wFilename.getText());
    input.setTransName(wTransName.getText());
    input.setDirectoryPath(wTransDir.getText());
    int nrInput=wInputFields.nrNonEmpty();
    int nrOutput=wOutputFields.nrNonEmpty();
    input.allocate(nrInput,nrOutput);
    for (int i=0; i < nrInput; i++) {
      TableItem item=wInputFields.getNonEmpty(i);
      input.getInputField()[i]=item.getText(1);
      input.getInputMapping()[i]=item.getText(2);
    }
    for (int i=0; i < nrOutput; i++) {
      TableItem item=wOutputFields.getNonEmpty(i);
      input.getOutputMapping()[i]=item.getText(1);
      input.getOutputField()[i]=item.getText(2);
    }
    dispose();
  }
 catch (  KettleException e) {
    new ErrorDialog(shell,props,Messages.getString("MappingDialog.ErrorLoadingSpecifiedTransformation.Title"),Messages.getString("MappingDialog.ErrorLoadingSpecifiedTransformation.Message"),e);
  }
}
