{
  EnvUtil.environmentInit();
  LogWriter.getInstance(LogWriter.LOG_LEVEL_BASIC);
  StepLoader.getInstance().read();
  TransMeta transMeta=new TransMeta("test/org/pentaho/di/run/textfileinput/TextFileInputCSV.ktr");
  List<ResourceReference> resourceReferences=transMeta.getResourceDependencies();
  assertEquals(1,resourceReferences.size());
  ResourceReference genRef=resourceReferences.get(0);
  ResourceHolderInterface refHolder=genRef.getReferenceHolder();
  List<ResourceEntry> entries=genRef.getEntries();
  assertEquals("TextFileInput",refHolder.getTypeId());
  assertEquals(1,entries.size());
  ResourceEntry theEntry=entries.get(0);
  assertEquals(ResourceType.FILE,theEntry.getResourcetype());
  assertTrue(theEntry.getResource().endsWith("customers-random-100k.txt"));
}
