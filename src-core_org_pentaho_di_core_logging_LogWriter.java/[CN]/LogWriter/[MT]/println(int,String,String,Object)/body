{
  if (level == LOG_LEVEL_NOTHING)   return;
  if (level < lvl)   return;
  String subject=subj;
  if (subject == null)   subject="Kettle";
  msg=(args.length <= 0) ? msg : MessageFormat.format(msg,args);
  if (lvl != LOG_LEVEL_ERROR && !Const.isEmpty(filter)) {
    if (subject.indexOf(filter) < 0 && msg.indexOf(filter) < 0) {
      return;
    }
  }
  Log4jMessage message=new Log4jMessage(msg,subject,lvl);
switch (lvl) {
case LOG_LEVEL_ERROR:
    pentahoLogger.error(message);
  break;
case LOG_LEVEL_ROWLEVEL:
case LOG_LEVEL_DEBUG:
pentahoLogger.debug(message);
break;
default :
pentahoLogger.info(message);
break;
}
}
