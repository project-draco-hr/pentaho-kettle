{
  try {
    String id=XMLHandler.getTagAttribute(pluginNode,"id");
    String description=getTagOrAttribute(pluginNode,"description");
    String iconfile=getTagOrAttribute(pluginNode,"iconfile");
    String tooltip=getTagOrAttribute(pluginNode,"tooltip");
    String category=getTagOrAttribute(pluginNode,"category");
    String classname=getTagOrAttribute(pluginNode,"classname");
    String errorHelpfile=getTagOrAttribute(pluginNode,"errorhelpfile");
    Node libsnode=XMLHandler.getSubNode(pluginNode,"libraries");
    int nrlibs=XMLHandler.countNodes(libsnode,"library");
    List<String> jarFiles=new ArrayList<String>();
    if (path != null) {
      for (int j=0; j < nrlibs; j++) {
        Node libnode=XMLHandler.getSubNodeByNr(libsnode,"library",j);
        String jarfile=XMLHandler.getTagAttribute(libnode,"name");
        jarFiles.add(new File(path + Const.FILE_SEPARATOR + jarfile).getAbsolutePath());
      }
    }
    Map<String,String> localizedCategories=readPluginLocale(pluginNode,"localized_category","category");
    category=getAlternativeTranslation(category,localizedCategories);
    Map<String,String> localizedDescriptions=readPluginLocale(pluginNode,"localized_description","description");
    description=getAlternativeTranslation(description,localizedDescriptions);
    Map<String,String> localizedTooltips=readPluginLocale(pluginNode,"localized_tooltip","tooltip");
    tooltip=getAlternativeTranslation(tooltip,localizedTooltips);
    String iconFilename=(path == null) ? iconfile : path + Const.FILE_SEPARATOR + iconfile;
    String errorHelpFileFull=errorHelpfile;
    if (!Const.isEmpty(errorHelpfile))     errorHelpFileFull=(path == null) ? errorHelpfile : path + Const.FILE_SEPARATOR + errorHelpfile;
    Map<PluginClassType,String> classMap=new HashMap<PluginClassType,String>();
    classMap.put(PluginClassType.MainClassType,classname);
    PluginInterface pluginInterface=new Plugin(id.split(","),pluginType,category,description,tooltip,iconFilename,false,false,classMap,jarFiles,errorHelpFileFull);
    registry.registerPlugin(pluginType,pluginInterface);
    return pluginInterface;
  }
 catch (  Throwable e) {
    throw new KettlePluginException(BaseMessages.getString(PKG,"BasePluginType.RuntimeError.UnableToReadPluginXML.PLUGIN0001"),e);
  }
}
