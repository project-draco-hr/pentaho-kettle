{
  String mac=wCMAC.getText();
  String username=wUsername.getText();
  String company=wCompany.getText();
  String products=wProducts.getText();
  String attempt=wSignature.getText();
  License license=new License(username,company,products,mac,"");
  if (license.checkLicenseCode(attempt)) {
    System.out.println("License is OK!");
    Licenses licenses=Licenses.getInstance();
    if (licenses.findLicense(attempt) == null) {
      System.out.println("Adding code to licence file.");
      licenses.addLicense(license);
      licenses.storeLicenses();
    }
    retval=SWT.YES;
    dispose();
  }
 else {
    MessageBox mb=new MessageBox(shell,SWT.OK | SWT.ICON_ERROR);
    mb.setMessage("This code is not valid!");
    mb.setText("ERROR");
    mb.open();
  }
}
