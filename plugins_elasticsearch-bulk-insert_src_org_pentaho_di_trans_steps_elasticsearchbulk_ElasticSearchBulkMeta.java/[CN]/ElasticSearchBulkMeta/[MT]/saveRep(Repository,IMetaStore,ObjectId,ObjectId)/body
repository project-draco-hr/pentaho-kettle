{
  try {
    rep.saveStepAttribute(id_transformation,id_step,joinRepAttr(Dom.TAG_GENERAL,Dom.TAG_INDEX),getIndex());
    rep.saveStepAttribute(id_transformation,id_step,joinRepAttr(Dom.TAG_GENERAL,Dom.TAG_TYPE),getType());
    rep.saveStepAttribute(id_transformation,id_step,joinRepAttr(Dom.TAG_GENERAL,Dom.TAG_BATCH_SIZE),batchSize);
    rep.saveStepAttribute(id_transformation,id_step,joinRepAttr(Dom.TAG_GENERAL,Dom.TAG_TIMEOUT),getTimeOut());
    rep.saveStepAttribute(id_transformation,id_step,joinRepAttr(Dom.TAG_GENERAL,Dom.TAG_TIMEOUT_UNIT),getTimeoutUnit().toString());
    rep.saveStepAttribute(id_transformation,id_step,joinRepAttr(Dom.TAG_GENERAL,Dom.TAG_IS_JSON),isJsonInsert());
    rep.saveStepAttribute(id_transformation,id_step,joinRepAttr(Dom.TAG_GENERAL,Dom.TAG_JSON_FIELD),getJsonField());
    rep.saveStepAttribute(id_transformation,id_step,joinRepAttr(Dom.TAG_GENERAL,Dom.TAG_ID_IN_FIELD),getIdInField());
    rep.saveStepAttribute(id_transformation,id_step,joinRepAttr(Dom.TAG_GENERAL,Dom.TAG_OVERWRITE_IF_EXISTS),isOverWriteIfSameId());
    rep.saveStepAttribute(id_transformation,id_step,joinRepAttr(Dom.TAG_GENERAL,Dom.TAG_ID_OUT_FIELD),getIdOutField());
    rep.saveStepAttribute(id_transformation,id_step,joinRepAttr(Dom.TAG_GENERAL,Dom.TAG_USE_OUTPUT),isUseOutput());
    rep.saveStepAttribute(id_transformation,id_step,joinRepAttr(Dom.TAG_GENERAL,Dom.TAG_STOP_ON_ERROR),isStopOnError());
    String[] fieldNames=getFields().keySet().toArray(new String[getFields().keySet().size()]);
    for (int i=0; i < fieldNames.length; i++) {
      rep.saveStepAttribute(id_transformation,id_step,i,joinRepAttr(Dom.TAG_FIELD,Dom.TAG_NAME),fieldNames[i]);
      rep.saveStepAttribute(id_transformation,id_step,i,joinRepAttr(Dom.TAG_FIELD,Dom.TAG_TARGET),getFields().get(fieldNames[i]));
    }
    for (int i=0; i < getServers().length; i++) {
      rep.saveStepAttribute(id_transformation,id_step,i,joinRepAttr(Dom.TAG_SERVER,Dom.TAG_SERVER_ADDRESS),getServers()[i].address().getAddress().getHostAddress());
      rep.saveStepAttribute(id_transformation,id_step,i,joinRepAttr(Dom.TAG_SERVER,Dom.TAG_SERVER_PORT),getServers()[i].address().getPort());
    }
    String[] settingNames=getSettings().keySet().toArray(new String[getSettings().keySet().size()]);
    for (int i=0; i < settingNames.length; i++) {
      rep.saveStepAttribute(id_transformation,id_step,i,joinRepAttr(Dom.TAG_SETTING,Dom.TAG_SETTING_NAME),settingNames[i]);
      rep.saveStepAttribute(id_transformation,id_step,i,joinRepAttr(Dom.TAG_SETTING,Dom.TAG_SETTING_VALUE),getSettings().get(settingNames[i]));
    }
  }
 catch (  Exception e) {
    throw new KettleException(BaseMessages.getString(PKG,"ElasticSearchBulkMeta.Exception.ErrorSavingToRepository","" + id_step),e);
  }
}
