{
  try {
    FileObject fileObject=KettleVFS.getFileObject(getFilename());
    String name=namingInterface.nameResource(fileObject.getName().getBaseName(),fileObject.getParent().getName().getPath(),"kjb");
    ResourceDefinition definition=definitions.get(name);
    if (definition == null) {
      JobMeta jobMeta=(JobMeta)this.clone();
      for (      JobEntryCopy jobEntry : jobMeta.jobcopies) {
        jobEntry.getEntry().exportResources(jobMeta,definitions,namingInterface);
      }
      String transMetaContent=jobMeta.getXML();
      definition=new ResourceDefinition(name,transMetaContent);
      definitions.put(fileObject.getName().getPath(),definition);
    }
  }
 catch (  FileSystemException e) {
    throw new KettleException(Messages.getString("JobMeta.Exception.AnErrorOccuredReadingJob",getFilename()),e);
  }
catch (  IOException e) {
    throw new KettleException(Messages.getString("JobMeta.Exception.AnErrorOccuredReadingJob",getFilename()),e);
  }
  return filename;
}
