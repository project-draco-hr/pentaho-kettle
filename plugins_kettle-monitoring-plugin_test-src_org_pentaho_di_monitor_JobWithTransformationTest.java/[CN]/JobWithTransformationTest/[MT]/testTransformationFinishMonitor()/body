{
  MockPlugin mockPlugin=new MockPlugin(dummyMonitor,new String[]{KettleExtensionPoint.TransformationFinish.id},KettleExtensionPoint.TransformationFinish.name());
  PluginRegistry.getInstance().registerPlugin(ExtensionPointPluginType.class,mockPlugin);
  executeSampleJobContainingTransformation();
  Assert.assertTrue(dummyMonitor.wasTriggered);
  Assert.assertTrue(dummyMonitor.eventObject != null && dummyMonitor.eventObject instanceof Trans);
  Assert.assertTrue(((Trans)dummyMonitor.eventObject).getName().equals(SAMPLE_TRANS_NAME));
  TransformationEvent e=new TransformationEvent(EventType.Transformation.FINISHED).build(((Trans)dummyMonitor.eventObject));
  Assert.assertNotNull(e);
  Assert.assertTrue(SAMPLE_TRANS_NAME.equals(e.getName()));
  Assert.assertTrue(SAMPLE_JOB_NAME.equals(e.getParentJobName()));
  Assert.assertTrue(SAMPLE_TRANS.equals(e.getFilename()));
  Assert.assertTrue(EventType.Transformation.FINISHED.getSnmpId() == e.getStatus());
  dummyMonitor.reset();
  PluginRegistry.getInstance().removePlugin(ExtensionPointPluginType.class,mockPlugin);
}
