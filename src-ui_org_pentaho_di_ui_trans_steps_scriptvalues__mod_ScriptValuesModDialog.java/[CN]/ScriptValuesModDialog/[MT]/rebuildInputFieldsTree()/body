{
  try {
    String itemName=Messages.getString("ScriptValuesDialogMod.InputFields.Label");
    RowMetaInterface r=transMeta.getPrevStepFields(stepname);
    if (r != null) {
      TreeItem item=null;
      for (      TreeItem look : wTree.getItems()) {
        if (look.getText().equals(itemName)) {
          for (          TreeItem child : look.getItems())           child.dispose();
          item=look;
          break;
        }
      }
      if (item == null)       item=new TreeItem(wTree,SWT.NULL);
      item.setText(itemName);
      String strItemToAdd="";
      for (int i=0; i < r.size(); i++) {
        ValueMetaInterface v=r.getValueMeta(i);
        if (wCompatible.getSelection()) {
switch (v.getType()) {
case ValueMetaInterface.TYPE_STRING:
            strItemToAdd=v.getName() + ".getString()";
          break;
case ValueMetaInterface.TYPE_NUMBER:
        strItemToAdd=v.getName() + ".getNumber()";
      break;
case ValueMetaInterface.TYPE_INTEGER:
    strItemToAdd=v.getName() + ".getInteger()";
  break;
case ValueMetaInterface.TYPE_DATE:
strItemToAdd=v.getName() + ".getDate()";
break;
case ValueMetaInterface.TYPE_BOOLEAN:
strItemToAdd=v.getName() + ".getBoolean()";
break;
case ValueMetaInterface.TYPE_BIGNUMBER:
strItemToAdd=v.getName() + ".getBigNumber()";
break;
case ValueMetaInterface.TYPE_BINARY:
strItemToAdd=v.getName() + ".getBytes()";
break;
case ValueMetaInterface.TYPE_SERIALIZABLE:
strItemToAdd=v.getName() + ".getSerializable()";
break;
default :
strItemToAdd=v.getName();
break;
}
}
 else {
strItemToAdd=v.getName();
}
TreeItem itemInputFields=new TreeItem(item,SWT.NULL);
itemInputFields.setText(strItemToAdd);
itemInputFields.setData(strItemToAdd);
}
}
}
 catch (KettleException ke) {
new ErrorDialog(shell,Messages.getString("ScriptValuesDialogMod.FailedToGetFields.DialogTitle"),Messages.getString("ScriptValuesDialogMod.FailedToGetFields.DialogMessage"),ke);
}
}
