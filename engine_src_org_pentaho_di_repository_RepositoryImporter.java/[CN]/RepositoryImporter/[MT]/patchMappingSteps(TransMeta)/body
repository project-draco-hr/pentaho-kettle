{
  for (  StepMeta stepMeta : transMeta.getSteps()) {
    if (stepMeta.isMapping()) {
      MappingMeta mappingMeta=(MappingMeta)stepMeta.getStepMetaInterface();
      if (mappingMeta.getSpecificationMethod() == ObjectLocationSpecificationMethod.REPOSITORY_BY_NAME) {
        if (transDirOverride != null) {
          mappingMeta.setDirectoryPath(transDirOverride);
          continue;
        }
        String newPath=baseDirectory.getPath();
        String extraPath=mappingMeta.getDirectoryPath();
        if (newPath.endsWith("/") && extraPath.startsWith("/")) {
          newPath=newPath.substring(0,newPath.length() - 1);
        }
 else         if (!newPath.endsWith("/") && !extraPath.startsWith("/")) {
          newPath+="/";
        }
 else         if (extraPath.equals("/")) {
          extraPath="";
        }
        mappingMeta.setDirectoryPath(newPath + extraPath);
      }
    }
  }
}
