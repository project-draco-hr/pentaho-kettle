{
  try {
    String stepFrom=wStep.getText();
    if (stepFrom != null) {
      Row r=transMeta.getStepFields(stepFrom);
      if (r != null) {
        Table table=wReturn.table;
        for (int i=0; i < r.size(); i++) {
          Value v=r.getValue(i);
          TableItem ti=new TableItem(table,SWT.NONE);
          ti.setText(1,v.getName());
          ti.setText(2,"");
          ti.setText(3,"");
          ti.setText(4,v.getTypeDesc());
        }
        wReturn.removeEmptyRows();
        wReturn.setRowNums();
        wReturn.optWidth(true);
      }
 else {
        MessageBox mb=new MessageBox(shell,SWT.OK | SWT.ICON_ERROR);
        mb.setMessage(Messages.getString("StreamLookupDialog.CouldNotFindFields.DialogMessage"));
        mb.setText(Messages.getString("StreamLookupDialog.CouldNotFindFields.DialogTitle"));
        mb.open();
      }
    }
 else {
      MessageBox mb=new MessageBox(shell,SWT.OK | SWT.ICON_ERROR);
      mb.setMessage(Messages.getString("StreamLookupDialog.StepNameRequired.DialogMessage"));
      mb.setText(Messages.getString("StreamLookupDialog.StepNameRequired.DialogTitle"));
      mb.open();
    }
  }
 catch (  KettleException ke) {
    new ErrorDialog(shell,Messages.getString("StreamLookupDialog.FailedToGetFields.DialogTitle"),Messages.getString("StreamLookupDialog.FailedToGetFields.DialogMessage"),ke);
  }
}
