{
  if (isJettyMode() && !request.getContextPath().startsWith(CONTEXT_PATH)) {
    return;
  }
  if (log.isDebug())   logDebug(BaseMessages.getString(PKG,"PauseTransServlet.PauseOfTransRequested"));
  String transName=request.getParameter("name");
  String id=request.getParameter("id");
  boolean useXML="Y".equalsIgnoreCase(request.getParameter("xml"));
  PrintWriter out=response.getWriter();
  try {
    if (useXML) {
      response.setContentType("text/xml");
      response.setCharacterEncoding(Const.XML_ENCODING);
      out.print(XMLHandler.getXMLHeader(Const.XML_ENCODING));
    }
 else {
      response.setContentType("text/html");
      out.println("<HTML>");
      out.println("<HEAD>");
      out.println("<TITLE>" + BaseMessages.getString(PKG,"PauseTransServlet.PauseTrans") + "</TITLE>");
      out.println("<META http-equiv=\"Refresh\" content=\"2;url=" + convertContextPath(GetTransStatusServlet.CONTEXT_PATH) + "?name="+ URLEncoder.encode(transName,"UTF-8")+ "&id="+ id+ "\">");
      out.println("</HEAD>");
      out.println("<BODY>");
    }
    Trans trans;
    CarteObjectEntry entry;
    if (Const.isEmpty(id)) {
      entry=getTransformationMap().getFirstCarteObjectEntry(transName);
      if (entry == null) {
        trans=null;
      }
 else {
        id=entry.getId();
        trans=getTransformationMap().getTransformation(entry);
      }
    }
 else {
      entry=new CarteObjectEntry(transName,id);
      trans=getTransformationMap().getTransformation(entry);
    }
    if (trans != null) {
      String message;
      if (trans.isPaused()) {
        trans.resumeRunning();
        message=BaseMessages.getString(PKG,"PauseTransServlet.TransResumeRequested",transName);
      }
 else {
        trans.pauseRunning();
        message=BaseMessages.getString(PKG,"PauseTransServlet.TransPauseRequested",transName);
      }
      if (useXML) {
        out.println(new WebResult(WebResult.STRING_OK,message).getXML());
      }
 else {
        out.println("<H1>" + message + "</H1>");
        out.println("<a href=\"" + convertContextPath(GetTransStatusServlet.CONTEXT_PATH) + "?name="+ URLEncoder.encode(transName,"UTF-8")+ "&id="+ id+ "\">"+ BaseMessages.getString(PKG,"TransStatusServlet.BackToTransStatusPage")+ "</a><p>");
      }
    }
 else {
      String message=BaseMessages.getString(PKG,"PauseTransServlet.CanNotFindTrans",transName);
      if (useXML) {
        out.println(new WebResult(WebResult.STRING_ERROR,message).getXML());
      }
 else {
        out.println("<H1>" + message + "</H1>");
        out.println("<a href=\"" + convertContextPath(GetStatusServlet.CONTEXT_PATH) + "\">"+ BaseMessages.getString(PKG,"TransStatusServlet.BackToStatusPage")+ "</a><p>");
      }
    }
  }
 catch (  Exception ex) {
    if (useXML) {
      out.println(new WebResult(WebResult.STRING_ERROR,Const.getStackTracker(ex)).getXML());
    }
 else {
      out.println("<p>");
      out.println("<pre>");
      ex.printStackTrace(out);
      out.println("</pre>");
    }
  }
  if (!useXML) {
    out.println("<p>");
    out.println("</BODY>");
    out.println("</HTML>");
  }
}
