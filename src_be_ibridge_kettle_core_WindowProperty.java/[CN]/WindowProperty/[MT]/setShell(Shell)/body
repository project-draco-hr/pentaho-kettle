{
  boolean notsized=true;
  shell.setMaximized(maximized);
  Rectangle r=rectangle;
  if (r != null && r.x >= 0 && r.y >= 0 && r.width >= 0 && r.height >= 0) {
    if (r.x > 0 && r.y > 0)     shell.setSize(r.width,r.height);
    if (r.width > 0 && r.height > 0)     shell.setLocation(r.x,r.y);
    notsized=false;
  }
  if (notsized) {
    shell.pack();
    Rectangle shRect=shell.getBounds();
    Rectangle diRect=shell.getDisplay().getBounds();
    boolean resize=false;
    if (shRect.width > diRect.width) {
      shRect.width=diRect.width;
      resize=true;
    }
    if (shRect.height > diRect.height) {
      shRect.height=diRect.height;
      resize=true;
    }
    if (resize) {
      shell.setSize(shRect.width,shRect.height);
    }
  }
}
