{
  List<Split> splits=new ArrayList<Split>();
  for (  StepInjectionMetaEntry lookFields : all) {
    Entry fieldsEntry=Entry.findEntry(lookFields.getKey());
    if (fieldsEntry != null) {
      String lookValue=(String)lookFields.getValue();
switch (fieldsEntry) {
case FIELDS:
{
          for (          StepInjectionMetaEntry lookField : lookFields.getDetails()) {
            Entry fieldEntry=Entry.findEntry(lookField.getKey());
            if (fieldEntry != null) {
              if (fieldEntry == Entry.FIELD) {
                Split split=new Split();
                List<StepInjectionMetaEntry> entries=lookField.getDetails();
                for (                StepInjectionMetaEntry entry : entries) {
                  Entry metaEntry=Entry.findEntry(entry.getKey());
                  if (metaEntry != null) {
                    String value=(String)entry.getValue();
switch (metaEntry) {
case NAME:
                      split.name=value;
                    break;
case ID:
                  split.id=value;
                break;
case REMOVE_ID:
              split.removeId="Y".equalsIgnoreCase(value);
            break;
case DATA_TYPE:
          split.dataType=ValueMeta.getType(value);
        break;
case LENGTH:
      split.length=Const.toInt(value,-1);
    break;
case PRECISION:
  split.precision=Const.toInt(value,-1);
break;
case FORMAT:
split.format=value;
break;
case GROUPING:
split.grouping=value;
break;
case DECIMAL:
split.decimal=value;
break;
case CURRENCY:
split.currency=value;
break;
case NULL_IF:
split.nullIf=value;
break;
case DEFAULT:
split.ifNull=value;
break;
case TRIM_TYPE:
split.trimType=ValueMeta.getTrimTypeByCode(value);
break;
default :
break;
}
}
}
splits.add(split);
}
}
}
}
break;
case FIELD_TO_SPLIT:
meta.setSplitField(lookValue);
break;
case DELIMITER:
meta.setDelimiter(lookValue);
break;
default :
break;
}
}
}
if (splits.size() > 0) {
meta.allocate(splits.size());
for (int i=0; i < splits.size(); i++) {
Split split=splits.get(i);
meta.getFieldName()[i]=split.name;
meta.getFieldID()[i]=split.id;
meta.getFieldRemoveID()[i]=split.removeId;
meta.getFieldType()[i]=split.dataType;
meta.getFieldFormat()[i]=split.format;
meta.getFieldGroup()[i]=split.grouping;
meta.getFieldDecimal()[i]=split.decimal;
meta.getFieldCurrency()[i]=split.currency;
meta.getFieldLength()[i]=split.length;
meta.getFieldPrecision()[i]=split.precision;
meta.getFieldNullIf()[i]=split.nullIf;
meta.getFieldIfNull()[i]=split.ifNull;
meta.getFieldTrimType()[i]=split.trimType;
}
}
}
