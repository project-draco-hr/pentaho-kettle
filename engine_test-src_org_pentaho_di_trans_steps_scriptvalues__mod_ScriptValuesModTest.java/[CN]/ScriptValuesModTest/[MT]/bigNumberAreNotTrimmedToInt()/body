{
  ScriptValuesMod step=StepMockUtil.getStep(ScriptValuesMod.class,ScriptValuesMetaMod.class,"test");
  RowMeta input=new RowMeta();
  input.addValueMeta(new ValueMetaBigNumber("value_int"));
  input.addValueMeta(new ValueMetaBigNumber("value_double"));
  step.setInputRowMeta(input);
  RowSet output=new BlockingRowSet(5);
  step.setOutputRowSets(Collections.singletonList(output));
  step=spy(step);
  doReturn(new Object[]{BigDecimal.ONE,BigDecimal.ONE}).when(step).getRow();
  ScriptValuesMetaMod meta=new ScriptValuesMetaMod();
  meta.setCompatible(false);
  meta.allocate(2);
  meta.setFieldname(new String[]{"value_int","value_double"});
  meta.setType(new int[]{ValueMetaInterface.TYPE_BIGNUMBER,ValueMetaInterface.TYPE_BIGNUMBER});
  meta.setReplace(new boolean[]{true,true});
  meta.setJSScripts(new ScriptValuesScript[]{new ScriptValuesScript(ScriptValuesScript.TRANSFORM_SCRIPT,"script","value_int = 10.00;\nvalue_double = 10.50")});
  ScriptValuesModData data=new ScriptValuesModData();
  step.init(meta,data);
  step.processRow(meta,data);
  Object[] row=output.getRowImmediate();
  assertNotNull(row);
  assertNotNull(row[0]);
  assertEquals(BigDecimal.TEN,row[0]);
  assertNotNull(row[1]);
  assertEquals(new BigDecimal("10.5"),row[1]);
}
