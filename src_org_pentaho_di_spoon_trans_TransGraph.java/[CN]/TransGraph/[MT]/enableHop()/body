{
  selrect=null;
  TransHopMeta hi=getCurrentHop();
  TransHopMeta before=(TransHopMeta)hi.clone();
  hi.setEnabled(!hi.isEnabled());
  if (transMeta.hasLoop(hi.getToStep())) {
    hi.setEnabled(!hi.isEnabled());
    MessageBox mb=new MessageBox(shell,SWT.OK | SWT.ICON_WARNING);
    mb.setMessage(Messages.getString("SpoonGraph.Dialog.LoopAfterHopEnabled.Message"));
    mb.setText(Messages.getString("SpoonGraph.Dialog.LoopAfterHopEnabled.Title"));
    mb.open();
  }
 else {
    TransHopMeta after=(TransHopMeta)hi.clone();
    spoon.addUndoChange(transMeta,new TransHopMeta[]{before},new TransHopMeta[]{after},new int[]{transMeta.indexOfTransHop(hi)});
    spoon.refreshGraph();
    spoon.refreshTree();
  }
}
