{
  if (monitorDialog != null) {
    monitorDialog.close();
  }
  MessageBox box=new MessageBox(Spoon.getInstance().getShell(),SWT.ICON_QUESTION | SWT.OK);
  box.setText(BaseMessages.getString(PKG,"MarketplacesDialog.RestartUpdate.Title"));
  box.setMessage(BaseMessages.getString(PKG,"MarketplacesDialog.RestartUpdate.Message"));
  box.open();
  DatabaseMeta.clearDatabaseInterfacesMap();
  PluginRegistry.init();
  Spoon spoon=Spoon.getInstance();
  int numTabs=spoon.delegates.tabs.getTabs().size();
  TabSet tabSet=spoon.getTabSet();
  int selectedIndex=tabSet.getSelectedIndex();
  for (int i=numTabs - 1; i >= 0; i--) {
    if (i != selectedIndex) {
      tabSet.setSelected(i);
      if (spoon.isExecutionResultsPaneVisible()) {
        spoon.showExecutionResults();
      }
    }
  }
  tabSet.setSelected(selectedIndex);
  if (spoon.isExecutionResultsPaneVisible()) {
    spoon.showExecutionResults();
  }
  spoon.refreshCoreObjects();
  spoon.refreshTree();
  spoon.refreshGraph();
  spoon.enableMenus();
  GUIResource.getInstance().reload();
  spoon.selectionFilter.setText(spoon.selectionFilter.getText());
}
