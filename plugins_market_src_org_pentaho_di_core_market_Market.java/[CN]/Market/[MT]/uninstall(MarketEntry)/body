{
  String parentFolderName=buildPluginsFolderPath(marketEntry);
  File pluginFolder=new File(parentFolderName + File.separator + marketEntry.getId());
  LogChannel.GENERAL.logBasic("Installing plugin in folder: " + pluginFolder.getAbsolutePath());
  if (!pluginFolder.exists()) {
    throw new KettleException("No plugin was found in the expected folder : " + pluginFolder.getAbsolutePath());
  }
  deleteDirectory(pluginFolder);
  if (!Display.getDefault().getThread().equals(Thread.currentThread())) {
    Spoon.getInstance().getDisplay().asyncExec(new Runnable(){
      public void run(){
        try {
          refreshSpoon();
        }
 catch (        KettleException e) {
          e.printStackTrace();
        }
      }
    }
);
  }
 else {
    refreshSpoon();
  }
}
