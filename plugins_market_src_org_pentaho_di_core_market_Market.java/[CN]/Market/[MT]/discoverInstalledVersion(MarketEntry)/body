{
  String pluginFolder=buildPluginsFolderPath(marketEntry) + File.separator + marketEntry.getId();
  File pluginFolderFile=new File(pluginFolder);
  if (pluginFolderFile.exists()) {
    marketEntry.setInstalled(true);
    String versionPath=pluginFolder + File.separator + "version.xml";
    DocumentBuilderFactory dbf=DocumentBuilderFactory.newInstance();
    FileReader reader=null;
    try {
      File file=new File(versionPath);
      if (!file.exists()) {
        return "Unknown";
      }
      DocumentBuilder db=dbf.newDocumentBuilder();
      reader=new FileReader(versionPath);
      Document dom=db.parse(new InputSource(reader));
      NodeList versionElements=dom.getElementsByTagName("version");
      if (versionElements.getLength() >= 1) {
        Element versionElement=(Element)versionElements.item(0);
        marketEntry.setInstalledBuildId(versionElement.getAttribute("buildId"));
        marketEntry.setInstalledBranch(versionElement.getAttribute("branch"));
        marketEntry.setInstalledVersion(versionElement.getTextContent());
        return versionElement.getTextContent();
      }
    }
 catch (    Exception e) {
      e.printStackTrace();
    }
 finally {
      try {
        if (reader != null) {
          reader.close();
        }
      }
 catch (      Exception e) {
        e.printStackTrace();
      }
    }
  }
 else {
    marketEntry.setInstalled(false);
  }
  return "Unknown";
}
