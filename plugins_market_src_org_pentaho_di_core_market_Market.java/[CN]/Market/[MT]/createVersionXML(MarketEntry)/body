{
  String pluginFolder=buildPluginsFolderPath(marketEntry) + File.separator + marketEntry.getId();
  String versionPath=pluginFolder + File.separator + "version.xml";
  File parentFolder=new File(pluginFolder);
  File file=new File(versionPath);
  if (file != null) {
    BufferedWriter bufferedWriter=null;
    try {
      if (!parentFolder.exists()) {
        parentFolder.mkdirs();
      }
      FileWriter fw=new FileWriter(file.getAbsoluteFile());
      bufferedWriter=new BufferedWriter(fw);
      bufferedWriter.write("<version>" + marketEntry.getVersion() + "</version>");
    }
 catch (    IOException ioe) {
      throw new KettleException(ioe);
    }
 finally {
      if (bufferedWriter != null) {
        try {
          bufferedWriter.close();
        }
 catch (        IOException ioe) {
          throw new KettleException(ioe);
        }
      }
    }
  }
}
