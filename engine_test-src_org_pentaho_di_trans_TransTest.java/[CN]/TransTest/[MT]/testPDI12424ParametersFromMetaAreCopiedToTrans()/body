{
  String testParam="testParam";
  String testParamValue="testParamValue";
  TransMeta mockTransMeta=mock(TransMeta.class);
  when(mockTransMeta.listVariables()).thenReturn(new String[]{});
  when(mockTransMeta.listParameters()).thenReturn(new String[]{testParam});
  when(mockTransMeta.getParameterValue(testParam)).thenReturn(testParamValue);
  FileObject ktr=KettleVFS.createTempFile("parameters",".ktr","ram://");
  OutputStream outputStream=ktr.getContent().getOutputStream(true);
  StringInputStream stringInputStream=new StringInputStream("<transformation></transformation>");
  IOUtils.copy(stringInputStream,outputStream);
  outputStream.close();
  Trans trans=new Trans(mockTransMeta,null,null,null,ktr.getURL().toURI().toString());
  assertEquals(testParamValue,trans.getParameterValue(testParam));
}
