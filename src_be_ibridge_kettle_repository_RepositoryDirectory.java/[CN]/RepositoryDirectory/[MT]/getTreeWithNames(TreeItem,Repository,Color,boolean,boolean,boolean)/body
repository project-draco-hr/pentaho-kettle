{
  ti.setText(getDirectoryName());
  ti.setForeground(dircolor);
  for (int i=0; i < getNrSubdirectories(); i++) {
    RepositoryDirectory subdir=getSubdirectory(i);
    TreeItem subti=new TreeItem(ti,SWT.NONE);
    subdir.getTreeWithNames(subti,rep,dircolor,trans,job,schema);
  }
  try {
    String names[]=null;
    if (trans)     names=rep.getTransformationNames(getID());
    if (job)     names=rep.getJobNames(getID());
    if (names != null) {
      for (int i=0; i < names.length; i++) {
        TreeItem titrans=new TreeItem(ti,SWT.NONE);
        titrans.setText(names[i]);
      }
    }
  }
 catch (  KettleDatabaseException dbe) {
    throw new KettleDatabaseException("Unable to populate tree with repository objects",dbe);
  }
  ti.setExpanded(isRoot());
}
