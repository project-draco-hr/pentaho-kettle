{
  String path[]=Const.splitPath(directoryPath,Const.FILE_SEPARATOR);
  RepositoryDirectory parent=this;
  for (int level=1; level <= path.length; level++) {
    String subPath[]=new String[level];
    for (int i=0; i < level; i++) {
      subPath[i]=path[i];
    }
    RepositoryDirectory rd=findDirectory(subPath);
    if (rd == null) {
      rd=new RepositoryDirectory(parent,subPath[level - 1]);
      System.out.println("New directory: [" + rd.getPath() + "]");
      if (rd.addToRep(rep)) {
        parent.addSubdirectory(rd);
        System.out.println("Created directory [" + rd.getPath() + "], id = "+ rd.getID());
        parent=rd;
      }
 else {
        throw new KettleDatabaseException("Unable to create repository directory [" + subPath[level - 1] + "] in directory ["+ parent.getPath()+ "]");
      }
    }
 else {
    }
  }
  return parent;
}
