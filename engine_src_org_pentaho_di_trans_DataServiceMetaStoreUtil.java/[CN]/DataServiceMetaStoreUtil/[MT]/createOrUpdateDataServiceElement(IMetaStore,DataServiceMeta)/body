{
  IMetaStoreElementType elementType=createDataServiceElementTypeIfNeeded(metaStore);
  IMetaStoreElement oldElement=metaStore.getElementByName(PentahoDefaults.NAMESPACE,elementType,dataServiceMeta.getName());
  IMetaStoreElement element=metaStore.newElement();
  populateDataServiceElement(metaStore,element,dataServiceMeta);
  if (oldElement == null) {
    metaStore.createElement(PentahoDefaults.NAMESPACE,elementType.getId(),element);
  }
 else {
    metaStore.updateElement(PentahoDefaults.NAMESPACE,elementType.getId(),oldElement.getId(),element);
  }
  return element;
}
