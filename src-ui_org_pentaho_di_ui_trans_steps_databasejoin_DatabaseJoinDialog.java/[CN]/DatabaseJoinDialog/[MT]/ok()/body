{
  if (Const.isEmpty(wStepname.getText()))   return;
  int nrparam=wParam.nrNonEmpty();
  input.allocate(nrparam);
  input.setRowLimit(Const.toInt(wLimit.getText(),0));
  input.setSql(wSQL.getText());
  input.setOuterJoin(wOuter.getSelection());
  input.setVariableReplace(wuseVars.getSelection());
  log.logDebug(toString(),BaseMessages.getString(PKG,"DatabaseJoinDialog.Log.ParametersFound") + nrparam + " parameters");
  for (int i=0; i < nrparam; i++) {
    TableItem item=wParam.getNonEmpty(i);
    input.getParameterField()[i]=item.getText(1);
    input.getParameterType()[i]=ValueMeta.getType(item.getText(2));
  }
  input.setDatabaseMeta(transMeta.findDatabase(wConnection.getText()));
  stepname=wStepname.getText();
  if (transMeta.findDatabase(wConnection.getText()) == null) {
    MessageBox mb=new MessageBox(shell,SWT.OK | SWT.ICON_ERROR);
    mb.setMessage(BaseMessages.getString(PKG,"DatabaseJoinDialog.InvalidConnection.DialogMessage"));
    mb.setText(BaseMessages.getString(PKG,"DatabaseJoinDialog.InvalidConnection.DialogTitle"));
    mb.open();
  }
  dispose();
}
