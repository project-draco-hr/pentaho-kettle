{
  RowSet inputFull=null;
  RowSet inputEmpty=null;
  for (  RowSet rowSet : getInputRowSets()) {
    if (rowSet.size() == transMeta.getSizeRowset()) {
      inputFull=rowSet;
    }
 else     if (rowSet.size() == 0) {
      inputEmpty=rowSet;
    }
  }
  if (inputFull != null && inputEmpty != null) {
    for (    StepMetaDataCombi combi : trans.getSteps()) {
      int inputSize=0;
      int totalSize=combi.step.getInputRowSets().size() * transMeta.getSizeRowset();
      for (      RowSet rowSet : combi.step.getInputRowSets()) {
        inputSize+=rowSet.size();
      }
      if (inputSize > 0 && inputSize == totalSize && combi.step.getOutputRowSets().size() > 1) {
        RowSet outputFull=null;
        RowSet outputEmpty=null;
        for (        RowSet rowSet : combi.step.getOutputRowSets()) {
          if (rowSet.size() == transMeta.getSizeRowset()) {
            outputFull=rowSet;
          }
 else           if (rowSet.size() == 0) {
            outputEmpty=rowSet;
          }
        }
        if (outputFull != null && outputEmpty != null) {
          if (transMeta.findPrevious(stepMeta,combi.stepMeta)) {
            throw new KettleStepException("A deadlock was detected between steps '" + combi.stepname + "' and '"+ stepname+ "'.  The steps are both waiting for each other because a series of row set buffers filled up.");
          }
        }
      }
    }
  }
}
