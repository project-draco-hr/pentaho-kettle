{
  Shell parent=getParent();
  shell=new Shell(parent,SWT.DIALOG_TRIM | SWT.RESIZE | SWT.MAX| SWT.MIN);
  props.setLook(shell);
  lsMod=new ModifyListener(){
    public void modifyText(    ModifyEvent e){
      partitionSchema.setChanged();
    }
  }
;
  middle=props.getMiddlePct();
  margin=Const.MARGIN;
  FormLayout formLayout=new FormLayout();
  formLayout.marginWidth=Const.FORM_MARGIN;
  formLayout.marginHeight=Const.FORM_MARGIN;
  shell.setText("Database Partitioning schema dialog");
  shell.setLayout(formLayout);
  wOK=new Button(shell,SWT.PUSH);
  wOK.setText(" &OK ");
  wGet=new Button(shell,SWT.PUSH);
  wGet.setText(" &Import partitions");
  wCancel=new Button(shell,SWT.PUSH);
  wCancel.setText(" &Cancel ");
  Button[] buttons=new Button[]{wOK,wGet,wCancel};
  BaseStepDialog.positionBottomButtons(shell,buttons,margin,null);
  Label wlName=new Label(shell,SWT.RIGHT);
  props.setLook(wlName);
  wlName.setText("Partition schema name  ");
  FormData fdlServiceURL=new FormData();
  fdlServiceURL.top=new FormAttachment(0,0);
  fdlServiceURL.left=new FormAttachment(0,0);
  fdlServiceURL.right=new FormAttachment(middle,0);
  wlName.setLayoutData(fdlServiceURL);
  wName=new Text(shell,SWT.SINGLE | SWT.LEFT | SWT.BORDER);
  props.setLook(wName);
  wName.addModifyListener(lsMod);
  FormData fdServiceURL=new FormData();
  fdServiceURL.top=new FormAttachment(0,0);
  fdServiceURL.left=new FormAttachment(middle,margin);
  fdServiceURL.right=new FormAttachment(95,0);
  wName.setLayoutData(fdServiceURL);
  Label wlPartitions=new Label(shell,SWT.RIGHT);
  wlPartitions.setText("Partitions  ");
  props.setLook(wlPartitions);
  FormData fdlPartitions=new FormData();
  fdlPartitions.left=new FormAttachment(0,0);
  fdlPartitions.right=new FormAttachment(middle,0);
  fdlPartitions.top=new FormAttachment(wName,margin);
  wlPartitions.setLayoutData(fdlPartitions);
  ColumnInfo[] partitionColumns=new ColumnInfo[]{new ColumnInfo("Partition ID",ColumnInfo.COLUMN_TYPE_TEXT,false,false)};
  wPartitions=new TableView(shell,SWT.BORDER | SWT.FULL_SELECTION | SWT.MULTI,partitionColumns,1,lsMod,props);
  props.setLook(wPartitions);
  FormData fdPartitions=new FormData();
  fdPartitions.left=new FormAttachment(middle,margin);
  fdPartitions.right=new FormAttachment(100,0);
  fdPartitions.top=new FormAttachment(wName,margin);
  fdPartitions.bottom=new FormAttachment(wOK,-margin * 2);
  wPartitions.setLayoutData(fdPartitions);
  wOK.addListener(SWT.Selection,new Listener(){
    public void handleEvent(    Event e){
      ok();
    }
  }
);
  wGet.addListener(SWT.Selection,new Listener(){
    public void handleEvent(    Event e){
      importPartitions();
    }
  }
);
  wCancel.addListener(SWT.Selection,new Listener(){
    public void handleEvent(    Event e){
      cancel();
    }
  }
);
  SelectionAdapter selAdapter=new SelectionAdapter(){
    public void widgetDefaultSelected(    SelectionEvent e){
      ok();
    }
  }
;
  wName.addSelectionListener(selAdapter);
  shell.addShellListener(new ShellAdapter(){
    public void shellClosed(    ShellEvent e){
      cancel();
    }
  }
);
  getData();
  BaseStepDialog.setSize(shell);
  shell.open();
  Display display=parent.getDisplay();
  while (!shell.isDisposed()) {
    if (!display.readAndDispatch())     display.sleep();
  }
  return ok;
}
