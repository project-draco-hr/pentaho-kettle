{
  meta=(TextFileOutputMeta)smi;
  data=(TextFileOutputData)sdi;
  if (super.init(smi,sdi)) {
    data.splitnr=0;
    if (!meta.isDoNotOpenNewFileInit()) {
      if (openNewFile() || meta.isFileNameInField()) {
        data.oneFileOpened=true;
        try {
          setSettings();
        }
 catch (        UnsupportedEncodingException e) {
          logError("Encoding problem: " + e.toString());
          logError(Const.getStackTracker(e));
          return false;
        }
        return true;
      }
 else {
        logError("Couldn't open file " + meta.getFileName());
        setErrors(1L);
        stopAll();
      }
    }
    return true;
  }
  return false;
}
