{
  boolean retval=false;
  TreeItem tiSel[]=wTree.getSelection();
  boolean done=false;
  boolean error=false;
  MessageBox mb=new MessageBox(shell,SWT.ICON_WARNING | SWT.YES | SWT.NO);
  mb.setMessage(Messages.getString("RepositoryExplorerDialog.Dialog.Trans.Delete.Confirm.Message1") + (tiSel.length > 1 ? Messages.getString("RepositoryExplorerDialog.Dialog.Trans.Delete.Confirm.Message2") + tiSel.length + Messages.getString("RepositoryExplorerDialog.Dialog.Trans.Delete.Confirm.Message3") : Messages.getString("RepositoryExplorerDialog.Dialog.Trans.Delete.Confirm.Message4")));
  mb.setText(Messages.getString("RepositoryExplorerDialog.Dialog.Trans.Delete.Confirm.Title"));
  int answer=mb.open();
  if (answer != SWT.YES) {
    return false;
  }
  for (int i=0; i < tiSel.length; i++) {
    TreeItem ti=tiSel[i];
    String name=ti.getText();
    done=false;
    RepositoryDirectory repdir=getDirectory(ti);
    try {
      long id=rep.getTransformationID(ti.getText(),repdir.getID());
      if (id > 0) {
        try {
          rep.delAllFromTrans(id);
          done=true;
        }
 catch (        KettleDatabaseException dbe) {
          new ErrorDialog(shell,Messages.getString("RepositoryExplorerDialog.Dialog.Trans.Delete.ErrorRemoving.Title"),Messages.getString("RepositoryExplorerDialog.Dialog.Trans.Delete.ErrorRemoving.Message") + name + "]",dbe);
          error=true;
        }
      }
 else {
        mb=new MessageBox(shell,SWT.ICON_ERROR | SWT.OK);
        mb.setMessage(Messages.getString("RepositoryExplorerDialog.Dialog.Trans.Delete.ErrorFinding.Message1") + name + "]"+ Const.CR+ Messages.getString("RepositoryExplorerDialog.Dialog.Trans.Delete.ErrorFinding.Message2"));
        mb.setText(Messages.getString("RepositoryExplorerDialog.Dialog.Trans.Delete.ErrorFinding.Title"));
        mb.open();
        error=true;
      }
      if (!error) {
        retval=true;
      }
      if (done)       ti.dispose();
    }
 catch (    KettleDatabaseException dbe) {
      new ErrorDialog(shell,Messages.getString("RepositoryExplorerDialog.Dialog.Trans.Delete.ErrorDeleting.Title"),Messages.getString("RepositoryExplorerDialog.Dialog.Trans.Delete.ErrorDeleting.Message"),dbe);
      error=true;
    }
  }
  return retval;
}
