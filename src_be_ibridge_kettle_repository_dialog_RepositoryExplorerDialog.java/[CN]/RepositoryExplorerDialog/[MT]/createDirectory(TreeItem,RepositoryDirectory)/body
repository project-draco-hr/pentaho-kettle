{
  EnterStringDialog esd=new EnterStringDialog(shell,props,"New directory","New directory","Specify the directory:");
  String newdir=esd.open();
  if (newdir != null) {
    RepositoryDirectory rd=new RepositoryDirectory(repdir,newdir);
    String path[]=rd.getPathArray();
    RepositoryDirectory exists=rep.getDirectoryTree().findDirectory(path);
    if (exists == null) {
      if (rd.addToRep(rep)) {
        refreshTree();
      }
 else {
        MessageBox mb=new MessageBox(shell,SWT.ICON_ERROR | SWT.OK);
        mb.setMessage("Sorry, I was unable to create directory [" + newdir + "] in directory ["+ repdir.getPath()+ "]");
        mb.setText("ERROR");
        mb.open();
      }
    }
 else {
      MessageBox mb=new MessageBox(shell,SWT.ICON_ERROR | SWT.OK);
      mb.setMessage("Sorry, directory [" + newdir + "] in directory ["+ repdir.getPath()+ "] already exists!");
      mb.setText("ERROR");
      mb.open();
    }
  }
}
