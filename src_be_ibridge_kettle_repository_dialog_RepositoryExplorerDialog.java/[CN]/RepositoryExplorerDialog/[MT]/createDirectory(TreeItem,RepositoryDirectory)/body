{
  EnterStringDialog esd=new EnterStringDialog(shell,props,Messages.getString("RepositoryExplorerDialog.Directory.Create.AskName.Title"),Messages.getString("RepositoryExplorerDialog.Directory.Create.AskName.Default"),Messages.getString("RepositoryExplorerDialog.Directory.Create.AskName.Message"));
  String newdir=esd.open();
  if (newdir != null) {
    RepositoryDirectory rd=new RepositoryDirectory(repdir,newdir);
    String path[]=rd.getPathArray();
    RepositoryDirectory exists=rep.getDirectoryTree().findDirectory(path);
    if (exists == null) {
      if (rd.addToRep(rep)) {
        refreshTree();
      }
 else {
        MessageBox mb=new MessageBox(shell,SWT.ICON_ERROR | SWT.OK);
        mb.setMessage(Messages.getString("RepositoryExplorerDialog.Directory.Create.UnexpectedError.Message1") + newdir + Messages.getString("RepositoryExplorerDialog.Directory.Create.UnexpectedError.Message2")+ repdir.getPath()+ "]");
        mb.setText(Messages.getString("RepositoryExplorerDialog.Directory.Create.UnexpectedError.Title"));
        mb.open();
      }
    }
 else {
      MessageBox mb=new MessageBox(shell,SWT.ICON_ERROR | SWT.OK);
      mb.setMessage(Messages.getString("RepositoryExplorerDialog.Directory.Create.AlreadyExists.Message1") + newdir + Messages.getString("RepositoryExplorerDialog.Directory.Create.AlreadyExists.Message2")+ repdir.getPath()+ Messages.getString("RepositoryExplorerDialog.Directory.Create.AlreadyExists.Message3"));
      mb.setText(Messages.getString("RepositoryExplorerDialog.Directory.Create.AlreadyExists.Title"));
      mb.open();
    }
  }
}
