{
  try {
    UserInfo uinfo=new UserInfo(rep,login);
    UserDialog ud=new UserDialog(shell,SWT.NONE,log,props,rep,uinfo);
    UserInfo ui=ud.open();
    if (!userinfo.isReadonly()) {
      if (ui != null) {
        ui.saveRep(rep);
      }
    }
 else {
      MessageBox mb=new MessageBox(shell,SWT.ICON_WARNING | SWT.OK);
      mb.setMessage("Sorry, you are not allowed to change this user.");
      mb.setText("Edit user");
      mb.open();
    }
    if (ui != null && !login.equalsIgnoreCase(ui.getLogin()))     refreshTree();
  }
 catch (  KettleException e) {
    new ErrorDialog(shell,props,"Error","Sorry, I couldn't save user information to the repository.",e);
  }
}
