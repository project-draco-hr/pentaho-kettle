{
  if (data.query == null) {
    data.query=getQuery(analytics);
    if (log.isDetailed()) {
      logDetailed("querying google analytics: " + data.query.buildHttpRequestUrl().toURI().toString());
    }
    try {
      data.feed=data.query.execute();
      data.entryIndex=0;
    }
 catch (    IOException e2) {
      throw new KettleException(e2);
    }
  }
 else   if (data.entryIndex >= data.feed.getItemsPerPage()) {
    try {
      int startIndex=(data.query.getStartIndex() == null) ? 0 : data.query.getStartIndex();
      int totalResults=(data.feed.getTotalResults() == null) ? 0 : data.feed.getTotalResults();
      if ((startIndex + data.entryIndex) <= totalResults) {
        data.query.setStartIndex(startIndex + data.entryIndex);
        data.feed=data.query.execute();
        data.entryIndex=0;
      }
    }
 catch (    IOException e2) {
      throw new KettleException(e2);
    }
  }
  List<List<String>> entries=data.feed.getRows();
  if (data.entryIndex < entries.size()) {
    return entries.get(data.entryIndex++);
  }
 else {
    return null;
  }
}
