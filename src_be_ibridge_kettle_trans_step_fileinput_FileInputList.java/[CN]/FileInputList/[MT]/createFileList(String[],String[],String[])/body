{
  FileInputList fileInputList=new FileInputList();
  final String realfile[]=Const.replEnv(fileName);
  final String realmask[]=Const.replEnv(fileMask);
  for (int i=0; i < realfile.length; i++) {
    final String onefile=realfile[i];
    final String onemask=realmask[i];
    final boolean onerequired=YES.equalsIgnoreCase(fileRequired[i]);
    if (onemask != null && onemask.length() > 0) {
      File file=new File(onefile);
      try {
        String[] fileNames=file.list(new FilenameFilter(){
          public boolean accept(          File dir,          String name){
            return Pattern.matches(onemask,name);
          }
        }
);
        if (fileNames != null)         for (int j=0; j < fileNames.length; j++) {
          fileInputList.addFile(new File(file,fileNames[j]));
        }
      }
 catch (      Exception e) {
        e.printStackTrace();
      }
    }
 else {
      File file=new File(onefile);
      if (file.exists()) {
        if (file.canRead()) {
          if (file.isFile())           fileInputList.addFile(file);
        }
 else         if (onerequired)         fileInputList.addNonAccessibleFile(file);
      }
 else       if (onerequired)       fileInputList.addNonExistantFile(file);
    }
  }
  fileInputList.sortFiles();
  return fileInputList;
}
